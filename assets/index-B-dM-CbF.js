(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function yf(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const rt={},fo=[],pr=()=>{},kg=()=>!1,lu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),vf=t=>t.startsWith("onUpdate:"),Vt=Object.assign,_f=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},L_=Object.prototype.hasOwnProperty,Je=(t,e)=>L_.call(t,e),Pe=Array.isArray,ho=t=>Fa(t)==="[object Map]",uu=t=>Fa(t)==="[object Set]",qh=t=>Fa(t)==="[object Date]",Le=t=>typeof t=="function",bt=t=>typeof t=="string",Tr=t=>typeof t=="symbol",et=t=>t!==null&&typeof t=="object",Ng=t=>(et(t)||Le(t))&&Le(t.then)&&Le(t.catch),xg=Object.prototype.toString,Fa=t=>xg.call(t),M_=t=>Fa(t).slice(8,-1),Dg=t=>Fa(t)==="[object Object]",bf=t=>bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,aa=yf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cu=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},V_=/-\w/g,Un=cu(t=>t.replace(V_,e=>e.slice(1).toUpperCase())),U_=/\B([A-Z])/g,As=cu(t=>t.replace(U_,"-$1").toLowerCase()),fu=cu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Yu=cu(t=>t?`on${fu(t)}`:""),Pi=(t,e)=>!Object.is(t,e),pl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Lg=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},hu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},F_=t=>{const e=bt(t)?Number(t):NaN;return isNaN(e)?t:e};let Hh;const du=()=>Hh||(Hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ef(t){if(Pe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=bt(r)?H_(r):Ef(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(bt(t)||et(t))return t}const j_=/;(?![^(]*\))/g,B_=/:([^]+)/,q_=/\/\*[^]*?\*\//g;function H_(t){const e={};return t.replace(q_,"").split(j_).forEach(n=>{if(n){const r=n.split(B_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function po(t){let e="";if(bt(t))e=t;else if(Pe(t))for(let n=0;n<t.length;n++){const r=po(t[n]);r&&(e+=r+" ")}else if(et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const z_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",K_=yf(z_);function Mg(t){return!!t||t===""}function $_(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=pu(t[r],e[r]);return n}function pu(t,e){if(t===e)return!0;let n=qh(t),r=qh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Tr(t),r=Tr(e),n||r)return t===e;if(n=Pe(t),r=Pe(e),n||r)return n&&r?$_(t,e):!1;if(n=et(t),r=et(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!pu(t[o],e[o]))return!1}}return String(t)===String(e)}function G_(t,e){return t.findIndex(n=>pu(n,e))}const Vg=t=>!!(t&&t.__v_isRef===!0),Mt=t=>bt(t)?t:t==null?"":Pe(t)||et(t)&&(t.toString===xg||!Le(t.toString))?Vg(t)?Mt(t.value):JSON.stringify(t,Ug,2):String(t),Ug=(t,e)=>Vg(e)?Ug(t,e.value):ho(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Xu(r,s)+" =>"]=i,n),{})}:uu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Xu(n))}:Tr(e)?Xu(e):et(e)&&!Pe(e)&&!Dg(e)?String(e):e,Xu=(t,e="")=>{var n;return Tr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let fn;class W_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!e&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=fn;try{return fn=this,e()}finally{fn=n}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Q_(){return fn}let st;const Ju=new WeakSet;class Fg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ju.has(this)&&(Ju.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zh(this),qg(this);const e=st,n=Qn;st=this,Qn=!0;try{return this.fn()}finally{Hg(this),st=e,Qn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Af(e);this.deps=this.depsTail=void 0,zh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ju.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Sc(this)&&this.run()}get dirty(){return Sc(this)}}let jg=0,la,ua;function Bg(t,e=!1){if(t.flags|=8,e){t.next=ua,ua=t;return}t.next=la,la=t}function Tf(){jg++}function wf(){if(--jg>0)return;if(ua){let e=ua;for(ua=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;la;){let e=la;for(la=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function qg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Hg(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Af(r),Y_(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Sc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ta)||(t.globalVersion=Ta,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Sc(t))))return;t.flags|=2;const e=t.dep,n=st,r=Qn;st=t,Qn=!0;try{qg(t);const i=t.fn(t._value);(e.version===0||Pi(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{st=n,Qn=r,Hg(t),t.flags&=-3}}function Af(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Af(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Y_(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Qn=!0;const Kg=[];function Qr(){Kg.push(Qn),Qn=!1}function Yr(){const t=Kg.pop();Qn=t===void 0?!0:t}function zh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=st;st=void 0;try{e()}finally{st=n}}}let Ta=0;class X_{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class If{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!st||!Qn||st===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==st)n=this.activeLink=new X_(st,this),st.deps?(n.prevDep=st.depsTail,st.depsTail.nextDep=n,st.depsTail=n):st.deps=st.depsTail=n,$g(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=st.depsTail,n.nextDep=void 0,st.depsTail.nextDep=n,st.depsTail=n,st.deps===n&&(st.deps=r)}return n}trigger(e){this.version++,Ta++,this.notify(e)}notify(e){Tf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{wf()}}}function $g(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)$g(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Rc=new WeakMap,ds=Symbol(""),Oc=Symbol(""),wa=Symbol("");function Gt(t,e,n){if(Qn&&st){let r=Rc.get(t);r||Rc.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new If),i.map=r,i.key=n),i.track()}}function qr(t,e,n,r,i,s){const o=Rc.get(t);if(!o){Ta++;return}const a=l=>{l&&l.trigger()};if(Tf(),e==="clear")o.forEach(a);else{const l=Pe(t),u=l&&bf(n);if(l&&n==="length"){const c=Number(r);o.forEach((h,d)=>{(d==="length"||d===wa||!Tr(d)&&d>=c)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(wa)),e){case"add":l?u&&a(o.get("length")):(a(o.get(ds)),ho(t)&&a(o.get(Oc)));break;case"delete":l||(a(o.get(ds)),ho(t)&&a(o.get(Oc)));break;case"set":ho(t)&&a(o.get(ds));break}}wf()}function Zs(t){const e=Qe(t);return e===t?e:(Gt(e,"iterate",wa),Mn(t)?e:e.map(Xn))}function gu(t){return Gt(t=Qe(t),"iterate",wa),t}function _i(t,e){return Xr(t)?ps(t)?wo(Xn(e)):wo(e):Xn(e)}const J_={__proto__:null,[Symbol.iterator](){return Zu(this,Symbol.iterator,t=>_i(this,t))},concat(...t){return Zs(this).concat(...t.map(e=>Pe(e)?Zs(e):e))},entries(){return Zu(this,"entries",t=>(t[1]=_i(this,t[1]),t))},every(t,e){return Vr(this,"every",t,e,void 0,arguments)},filter(t,e){return Vr(this,"filter",t,e,n=>n.map(r=>_i(this,r)),arguments)},find(t,e){return Vr(this,"find",t,e,n=>_i(this,n),arguments)},findIndex(t,e){return Vr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Vr(this,"findLast",t,e,n=>_i(this,n),arguments)},findLastIndex(t,e){return Vr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Vr(this,"forEach",t,e,void 0,arguments)},includes(...t){return ec(this,"includes",t)},indexOf(...t){return ec(this,"indexOf",t)},join(t){return Zs(this).join(t)},lastIndexOf(...t){return ec(this,"lastIndexOf",t)},map(t,e){return Vr(this,"map",t,e,void 0,arguments)},pop(){return Go(this,"pop")},push(...t){return Go(this,"push",t)},reduce(t,...e){return Kh(this,"reduce",t,e)},reduceRight(t,...e){return Kh(this,"reduceRight",t,e)},shift(){return Go(this,"shift")},some(t,e){return Vr(this,"some",t,e,void 0,arguments)},splice(...t){return Go(this,"splice",t)},toReversed(){return Zs(this).toReversed()},toSorted(t){return Zs(this).toSorted(t)},toSpliced(...t){return Zs(this).toSpliced(...t)},unshift(...t){return Go(this,"unshift",t)},values(){return Zu(this,"values",t=>_i(this,t))}};function Zu(t,e,n){const r=gu(t),i=r[e]();return r!==t&&!Mn(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const Z_=Array.prototype;function Vr(t,e,n,r,i,s){const o=gu(t),a=o!==t&&!Mn(t),l=o[e];if(l!==Z_[e]){const h=l.apply(t,s);return a?Xn(h):h}let u=n;o!==t&&(a?u=function(h,d){return n.call(this,_i(t,h),d,t)}:n.length>2&&(u=function(h,d){return n.call(this,h,d,t)}));const c=l.call(o,u,r);return a&&i?i(c):c}function Kh(t,e,n,r){const i=gu(t);let s=n;return i!==t&&(Mn(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,_i(t,a),l,t)}),i[e](s,...r)}function ec(t,e,n){const r=Qe(t);Gt(r,"iterate",wa);const i=r[e](...n);return(i===-1||i===!1)&&Of(n[0])?(n[0]=Qe(n[0]),r[e](...n)):i}function Go(t,e,n=[]){Qr(),Tf();const r=Qe(t)[e].apply(t,n);return wf(),Yr(),r}const eb=yf("__proto__,__v_isRef,__isVue"),Gg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tr));function tb(t){Tr(t)||(t=String(t));const e=Qe(this);return Gt(e,"has",t),e.hasOwnProperty(t)}class Wg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?fb:Jg:s?Xg:Yg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Pe(e);if(!i){let l;if(o&&(l=J_[n]))return l;if(n==="hasOwnProperty")return tb}const a=Reflect.get(e,n,Xt(e)?e:r);if((Tr(n)?Gg.has(n):eb(n))||(i||Gt(e,"get",n),s))return a;if(Xt(a)){const l=o&&bf(n)?a:a.value;return i&&et(l)?Cc(l):l}return et(a)?i?Cc(a):Is(a):a}}class Qg extends Wg{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];const o=Pe(e)&&bf(n);if(!this._isShallow){const u=Xr(s);if(!Mn(r)&&!Xr(r)&&(s=Qe(s),r=Qe(r)),!o&&Xt(s)&&!Xt(r))return u||(s.value=r),!0}const a=o?Number(n)<e.length:Je(e,n),l=Reflect.set(e,n,r,Xt(e)?e:i);return e===Qe(i)&&(a?Pi(r,s)&&qr(e,"set",n,r):qr(e,"add",n,r)),l}deleteProperty(e,n){const r=Je(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&qr(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Tr(n)||!Gg.has(n))&&Gt(e,"has",n),r}ownKeys(e){return Gt(e,"iterate",Pe(e)?"length":ds),Reflect.ownKeys(e)}}class nb extends Wg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const rb=new Qg,ib=new nb,sb=new Qg(!0);const Pc=t=>t,rl=t=>Reflect.getPrototypeOf(t);function ob(t,e,n){return function(...r){const i=this.__v_raw,s=Qe(i),o=ho(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),c=n?Pc:e?wo:Xn;return!e&&Gt(s,"iterate",l?Oc:ds),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function il(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ab(t,e){const n={get(i){const s=this.__v_raw,o=Qe(s),a=Qe(i);t||(Pi(i,a)&&Gt(o,"get",i),Gt(o,"get",a));const{has:l}=rl(o),u=e?Pc:t?wo:Xn;if(l.call(o,i))return u(s.get(i));if(l.call(o,a))return u(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Gt(Qe(i),"iterate",ds),i.size},has(i){const s=this.__v_raw,o=Qe(s),a=Qe(i);return t||(Pi(i,a)&&Gt(o,"has",i),Gt(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Qe(a),u=e?Pc:t?wo:Xn;return!t&&Gt(l,"iterate",ds),a.forEach((c,h)=>i.call(s,u(c),u(h),o))}};return Vt(n,t?{add:il("add"),set:il("set"),delete:il("delete"),clear:il("clear")}:{add(i){!e&&!Mn(i)&&!Xr(i)&&(i=Qe(i));const s=Qe(this);return rl(s).has.call(s,i)||(s.add(i),qr(s,"add",i,i)),this},set(i,s){!e&&!Mn(s)&&!Xr(s)&&(s=Qe(s));const o=Qe(this),{has:a,get:l}=rl(o);let u=a.call(o,i);u||(i=Qe(i),u=a.call(o,i));const c=l.call(o,i);return o.set(i,s),u?Pi(s,c)&&qr(o,"set",i,s):qr(o,"add",i,s),this},delete(i){const s=Qe(this),{has:o,get:a}=rl(s);let l=o.call(s,i);l||(i=Qe(i),l=o.call(s,i)),a&&a.call(s,i);const u=s.delete(i);return l&&qr(s,"delete",i,void 0),u},clear(){const i=Qe(this),s=i.size!==0,o=i.clear();return s&&qr(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=ob(i,t,e)}),n}function Sf(t,e){const n=ab(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Je(n,i)&&i in r?n:r,i,s)}const lb={get:Sf(!1,!1)},ub={get:Sf(!1,!0)},cb={get:Sf(!0,!1)};const Yg=new WeakMap,Xg=new WeakMap,Jg=new WeakMap,fb=new WeakMap;function hb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function db(t){return t.__v_skip||!Object.isExtensible(t)?0:hb(M_(t))}function Is(t){return Xr(t)?t:Rf(t,!1,rb,lb,Yg)}function Zg(t){return Rf(t,!1,sb,ub,Xg)}function Cc(t){return Rf(t,!0,ib,cb,Jg)}function Rf(t,e,n,r,i){if(!et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=db(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function ps(t){return Xr(t)?ps(t.__v_raw):!!(t&&t.__v_isReactive)}function Xr(t){return!!(t&&t.__v_isReadonly)}function Mn(t){return!!(t&&t.__v_isShallow)}function Of(t){return t?!!t.__v_raw:!1}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function pb(t){return!Je(t,"__v_skip")&&Object.isExtensible(t)&&Lg(t,"__v_skip",!0),t}const Xn=t=>et(t)?Is(t):t,wo=t=>et(t)?Cc(t):t;function Xt(t){return t?t.__v_isRef===!0:!1}function Ue(t){return em(t,!1)}function gb(t){return em(t,!0)}function em(t,e){return Xt(t)?t:new mb(t,e)}class mb{constructor(e,n){this.dep=new If,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Qe(e),this._value=n?e:Xn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Mn(e)||Xr(e);e=r?e:Qe(e),Pi(e,n)&&(this._rawValue=e,this._value=r?e:Xn(e),this.dep.trigger())}}function gs(t){return Xt(t)?t.value:t}const yb={get:(t,e,n)=>e==="__v_raw"?t:gs(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Xt(i)&&!Xt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function tm(t){return ps(t)?t:new Proxy(t,yb)}class vb{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new If(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ta-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&st!==this)return Bg(this,!0),!0}get value(){const e=this.dep.track();return zg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _b(t,e,n=!1){let r,i;return Le(t)?r=t:(r=t.get,i=t.set),new vb(r,i,n)}const sl={},Pl=new WeakMap;let as;function bb(t,e=!1,n=as){if(n){let r=Pl.get(n);r||Pl.set(n,r=[]),r.push(t)}}function Eb(t,e,n=rt){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,u=g=>i?g:Mn(g)||i===!1||i===0?Hr(g,1):Hr(g);let c,h,d,p,T=!1,_=!1;if(Xt(t)?(h=()=>t.value,T=Mn(t)):ps(t)?(h=()=>u(t),T=!0):Pe(t)?(_=!0,T=t.some(g=>ps(g)||Mn(g)),h=()=>t.map(g=>{if(Xt(g))return g.value;if(ps(g))return u(g);if(Le(g))return l?l(g,2):g()})):Le(t)?e?h=l?()=>l(t,2):t:h=()=>{if(d){Qr();try{d()}finally{Yr()}}const g=as;as=c;try{return l?l(t,3,[p]):t(p)}finally{as=g}}:h=pr,e&&i){const g=h,w=i===!0?1/0:i;h=()=>Hr(g(),w)}const v=Q_(),b=()=>{c.stop(),v&&v.active&&_f(v.effects,c)};if(s&&e){const g=e;e=(...w)=>{g(...w),b()}}let E=_?new Array(t.length).fill(sl):sl;const m=g=>{if(!(!(c.flags&1)||!c.dirty&&!g))if(e){const w=c.run();if(i||T||(_?w.some((x,R)=>Pi(x,E[R])):Pi(w,E))){d&&d();const x=as;as=c;try{const R=[w,E===sl?void 0:_&&E[0]===sl?[]:E,p];E=w,l?l(e,3,R):e(...R)}finally{as=x}}}else c.run()};return a&&a(m),c=new Fg(h),c.scheduler=o?()=>o(m,!1):m,p=g=>bb(g,!1,c),d=c.onStop=()=>{const g=Pl.get(c);if(g){if(l)l(g,4);else for(const w of g)w();Pl.delete(c)}},e?r?m(!0):E=c.run():o?o(m.bind(null,!0),!0):c.run(),b.pause=c.pause.bind(c),b.resume=c.resume.bind(c),b.stop=b,b}function Hr(t,e=1/0,n){if(e<=0||!et(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Xt(t))Hr(t.value,e,n);else if(Pe(t))for(let r=0;r<t.length;r++)Hr(t[r],e,n);else if(uu(t)||ho(t))t.forEach(r=>{Hr(r,e,n)});else if(Dg(t)){for(const r in t)Hr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Hr(t[r],e,n)}return t}function ja(t,e,n,r){try{return r?t(...r):t()}catch(i){mu(i,e,n)}}function Jn(t,e,n,r){if(Le(t)){const i=ja(t,e,n,r);return i&&Ng(i)&&i.catch(s=>{mu(s,e,n)}),i}if(Pe(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Jn(t[s],e,n,r));return i}}function mu(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||rt;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,l,u)===!1)return}a=a.parent}if(s){Qr(),ja(s,null,10,[t,l,u]),Yr();return}}Tb(t,n,i,r,o)}function Tb(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const on=[];let ur=-1;const go=[];let bi=null,ro=0;const nm=Promise.resolve();let Cl=null;function Aa(t){const e=Cl||nm;return t?e.then(this?t.bind(this):t):e}function wb(t){let e=ur+1,n=on.length;for(;e<n;){const r=e+n>>>1,i=on[r],s=Ia(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Pf(t){if(!(t.flags&1)){const e=Ia(t),n=on[on.length-1];!n||!(t.flags&2)&&e>=Ia(n)?on.push(t):on.splice(wb(e),0,t),t.flags|=1,rm()}}function rm(){Cl||(Cl=nm.then(sm))}function Ab(t){Pe(t)?go.push(...t):bi&&t.id===-1?bi.splice(ro+1,0,t):t.flags&1||(go.push(t),t.flags|=1),rm()}function $h(t,e,n=ur+1){for(;n<on.length;n++){const r=on[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;on.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function im(t){if(go.length){const e=[...new Set(go)].sort((n,r)=>Ia(n)-Ia(r));if(go.length=0,bi){bi.push(...e);return}for(bi=e,ro=0;ro<bi.length;ro++){const n=bi[ro];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}bi=null,ro=0}}const Ia=t=>t.id==null?t.flags&2?-1:1/0:t.id;function sm(t){try{for(ur=0;ur<on.length;ur++){const e=on[ur];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ja(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ur<on.length;ur++){const e=on[ur];e&&(e.flags&=-2)}ur=-1,on.length=0,im(),Cl=null,(on.length||go.length)&&sm()}}let Tn=null,om=null;function kl(t){const e=Tn;return Tn=t,om=t&&t.type.__scopeId||null,e}function rn(t,e=Tn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Dl(-1);const s=kl(e);let o;try{o=t(...i)}finally{kl(s),r._d&&Dl(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ln(t,e){if(Tn===null)return t;const n=Eu(Tn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=rt]=e[i];s&&(Le(s)&&(s={mounted:s,updated:s}),s.deep&&Hr(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function rs(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Qr(),Jn(l,n,8,[t.el,a,t,e]),Yr())}}const Ib=Symbol("_vte"),am=t=>t.__isTeleport,Br=Symbol("_leaveCb"),ol=Symbol("_enterCb");function Sb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ri(()=>{t.isMounted=!0}),kf(()=>{t.isUnmounting=!0}),t}const Nn=[Function,Array],lm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Nn,onEnter:Nn,onAfterEnter:Nn,onEnterCancelled:Nn,onBeforeLeave:Nn,onLeave:Nn,onAfterLeave:Nn,onLeaveCancelled:Nn,onBeforeAppear:Nn,onAppear:Nn,onAfterAppear:Nn,onAppearCancelled:Nn},um=t=>{const e=t.subTree;return e.component?um(e.component):e},Rb={name:"BaseTransition",props:lm,setup(t,{slots:e}){const n=Dm(),r=Sb();return()=>{const i=e.default&&hm(e.default(),!0);if(!i||!i.length)return;const s=cm(i),o=Qe(t),{mode:a}=o;if(r.isLeaving)return tc(s);const l=Gh(s);if(!l)return tc(s);let u=kc(l,o,r,n,h=>u=h);l.type!==an&&Sa(l,u);let c=n.subTree&&Gh(n.subTree);if(c&&c.type!==an&&!us(c,l)&&um(n).type!==an){let h=kc(c,o,r,n);if(Sa(c,h),a==="out-in"&&l.type!==an)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,c=void 0},tc(s);a==="in-out"&&l.type!==an?h.delayLeave=(d,p,T)=>{const _=fm(r,c);_[String(c.key)]=c,d[Br]=()=>{p(),d[Br]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{T(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return s}}};function cm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==an){e=n;break}}return e}const Ob=Rb;function fm(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function kc(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:d,onLeave:p,onAfterLeave:T,onLeaveCancelled:_,onBeforeAppear:v,onAppear:b,onAfterAppear:E,onAppearCancelled:m}=e,g=String(t.key),w=fm(n,t),x=(P,O)=>{P&&Jn(P,r,9,O)},R=(P,O)=>{const y=O[1];x(P,O),Pe(P)?P.every(I=>I.length<=1)&&y():P.length<=1&&y()},A={mode:o,persisted:a,beforeEnter(P){let O=l;if(!n.isMounted)if(s)O=v||l;else return;P[Br]&&P[Br](!0);const y=w[g];y&&us(t,y)&&y.el[Br]&&y.el[Br](),x(O,[P])},enter(P){let O=u,y=c,I=h;if(!n.isMounted)if(s)O=b||u,y=E||c,I=m||h;else return;let S=!1;const D=P[ol]=B=>{S||(S=!0,B?x(I,[P]):x(y,[P]),A.delayedLeave&&A.delayedLeave(),P[ol]=void 0)};O?R(O,[P,D]):D()},leave(P,O){const y=String(t.key);if(P[ol]&&P[ol](!0),n.isUnmounting)return O();x(d,[P]);let I=!1;const S=P[Br]=D=>{I||(I=!0,O(),D?x(_,[P]):x(T,[P]),P[Br]=void 0,w[y]===t&&delete w[y])};w[y]=t,p?R(p,[P,S]):S()},clone(P){const O=kc(P,e,n,r,i);return i&&i(O),O}};return A}function tc(t){if(yu(t))return t=Di(t),t.children=null,t}function Gh(t){if(!yu(t))return am(t.type)&&t.children?cm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Le(n.default))return n.default()}}function Sa(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Sa(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function hm(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===bn?(o.patchFlag&128&&i++,r=r.concat(hm(o.children,e,a))):(e||o.type!==an)&&r.push(a!=null?Di(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Cf(t,e){return Le(t)?Vt({name:t.name},e,{setup:t}):t}function dm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Nl=new WeakMap;function ca(t,e,n,r,i=!1){if(Pe(t)){t.forEach((T,_)=>ca(T,e&&(Pe(e)?e[_]:e),n,r,i));return}if(fa(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ca(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Eu(r.component):r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===rt?a.refs={}:a.refs,h=a.setupState,d=Qe(h),p=h===rt?kg:T=>Je(d,T);if(u!=null&&u!==l){if(Wh(e),bt(u))c[u]=null,p(u)&&(h[u]=null);else if(Xt(u)){u.value=null;const T=e;T.k&&(c[T.k]=null)}}if(Le(l))ja(l,a,12,[o,c]);else{const T=bt(l),_=Xt(l);if(T||_){const v=()=>{if(t.f){const b=T?p(l)?h[l]:c[l]:l.value;if(i)Pe(b)&&_f(b,s);else if(Pe(b))b.includes(s)||b.push(s);else if(T)c[l]=[s],p(l)&&(h[l]=c[l]);else{const E=[s];l.value=E,t.k&&(c[t.k]=E)}}else T?(c[l]=o,p(l)&&(h[l]=o)):_&&(l.value=o,t.k&&(c[t.k]=o))};if(o){const b=()=>{v(),Nl.delete(t)};b.id=-1,Nl.set(t,b),_n(b,n)}else Wh(t),v()}}}function Wh(t){const e=Nl.get(t);e&&(e.flags|=8,Nl.delete(t))}du().requestIdleCallback;du().cancelIdleCallback;const fa=t=>!!t.type.__asyncLoader,yu=t=>t.type.__isKeepAlive;function Pb(t,e){pm(t,"a",e)}function Cb(t,e){pm(t,"da",e)}function pm(t,e,n=Qt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(vu(e,r,n),n){let i=n.parent;for(;i&&i.parent;)yu(i.parent.vnode)&&kb(r,e,n,i),i=i.parent}}function kb(t,e,n,r){const i=vu(e,t,r,!0);Nf(()=>{_f(r[e],i)},n)}function vu(t,e,n=Qt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Qr();const a=qa(n),l=Jn(e,n,t,o);return a(),Yr(),l});return r?i.unshift(s):i.push(s),s}}const ni=t=>(e,n=Qt)=>{(!Oa||t==="sp")&&vu(t,(...r)=>e(...r),n)},Nb=ni("bm"),ri=ni("m"),xb=ni("bu"),Db=ni("u"),kf=ni("bum"),Nf=ni("um"),Lb=ni("sp"),Mb=ni("rtg"),Vb=ni("rtc");function Ub(t,e=Qt){vu("ec",t,e)}const Fb="components";function Ba(t,e){return Bb(Fb,t,!0,e)||t}const jb=Symbol.for("v-ndc");function Bb(t,e,n=!0,r=!1){const i=Tn||Qt;if(i){const s=i.type;{const a=OE(s,!1);if(a&&(a===e||a===Un(e)||a===fu(Un(e))))return s}const o=Qh(i[t]||s[t],e)||Qh(i.appContext[t],e);return!o&&r?s:o}}function Qh(t,e){return t&&(t[e]||t[Un(e)]||t[fu(Un(e))])}function Nc(t,e,n,r){let i;const s=n,o=Pe(t);if(o||bt(t)){const a=o&&ps(t);let l=!1,u=!1;a&&(l=!Mn(t),u=Xr(t),t=gu(t)),i=new Array(t.length);for(let c=0,h=t.length;c<h;c++)i[c]=e(l?u?wo(Xn(t[c])):Xn(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(et(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];i[l]=e(t[c],c,l,s)}}else i=[];return i}const xc=t=>t?Lm(t)?Eu(t):xc(t.parent):null,ha=Vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xc(t.parent),$root:t=>xc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>mm(t),$forceUpdate:t=>t.f||(t.f=()=>{Pf(t.update)}),$nextTick:t=>t.n||(t.n=Aa.bind(t.proxy)),$watch:t=>Jb.bind(t)}),nc=(t,e)=>t!==rt&&!t.__isScriptSetup&&Je(t,e),qb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(nc(r,e))return o[e]=1,r[e];if(i!==rt&&Je(i,e))return o[e]=2,i[e];if(Je(s,e))return o[e]=3,s[e];if(n!==rt&&Je(n,e))return o[e]=4,n[e];Dc&&(o[e]=0)}}const u=ha[e];let c,h;if(u)return e==="$attrs"&&Gt(t.attrs,"get",""),u(t);if((c=a.__cssModules)&&(c=c[e]))return c;if(n!==rt&&Je(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Je(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return nc(i,e)?(i[e]=n,!0):r!==rt&&Je(r,e)?(r[e]=n,!0):Je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:s,type:o}},a){let l;return!!(n[a]||t!==rt&&a[0]!=="$"&&Je(t,a)||nc(e,a)||Je(s,a)||Je(r,a)||Je(ha,a)||Je(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Yh(t){return Pe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Dc=!0;function Hb(t){const e=mm(t),n=t.proxy,r=t.ctx;Dc=!1,e.beforeCreate&&Xh(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:p,updated:T,activated:_,deactivated:v,beforeDestroy:b,beforeUnmount:E,destroyed:m,unmounted:g,render:w,renderTracked:x,renderTriggered:R,errorCaptured:A,serverPrefetch:P,expose:O,inheritAttrs:y,components:I,directives:S,filters:D}=e;if(u&&zb(u,r,null),o)for(const W in o){const ae=o[W];Le(ae)&&(r[W]=ae.bind(n))}if(i){const W=i.call(n,n);et(W)&&(t.data=Is(W))}if(Dc=!0,s)for(const W in s){const ae=s[W],Z=Le(ae)?ae.bind(n,n):Le(ae.get)?ae.get.bind(n,n):pr,H=!Le(ae)&&Le(ae.set)?ae.set.bind(n):pr,L=Yt({get:Z,set:H});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>L.value,set:j=>L.value=j})}if(a)for(const W in a)gm(a[W],r,n,W);if(l){const W=Le(l)?l.call(n):l;Reflect.ownKeys(W).forEach(ae=>{gl(ae,W[ae])})}c&&Xh(c,t,"c");function $(W,ae){Pe(ae)?ae.forEach(Z=>W(Z.bind(n))):ae&&W(ae.bind(n))}if($(Nb,h),$(ri,d),$(xb,p),$(Db,T),$(Pb,_),$(Cb,v),$(Ub,A),$(Vb,x),$(Mb,R),$(kf,E),$(Nf,g),$(Lb,P),Pe(O))if(O.length){const W=t.exposed||(t.exposed={});O.forEach(ae=>{Object.defineProperty(W,ae,{get:()=>n[ae],set:Z=>n[ae]=Z,enumerable:!0})})}else t.exposed||(t.exposed={});w&&t.render===pr&&(t.render=w),y!=null&&(t.inheritAttrs=y),I&&(t.components=I),S&&(t.directives=S),P&&dm(t)}function zb(t,e,n=pr){Pe(t)&&(t=Lc(t));for(const r in t){const i=t[r];let s;et(i)?"default"in i?s=Yn(i.from||r,i.default,!0):s=Yn(i.from||r):s=Yn(i),Xt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Xh(t,e,n){Jn(Pe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function gm(t,e,n,r){let i=r.includes(".")?_m(n,r):()=>n[r];if(bt(t)){const s=e[t];Le(s)&&ms(i,s)}else if(Le(t))ms(i,t.bind(n));else if(et(t))if(Pe(t))t.forEach(s=>gm(s,e,n,r));else{const s=Le(t.handler)?t.handler.bind(n):e[t.handler];Le(s)&&ms(i,s,t)}}function mm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>xl(l,u,o,!0)),xl(l,e,o)),et(e)&&s.set(e,l),l}function xl(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&xl(t,s,n,!0),i&&i.forEach(o=>xl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Kb[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Kb={data:Jh,props:Zh,emits:Zh,methods:Jo,computed:Jo,beforeCreate:nn,created:nn,beforeMount:nn,mounted:nn,beforeUpdate:nn,updated:nn,beforeDestroy:nn,beforeUnmount:nn,destroyed:nn,unmounted:nn,activated:nn,deactivated:nn,errorCaptured:nn,serverPrefetch:nn,components:Jo,directives:Jo,watch:Gb,provide:Jh,inject:$b};function Jh(t,e){return e?t?function(){return Vt(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function $b(t,e){return Jo(Lc(t),Lc(e))}function Lc(t){if(Pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function nn(t,e){return t?[...new Set([].concat(t,e))]:e}function Jo(t,e){return t?Vt(Object.create(null),t,e):e}function Zh(t,e){return t?Pe(t)&&Pe(e)?[...new Set([...t,...e])]:Vt(Object.create(null),Yh(t),Yh(e??{})):e}function Gb(t,e){if(!t)return e;if(!e)return t;const n=Vt(Object.create(null),t);for(const r in e)n[r]=nn(t[r],e[r]);return n}function ym(){return{app:null,config:{isNativeTag:kg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wb=0;function Qb(t,e){return function(r,i=null){Le(r)||(r=Vt({},r)),i!=null&&!et(i)&&(i=null);const s=ym(),o=new WeakSet,a=[];let l=!1;const u=s.app={_uid:Wb++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:CE,get config(){return s.config},set config(c){},use(c,...h){return o.has(c)||(c&&Le(c.install)?(o.add(c),c.install(u,...h)):Le(c)&&(o.add(c),c(u,...h))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,h){return h?(s.components[c]=h,u):s.components[c]},directive(c,h){return h?(s.directives[c]=h,u):s.directives[c]},mount(c,h,d){if(!l){const p=u._ceVNode||it(r,i);return p.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),t(p,c,d),l=!0,u._container=c,c.__vue_app__=u,Eu(p.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Jn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return s.provides[c]=h,u},runWithContext(c){const h=mo;mo=u;try{return c()}finally{mo=h}}};return u}}let mo=null;function gl(t,e){if(Qt){let n=Qt.provides;const r=Qt.parent&&Qt.parent.provides;r===n&&(n=Qt.provides=Object.create(r)),n[t]=e}}function Yn(t,e,n=!1){const r=Dm();if(r||mo){let i=mo?mo._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Le(e)?e.call(r&&r.proxy):e}}const Yb=Symbol.for("v-scx"),Xb=()=>Yn(Yb);function ms(t,e,n){return vm(t,e,n)}function vm(t,e,n=rt){const{immediate:r,deep:i,flush:s,once:o}=n,a=Vt({},n),l=e&&r||!e&&s!=="post";let u;if(Oa){if(s==="sync"){const p=Xb();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=pr,p.resume=pr,p.pause=pr,p}}const c=Qt;a.call=(p,T,_)=>Jn(p,c,T,_);let h=!1;s==="post"?a.scheduler=p=>{_n(p,c&&c.suspense)}:s!=="sync"&&(h=!0,a.scheduler=(p,T)=>{T?p():Pf(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const d=Eb(t,e,a);return Oa&&(u?u.push(d):l&&d()),d}function Jb(t,e,n){const r=this.proxy,i=bt(t)?t.includes(".")?_m(r,t):()=>r[t]:t.bind(r,r);let s;Le(e)?s=e:(s=e.handler,n=e);const o=qa(this),a=vm(i,s.bind(r),n);return o(),a}function _m(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Zb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Un(e)}Modifiers`]||t[`${As(e)}Modifiers`];function eE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||rt;let i=n;const s=e.startsWith("update:"),o=s&&Zb(r,e.slice(7));o&&(o.trim&&(i=n.map(c=>bt(c)?c.trim():c)),o.number&&(i=n.map(hu)));let a,l=r[a=Yu(e)]||r[a=Yu(Un(e))];!l&&s&&(l=r[a=Yu(As(e))]),l&&Jn(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Jn(u,t,6,i)}}const tE=new WeakMap;function bm(t,e,n=!1){const r=n?tE:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Le(t)){const l=u=>{const c=bm(u,e,!0);c&&(a=!0,Vt(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(et(t)&&r.set(t,null),null):(Pe(s)?s.forEach(l=>o[l]=null):Vt(o,s),et(t)&&r.set(t,o),o)}function _u(t,e){return!t||!lu(e)?!1:(e=e.slice(2).replace(/Once$/,""),Je(t,e[0].toLowerCase()+e.slice(1))||Je(t,As(e))||Je(t,e))}function ed(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:d,setupState:p,ctx:T,inheritAttrs:_}=t,v=kl(t);let b,E;try{if(n.shapeFlag&4){const g=i||r,w=g;b=fr(u.call(w,g,c,h,p,d,T)),E=a}else{const g=e;b=fr(g.length>1?g(h,{attrs:a,slots:o,emit:l}):g(h,null)),E=e.props?a:nE(a)}}catch(g){da.length=0,mu(g,t,1),b=it(an)}let m=b;if(E&&_!==!1){const g=Object.keys(E),{shapeFlag:w}=m;g.length&&w&7&&(s&&g.some(vf)&&(E=rE(E,s)),m=Di(m,E,!1,!0))}return n.dirs&&(m=Di(m,null,!1,!0),m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&Sa(m,n.transition),b=m,kl(v),b}const nE=t=>{let e;for(const n in t)(n==="class"||n==="style"||lu(n))&&((e||(e={}))[n]=t[n]);return e},rE=(t,e)=>{const n={};for(const r in t)(!vf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function iE(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?td(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==r[d]&&!_u(u,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?td(r,o,u):!0:!!o;return!1}function td(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!_u(n,s))return!0}return!1}function sE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Em={},Tm=()=>Object.create(Em),wm=t=>Object.getPrototypeOf(t)===Em;function oE(t,e,n,r=!1){const i={},s=Tm();t.propsDefaults=Object.create(null),Am(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Zg(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function aE(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Qe(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(_u(t.emitsOptions,d))continue;const p=e[d];if(l)if(Je(s,d))p!==s[d]&&(s[d]=p,u=!0);else{const T=Un(d);i[T]=Mc(l,a,T,p,t,!1)}else p!==s[d]&&(s[d]=p,u=!0)}}}else{Am(t,e,i,s)&&(u=!0);let c;for(const h in a)(!e||!Je(e,h)&&((c=As(h))===h||!Je(e,c)))&&(l?n&&(n[h]!==void 0||n[c]!==void 0)&&(i[h]=Mc(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!Je(e,h))&&(delete s[h],u=!0)}u&&qr(t.attrs,"set","")}function Am(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(aa(l))continue;const u=e[l];let c;i&&Je(i,c=Un(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:_u(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=Qe(n),u=a||rt;for(let c=0;c<s.length;c++){const h=s[c];n[h]=Mc(i,l,h,u[h],t,!Je(u,h))}}return o}function Mc(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Je(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Le(l)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const c=qa(i);r=u[n]=l.call(null,e),c()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===As(n))&&(r=!0))}return r}const lE=new WeakMap;function Im(t,e,n=!1){const r=n?lE:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Le(t)){const c=h=>{l=!0;const[d,p]=Im(h,e,!0);Vt(o,d),p&&a.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return et(t)&&r.set(t,fo),fo;if(Pe(s))for(let c=0;c<s.length;c++){const h=Un(s[c]);nd(h)&&(o[h]=rt)}else if(s)for(const c in s){const h=Un(c);if(nd(h)){const d=s[c],p=o[h]=Pe(d)||Le(d)?{type:d}:Vt({},d),T=p.type;let _=!1,v=!0;if(Pe(T))for(let b=0;b<T.length;++b){const E=T[b],m=Le(E)&&E.name;if(m==="Boolean"){_=!0;break}else m==="String"&&(v=!1)}else _=Le(T)&&T.name==="Boolean";p[0]=_,p[1]=v,(_||Je(p,"default"))&&a.push(h)}}const u=[o,a];return et(t)&&r.set(t,u),u}function nd(t){return t[0]!=="$"&&!aa(t)}const xf=t=>t==="_"||t==="_ctx"||t==="$stable",Df=t=>Pe(t)?t.map(fr):[fr(t)],uE=(t,e,n)=>{if(e._n)return e;const r=rn((...i)=>Df(e(...i)),n);return r._c=!1,r},Sm=(t,e,n)=>{const r=t._ctx;for(const i in t){if(xf(i))continue;const s=t[i];if(Le(s))e[i]=uE(i,s,r);else if(s!=null){const o=Df(s);e[i]=()=>o}}},Rm=(t,e)=>{const n=Df(e);t.slots.default=()=>n},Om=(t,e,n)=>{for(const r in e)(n||!xf(r))&&(t[r]=e[r])},cE=(t,e,n)=>{const r=t.slots=Tm();if(t.vnode.shapeFlag&32){const i=e._;i?(Om(r,e,n),n&&Lg(r,"_",i,!0)):Sm(e,r)}else e&&Rm(t,e)},fE=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=rt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:Om(i,e,n):(s=!e.$stable,Sm(e,i)),o=e}else e&&(Rm(t,e),o={default:1});if(s)for(const a in i)!xf(a)&&o[a]==null&&delete i[a]},_n=mE;function hE(t){return dE(t)}function dE(t,e){const n=du();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:p=pr,insertStaticContent:T}=t,_=(q,K,ee,ue=null,he=null,ce=null,te=void 0,J=null,re=!!K.dynamicChildren)=>{if(q===K)return;q&&!us(q,K)&&(ue=V(q),j(q,he,ce,!0),q=null),K.patchFlag===-2&&(re=!1,K.dynamicChildren=null);const{type:ie,ref:le,shapeFlag:ge}=K;switch(ie){case bu:v(q,K,ee,ue);break;case an:b(q,K,ee,ue);break;case ic:q==null&&E(K,ee,ue,te);break;case bn:I(q,K,ee,ue,he,ce,te,J,re);break;default:ge&1?w(q,K,ee,ue,he,ce,te,J,re):ge&6?S(q,K,ee,ue,he,ce,te,J,re):(ge&64||ge&128)&&ie.process(q,K,ee,ue,he,ce,te,J,re,se)}le!=null&&he?ca(le,q&&q.ref,ce,K||q,!K):le==null&&q&&q.ref!=null&&ca(q.ref,null,ce,q,!0)},v=(q,K,ee,ue)=>{if(q==null)r(K.el=a(K.children),ee,ue);else{const he=K.el=q.el;K.children!==q.children&&u(he,K.children)}},b=(q,K,ee,ue)=>{q==null?r(K.el=l(K.children||""),ee,ue):K.el=q.el},E=(q,K,ee,ue)=>{[q.el,q.anchor]=T(q.children,K,ee,ue,q.el,q.anchor)},m=({el:q,anchor:K},ee,ue)=>{let he;for(;q&&q!==K;)he=d(q),r(q,ee,ue),q=he;r(K,ee,ue)},g=({el:q,anchor:K})=>{let ee;for(;q&&q!==K;)ee=d(q),i(q),q=ee;i(K)},w=(q,K,ee,ue,he,ce,te,J,re)=>{if(K.type==="svg"?te="svg":K.type==="math"&&(te="mathml"),q==null)x(K,ee,ue,he,ce,te,J,re);else{const ie=q.el&&q.el._isVueCE?q.el:null;try{ie&&ie._beginPatch(),P(q,K,he,ce,te,J,re)}finally{ie&&ie._endPatch()}}},x=(q,K,ee,ue,he,ce,te,J)=>{let re,ie;const{props:le,shapeFlag:ge,transition:_e,dirs:be}=q;if(re=q.el=o(q.type,ce,le&&le.is,le),ge&8?c(re,q.children):ge&16&&A(q.children,re,null,ue,he,rc(q,ce),te,J),be&&rs(q,null,ue,"created"),R(re,q,q.scopeId,te,ue),le){for(const Ne in le)Ne!=="value"&&!aa(Ne)&&s(re,Ne,null,le[Ne],ce,ue);"value"in le&&s(re,"value",null,le.value,ce),(ie=le.onVnodeBeforeMount)&&lr(ie,ue,q)}be&&rs(q,null,ue,"beforeMount");const Se=pE(he,_e);Se&&_e.beforeEnter(re),r(re,K,ee),((ie=le&&le.onVnodeMounted)||Se||be)&&_n(()=>{ie&&lr(ie,ue,q),Se&&_e.enter(re),be&&rs(q,null,ue,"mounted")},he)},R=(q,K,ee,ue,he)=>{if(ee&&p(q,ee),ue)for(let ce=0;ce<ue.length;ce++)p(q,ue[ce]);if(he){let ce=he.subTree;if(K===ce||km(ce.type)&&(ce.ssContent===K||ce.ssFallback===K)){const te=he.vnode;R(q,te,te.scopeId,te.slotScopeIds,he.parent)}}},A=(q,K,ee,ue,he,ce,te,J,re=0)=>{for(let ie=re;ie<q.length;ie++){const le=q[ie]=J?Ei(q[ie]):fr(q[ie]);_(null,le,K,ee,ue,he,ce,te,J)}},P=(q,K,ee,ue,he,ce,te)=>{const J=K.el=q.el;let{patchFlag:re,dynamicChildren:ie,dirs:le}=K;re|=q.patchFlag&16;const ge=q.props||rt,_e=K.props||rt;let be;if(ee&&is(ee,!1),(be=_e.onVnodeBeforeUpdate)&&lr(be,ee,K,q),le&&rs(K,q,ee,"beforeUpdate"),ee&&is(ee,!0),(ge.innerHTML&&_e.innerHTML==null||ge.textContent&&_e.textContent==null)&&c(J,""),ie?O(q.dynamicChildren,ie,J,ee,ue,rc(K,he),ce):te||ae(q,K,J,null,ee,ue,rc(K,he),ce,!1),re>0){if(re&16)y(J,ge,_e,ee,he);else if(re&2&&ge.class!==_e.class&&s(J,"class",null,_e.class,he),re&4&&s(J,"style",ge.style,_e.style,he),re&8){const Se=K.dynamicProps;for(let Ne=0;Ne<Se.length;Ne++){const we=Se[Ne],ut=ge[we],Oe=_e[we];(Oe!==ut||we==="value")&&s(J,we,ut,Oe,he,ee)}}re&1&&q.children!==K.children&&c(J,K.children)}else!te&&ie==null&&y(J,ge,_e,ee,he);((be=_e.onVnodeUpdated)||le)&&_n(()=>{be&&lr(be,ee,K,q),le&&rs(K,q,ee,"updated")},ue)},O=(q,K,ee,ue,he,ce,te)=>{for(let J=0;J<K.length;J++){const re=q[J],ie=K[J],le=re.el&&(re.type===bn||!us(re,ie)||re.shapeFlag&198)?h(re.el):ee;_(re,ie,le,null,ue,he,ce,te,!0)}},y=(q,K,ee,ue,he)=>{if(K!==ee){if(K!==rt)for(const ce in K)!aa(ce)&&!(ce in ee)&&s(q,ce,K[ce],null,he,ue);for(const ce in ee){if(aa(ce))continue;const te=ee[ce],J=K[ce];te!==J&&ce!=="value"&&s(q,ce,J,te,he,ue)}"value"in ee&&s(q,"value",K.value,ee.value,he)}},I=(q,K,ee,ue,he,ce,te,J,re)=>{const ie=K.el=q?q.el:a(""),le=K.anchor=q?q.anchor:a("");let{patchFlag:ge,dynamicChildren:_e,slotScopeIds:be}=K;be&&(J=J?J.concat(be):be),q==null?(r(ie,ee,ue),r(le,ee,ue),A(K.children||[],ee,le,he,ce,te,J,re)):ge>0&&ge&64&&_e&&q.dynamicChildren?(O(q.dynamicChildren,_e,ee,he,ce,te,J),(K.key!=null||he&&K===he.subTree)&&Pm(q,K,!0)):ae(q,K,ee,le,he,ce,te,J,re)},S=(q,K,ee,ue,he,ce,te,J,re)=>{K.slotScopeIds=J,q==null?K.shapeFlag&512?he.ctx.activate(K,ee,ue,te,re):D(K,ee,ue,he,ce,te,re):B(q,K,re)},D=(q,K,ee,ue,he,ce,te)=>{const J=q.component=wE(q,ue,he);if(yu(q)&&(J.ctx.renderer=se),AE(J,!1,te),J.asyncDep){if(he&&he.registerDep(J,$,te),!q.el){const re=J.subTree=it(an);b(null,re,K,ee),q.placeholder=re.el}}else $(J,q,K,ee,he,ce,te)},B=(q,K,ee)=>{const ue=K.component=q.component;if(iE(q,K,ee))if(ue.asyncDep&&!ue.asyncResolved){W(ue,K,ee);return}else ue.next=K,ue.update();else K.el=q.el,ue.vnode=K},$=(q,K,ee,ue,he,ce,te)=>{const J=()=>{if(q.isMounted){let{next:ge,bu:_e,u:be,parent:Se,vnode:Ne}=q;{const Nt=Cm(q);if(Nt){ge&&(ge.el=Ne.el,W(q,ge,te)),Nt.asyncDep.then(()=>{q.isUnmounted||J()});return}}let we=ge,ut;is(q,!1),ge?(ge.el=Ne.el,W(q,ge,te)):ge=Ne,_e&&pl(_e),(ut=ge.props&&ge.props.onVnodeBeforeUpdate)&&lr(ut,Se,ge,Ne),is(q,!0);const Oe=ed(q),tt=q.subTree;q.subTree=Oe,_(tt,Oe,h(tt.el),V(tt),q,he,ce),ge.el=Oe.el,we===null&&sE(q,Oe.el),be&&_n(be,he),(ut=ge.props&&ge.props.onVnodeUpdated)&&_n(()=>lr(ut,Se,ge,Ne),he)}else{let ge;const{el:_e,props:be}=K,{bm:Se,m:Ne,parent:we,root:ut,type:Oe}=q,tt=fa(K);is(q,!1),Se&&pl(Se),!tt&&(ge=be&&be.onVnodeBeforeMount)&&lr(ge,we,K),is(q,!0);{ut.ce&&ut.ce._def.shadowRoot!==!1&&ut.ce._injectChildStyle(Oe);const Nt=q.subTree=ed(q);_(null,Nt,ee,ue,q,he,ce),K.el=Nt.el}if(Ne&&_n(Ne,he),!tt&&(ge=be&&be.onVnodeMounted)){const Nt=K;_n(()=>lr(ge,we,Nt),he)}(K.shapeFlag&256||we&&fa(we.vnode)&&we.vnode.shapeFlag&256)&&q.a&&_n(q.a,he),q.isMounted=!0,K=ee=ue=null}};q.scope.on();const re=q.effect=new Fg(J);q.scope.off();const ie=q.update=re.run.bind(re),le=q.job=re.runIfDirty.bind(re);le.i=q,le.id=q.uid,re.scheduler=()=>Pf(le),is(q,!0),ie()},W=(q,K,ee)=>{K.component=q;const ue=q.vnode.props;q.vnode=K,q.next=null,aE(q,K.props,ue,ee),fE(q,K.children,ee),Qr(),$h(q),Yr()},ae=(q,K,ee,ue,he,ce,te,J,re=!1)=>{const ie=q&&q.children,le=q?q.shapeFlag:0,ge=K.children,{patchFlag:_e,shapeFlag:be}=K;if(_e>0){if(_e&128){H(ie,ge,ee,ue,he,ce,te,J,re);return}else if(_e&256){Z(ie,ge,ee,ue,he,ce,te,J,re);return}}be&8?(le&16&&F(ie,he,ce),ge!==ie&&c(ee,ge)):le&16?be&16?H(ie,ge,ee,ue,he,ce,te,J,re):F(ie,he,ce,!0):(le&8&&c(ee,""),be&16&&A(ge,ee,ue,he,ce,te,J,re))},Z=(q,K,ee,ue,he,ce,te,J,re)=>{q=q||fo,K=K||fo;const ie=q.length,le=K.length,ge=Math.min(ie,le);let _e;for(_e=0;_e<ge;_e++){const be=K[_e]=re?Ei(K[_e]):fr(K[_e]);_(q[_e],be,ee,null,he,ce,te,J,re)}ie>le?F(q,he,ce,!0,!1,ge):A(K,ee,ue,he,ce,te,J,re,ge)},H=(q,K,ee,ue,he,ce,te,J,re)=>{let ie=0;const le=K.length;let ge=q.length-1,_e=le-1;for(;ie<=ge&&ie<=_e;){const be=q[ie],Se=K[ie]=re?Ei(K[ie]):fr(K[ie]);if(us(be,Se))_(be,Se,ee,null,he,ce,te,J,re);else break;ie++}for(;ie<=ge&&ie<=_e;){const be=q[ge],Se=K[_e]=re?Ei(K[_e]):fr(K[_e]);if(us(be,Se))_(be,Se,ee,null,he,ce,te,J,re);else break;ge--,_e--}if(ie>ge){if(ie<=_e){const be=_e+1,Se=be<le?K[be].el:ue;for(;ie<=_e;)_(null,K[ie]=re?Ei(K[ie]):fr(K[ie]),ee,Se,he,ce,te,J,re),ie++}}else if(ie>_e)for(;ie<=ge;)j(q[ie],he,ce,!0),ie++;else{const be=ie,Se=ie,Ne=new Map;for(ie=Se;ie<=_e;ie++){const ct=K[ie]=re?Ei(K[ie]):fr(K[ie]);ct.key!=null&&Ne.set(ct.key,ie)}let we,ut=0;const Oe=_e-Se+1;let tt=!1,Nt=0;const Zt=new Array(Oe);for(ie=0;ie<Oe;ie++)Zt[ie]=0;for(ie=be;ie<=ge;ie++){const ct=q[ie];if(ut>=Oe){j(ct,he,ce,!0);continue}let ft;if(ct.key!=null)ft=Ne.get(ct.key);else for(we=Se;we<=_e;we++)if(Zt[we-Se]===0&&us(ct,K[we])){ft=we;break}ft===void 0?j(ct,he,ce,!0):(Zt[ft-Se]=ie+1,ft>=Nt?Nt=ft:tt=!0,_(ct,K[ft],ee,null,he,ce,te,J,re),ut++)}const In=tt?gE(Zt):fo;for(we=In.length-1,ie=Oe-1;ie>=0;ie--){const ct=Se+ie,ft=K[ct],Sn=K[ct+1],en=ct+1<le?Sn.el||Sn.placeholder:ue;Zt[ie]===0?_(null,ft,ee,en,he,ce,te,J,re):tt&&(we<0||ie!==In[we]?L(ft,ee,en,2):we--)}}},L=(q,K,ee,ue,he=null)=>{const{el:ce,type:te,transition:J,children:re,shapeFlag:ie}=q;if(ie&6){L(q.component.subTree,K,ee,ue);return}if(ie&128){q.suspense.move(K,ee,ue);return}if(ie&64){te.move(q,K,ee,se);return}if(te===bn){r(ce,K,ee);for(let ge=0;ge<re.length;ge++)L(re[ge],K,ee,ue);r(q.anchor,K,ee);return}if(te===ic){m(q,K,ee);return}if(ue!==2&&ie&1&&J)if(ue===0)J.beforeEnter(ce),r(ce,K,ee),_n(()=>J.enter(ce),he);else{const{leave:ge,delayLeave:_e,afterLeave:be}=J,Se=()=>{q.ctx.isUnmounted?i(ce):r(ce,K,ee)},Ne=()=>{ce._isLeaving&&ce[Br](!0),ge(ce,()=>{Se(),be&&be()})};_e?_e(ce,Se,Ne):Ne()}else r(ce,K,ee)},j=(q,K,ee,ue=!1,he=!1)=>{const{type:ce,props:te,ref:J,children:re,dynamicChildren:ie,shapeFlag:le,patchFlag:ge,dirs:_e,cacheIndex:be}=q;if(ge===-2&&(he=!1),J!=null&&(Qr(),ca(J,null,ee,q,!0),Yr()),be!=null&&(K.renderCache[be]=void 0),le&256){K.ctx.deactivate(q);return}const Se=le&1&&_e,Ne=!fa(q);let we;if(Ne&&(we=te&&te.onVnodeBeforeUnmount)&&lr(we,K,q),le&6)G(q.component,ee,ue);else{if(le&128){q.suspense.unmount(ee,ue);return}Se&&rs(q,null,K,"beforeUnmount"),le&64?q.type.remove(q,K,ee,se,ue):ie&&!ie.hasOnce&&(ce!==bn||ge>0&&ge&64)?F(ie,K,ee,!1,!0):(ce===bn&&ge&384||!he&&le&16)&&F(re,K,ee),ue&&z(q)}(Ne&&(we=te&&te.onVnodeUnmounted)||Se)&&_n(()=>{we&&lr(we,K,q),Se&&rs(q,null,K,"unmounted")},ee)},z=q=>{const{type:K,el:ee,anchor:ue,transition:he}=q;if(K===bn){ne(ee,ue);return}if(K===ic){g(q);return}const ce=()=>{i(ee),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(q.shapeFlag&1&&he&&!he.persisted){const{leave:te,delayLeave:J}=he,re=()=>te(ee,ce);J?J(q.el,ce,re):re()}else ce()},ne=(q,K)=>{let ee;for(;q!==K;)ee=d(q),i(q),q=ee;i(K)},G=(q,K,ee)=>{const{bum:ue,scope:he,job:ce,subTree:te,um:J,m:re,a:ie}=q;rd(re),rd(ie),ue&&pl(ue),he.stop(),ce&&(ce.flags|=8,j(te,q,K,ee)),J&&_n(J,K),_n(()=>{q.isUnmounted=!0},K)},F=(q,K,ee,ue=!1,he=!1,ce=0)=>{for(let te=ce;te<q.length;te++)j(q[te],K,ee,ue,he)},V=q=>{if(q.shapeFlag&6)return V(q.component.subTree);if(q.shapeFlag&128)return q.suspense.next();const K=d(q.anchor||q.el),ee=K&&K[Ib];return ee?d(ee):K};let Y=!1;const X=(q,K,ee)=>{q==null?K._vnode&&j(K._vnode,null,null,!0):_(K._vnode||null,q,K,null,null,null,ee),K._vnode=q,Y||(Y=!0,$h(),im(),Y=!1)},se={p:_,um:j,m:L,r:z,mt:D,mc:A,pc:ae,pbc:O,n:V,o:t};return{render:X,hydrate:void 0,createApp:Qb(X)}}function rc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function is({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function pE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Pm(t,e,n=!1){const r=t.children,i=e.children;if(Pe(r)&&Pe(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ei(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Pm(o,a)),a.type===bu&&a.patchFlag!==-1&&(a.el=o.el),a.type===an&&!a.el&&(a.el=o.el)}}function gE(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function Cm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Cm(e)}function rd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const km=t=>t.__isSuspense;function mE(t,e){e&&e.pendingBranch?Pe(t)?e.effects.push(...t):e.effects.push(t):Ab(t)}const bn=Symbol.for("v-fgt"),bu=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),ic=Symbol.for("v-stc"),da=[];let wn=null;function Ve(t=!1){da.push(wn=t?null:[])}function yE(){da.pop(),wn=da[da.length-1]||null}let Ra=1;function Dl(t,e=!1){Ra+=t,t<0&&wn&&e&&(wn.hasOnce=!0)}function Nm(t){return t.dynamicChildren=Ra>0?wn||fo:null,yE(),Ra>0&&wn&&wn.push(t),t}function Be(t,e,n,r,i,s){return Nm(pe(t,e,n,r,i,s,!0))}function uo(t,e,n,r,i){return Nm(it(t,e,n,r,i,!0))}function Ll(t){return t?t.__v_isVNode===!0:!1}function us(t,e){return t.type===e.type&&t.key===e.key}const xm=({key:t})=>t??null,ml=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?bt(t)||Xt(t)||Le(t)?{i:Tn,r:t,k:e,f:!!n}:t:null);function pe(t,e=null,n=null,r=0,i=null,s=t===bn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&xm(e),ref:e&&ml(e),scopeId:om,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Tn};return a?(Lf(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=bt(n)?8:16),Ra>0&&!o&&wn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&wn.push(l),l}const it=vE;function vE(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===jb)&&(t=an),Ll(t)){const a=Di(t,e,!0);return n&&Lf(a,n),Ra>0&&!s&&wn&&(a.shapeFlag&6?wn[wn.indexOf(t)]=a:wn.push(a)),a.patchFlag=-2,a}if(PE(t)&&(t=t.__vccOpts),e){e=_E(e);let{class:a,style:l}=e;a&&!bt(a)&&(e.class=po(a)),et(l)&&(Of(l)&&!Pe(l)&&(l=Vt({},l)),e.style=Ef(l))}const o=bt(t)?1:km(t)?128:am(t)?64:et(t)?4:Le(t)?2:0;return pe(t,e,n,r,i,o,s,!0)}function _E(t){return t?Of(t)||wm(t)?Vt({},t):t:null}function Di(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,u=e?bE(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&xm(u),ref:e&&e.ref?n&&s?Pe(s)?s.concat(ml(e)):[s,ml(e)]:ml(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==bn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Di(t.ssContent),ssFallback:t.ssFallback&&Di(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Sa(c,l.clone(c)),c}function xn(t=" ",e=0){return it(bu,null,t,e)}function _t(t="",e=!1){return e?(Ve(),uo(an,null,t)):it(an,null,t)}function fr(t){return t==null||typeof t=="boolean"?it(an):Pe(t)?it(bn,null,t.slice()):Ll(t)?Ei(t):it(bu,null,String(t))}function Ei(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Di(t)}function Lf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Pe(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Lf(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!wm(e)?e._ctx=Tn:i===3&&Tn&&(Tn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Le(e)?(e={default:e,_ctx:Tn},n=32):(e=String(e),r&64?(n=16,e=[xn(e)]):n=8);t.children=e,t.shapeFlag|=n}function bE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=po([e.class,r.class]));else if(i==="style")e.style=Ef([e.style,r.style]);else if(lu(i)){const s=e[i],o=r[i];o&&s!==o&&!(Pe(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function lr(t,e,n,r=null){Jn(t,e,7,[n,r])}const EE=ym();let TE=0;function wE(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||EE,s={uid:TE++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new W_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Im(r,i),emitsOptions:bm(r,i),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:r.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=eE.bind(null,s),t.ce&&t.ce(s),s}let Qt=null;const Dm=()=>Qt||Tn;let Ml,Vc;{const t=du(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Ml=e("__VUE_INSTANCE_SETTERS__",n=>Qt=n),Vc=e("__VUE_SSR_SETTERS__",n=>Oa=n)}const qa=t=>{const e=Qt;return Ml(t),t.scope.on(),()=>{t.scope.off(),Ml(e)}},id=()=>{Qt&&Qt.scope.off(),Ml(null)};function Lm(t){return t.vnode.shapeFlag&4}let Oa=!1;function AE(t,e=!1,n=!1){e&&Vc(e);const{props:r,children:i}=t.vnode,s=Lm(t);oE(t,r,s,e),cE(t,i,n||e);const o=s?IE(t,e):void 0;return e&&Vc(!1),o}function IE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qb);const{setup:r}=n;if(r){Qr();const i=t.setupContext=r.length>1?RE(t):null,s=qa(t),o=ja(r,t,0,[t.props,i]),a=Ng(o);if(Yr(),s(),(a||t.sp)&&!fa(t)&&dm(t),a){if(o.then(id,id),e)return o.then(l=>{sd(t,l)}).catch(l=>{mu(l,t,0)});t.asyncDep=o}else sd(t,o)}else Mm(t)}function sd(t,e,n){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:et(e)&&(t.setupState=tm(e)),Mm(t)}function Mm(t,e,n){const r=t.type;t.render||(t.render=r.render||pr);{const i=qa(t);Qr();try{Hb(t)}finally{Yr(),i()}}}const SE={get(t,e){return Gt(t,"get",""),t[e]}};function RE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,SE),slots:t.slots,emit:t.emit,expose:e}}function Eu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(tm(pb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ha)return ha[n](t)},has(e,n){return n in e||n in ha}})):t.proxy}function OE(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function PE(t){return Le(t)&&"__vccOpts"in t}const Yt=(t,e)=>_b(t,e,Oa);function Tu(t,e,n){try{Dl(-1);const r=arguments.length;return r===2?et(e)&&!Pe(e)?Ll(e)?it(t,null,[e]):it(t,e):it(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ll(n)&&(n=[n]),it(t,e,n))}finally{Dl(1)}}const CE="3.5.25";let Uc;const od=typeof window<"u"&&window.trustedTypes;if(od)try{Uc=od.createPolicy("vue",{createHTML:t=>t})}catch{}const Vm=Uc?t=>Uc.createHTML(t):t=>t,kE="http://www.w3.org/2000/svg",NE="http://www.w3.org/1998/Math/MathML",jr=typeof document<"u"?document:null,ad=jr&&jr.createElement("template"),xE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?jr.createElementNS(kE,t):e==="mathml"?jr.createElementNS(NE,t):n?jr.createElement(t,{is:n}):jr.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>jr.createTextNode(t),createComment:t=>jr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>jr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{ad.innerHTML=Vm(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=ad.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},mi="transition",Wo="animation",Pa=Symbol("_vtc"),Um={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},DE=Vt({},lm,Um),LE=t=>(t.displayName="Transition",t.props=DE,t),Fm=LE((t,{slots:e})=>Tu(Ob,ME(t),e)),ss=(t,e=[])=>{Pe(t)?t.forEach(n=>n(...e)):t&&t(...e)},ld=t=>t?Pe(t)?t.some(e=>e.length>1):t.length>1:!1;function ME(t){const e={};for(const I in t)I in Um||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,T=VE(i),_=T&&T[0],v=T&&T[1],{onBeforeEnter:b,onEnter:E,onEnterCancelled:m,onLeave:g,onLeaveCancelled:w,onBeforeAppear:x=b,onAppear:R=E,onAppearCancelled:A=m}=e,P=(I,S,D,B)=>{I._enterCancelled=B,os(I,S?c:a),os(I,S?u:o),D&&D()},O=(I,S)=>{I._isLeaving=!1,os(I,h),os(I,p),os(I,d),S&&S()},y=I=>(S,D)=>{const B=I?R:E,$=()=>P(S,I,D);ss(B,[S,$]),ud(()=>{os(S,I?l:s),Ur(S,I?c:a),ld(B)||cd(S,r,_,$)})};return Vt(e,{onBeforeEnter(I){ss(b,[I]),Ur(I,s),Ur(I,o)},onBeforeAppear(I){ss(x,[I]),Ur(I,l),Ur(I,u)},onEnter:y(!1),onAppear:y(!0),onLeave(I,S){I._isLeaving=!0;const D=()=>O(I,S);Ur(I,h),I._enterCancelled?(Ur(I,d),dd(I)):(dd(I),Ur(I,d)),ud(()=>{I._isLeaving&&(os(I,h),Ur(I,p),ld(g)||cd(I,r,v,D))}),ss(g,[I,D])},onEnterCancelled(I){P(I,!1,void 0,!0),ss(m,[I])},onAppearCancelled(I){P(I,!0,void 0,!0),ss(A,[I])},onLeaveCancelled(I){O(I),ss(w,[I])}})}function VE(t){if(t==null)return null;if(et(t))return[sc(t.enter),sc(t.leave)];{const e=sc(t);return[e,e]}}function sc(t){return F_(t)}function Ur(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Pa]||(t[Pa]=new Set)).add(e)}function os(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Pa];n&&(n.delete(e),n.size||(t[Pa]=void 0))}function ud(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let UE=0;function cd(t,e,n,r){const i=t._endId=++UE,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=FE(t,e);if(!o)return r();const u=o+"end";let c=0;const h=()=>{t.removeEventListener(u,d),s()},d=p=>{p.target===t&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},a+1),t.addEventListener(u,d)}function FE(t,e){const n=window.getComputedStyle(t),r=T=>(n[T]||"").split(", "),i=r(`${mi}Delay`),s=r(`${mi}Duration`),o=fd(i,s),a=r(`${Wo}Delay`),l=r(`${Wo}Duration`),u=fd(a,l);let c=null,h=0,d=0;e===mi?o>0&&(c=mi,h=o,d=s.length):e===Wo?u>0&&(c=Wo,h=u,d=l.length):(h=Math.max(o,u),c=h>0?o>u?mi:Wo:null,d=c?c===mi?s.length:l.length:0);const p=c===mi&&/\b(?:transform|all)(?:,|$)/.test(r(`${mi}Property`).toString());return{type:c,timeout:h,propCount:d,hasTransform:p}}function fd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>hd(n)+hd(t[r])))}function hd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function dd(t){return(t?t.ownerDocument:document).body.offsetHeight}function jE(t,e,n){const r=t[Pa];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Vl=Symbol("_vod"),jm=Symbol("_vsh"),BE={name:"show",beforeMount(t,{value:e},{transition:n}){t[Vl]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qo(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qo(t,!0),r.enter(t)):r.leave(t,()=>{Qo(t,!1)}):Qo(t,e))},beforeUnmount(t,{value:e}){Qo(t,e)}};function Qo(t,e){t.style.display=e?t[Vl]:"none",t[jm]=!e}const qE=Symbol(""),HE=/(?:^|;)\s*display\s*:/;function zE(t,e,n){const r=t.style,i=bt(n);let s=!1;if(n&&!i){if(e)if(bt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&yl(r,a,"")}else for(const o in e)n[o]==null&&yl(r,o,"");for(const o in n)o==="display"&&(s=!0),yl(r,o,n[o])}else if(i){if(e!==n){const o=r[qE];o&&(n+=";"+o),r.cssText=n,s=HE.test(n)}}else e&&t.removeAttribute("style");Vl in t&&(t[Vl]=s?r.display:"",t[jm]&&(r.display="none"))}const pd=/\s*!important$/;function yl(t,e,n){if(Pe(n))n.forEach(r=>yl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=KE(t,e);pd.test(n)?t.setProperty(As(r),n.replace(pd,""),"important"):t[r]=n}}const gd=["Webkit","Moz","ms"],oc={};function KE(t,e){const n=oc[e];if(n)return n;let r=Un(e);if(r!=="filter"&&r in t)return oc[e]=r;r=fu(r);for(let i=0;i<gd.length;i++){const s=gd[i]+r;if(s in t)return oc[e]=s}return e}const md="http://www.w3.org/1999/xlink";function yd(t,e,n,r,i,s=K_(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(md,e.slice(6,e.length)):t.setAttributeNS(md,e,n):n==null||s&&!Mg(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Tr(n)?String(n):n)}function vd(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Vm(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Mg(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function cs(t,e,n,r){t.addEventListener(e,n,r)}function $E(t,e,n,r){t.removeEventListener(e,n,r)}const _d=Symbol("_vei");function GE(t,e,n,r,i=null){const s=t[_d]||(t[_d]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=WE(e);if(r){const u=s[e]=XE(r,i);cs(t,a,u,l)}else o&&($E(t,a,o,l),s[e]=void 0)}}const bd=/(?:Once|Passive|Capture)$/;function WE(t){let e;if(bd.test(t)){e={};let r;for(;r=t.match(bd);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):As(t.slice(2)),e]}let ac=0;const QE=Promise.resolve(),YE=()=>ac||(QE.then(()=>ac=0),ac=Date.now());function XE(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Jn(JE(r,n.value),e,5,[r])};return n.value=t,n.attached=YE(),n}function JE(t,e){if(Pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Ed=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ZE=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?jE(t,r,o):e==="style"?zE(t,n,r):lu(e)?vf(e)||GE(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):e0(t,e,r,o))?(vd(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&yd(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!bt(r))?vd(t,Un(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),yd(t,e,r,o))};function e0(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ed(e)&&Le(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ed(e)&&bt(n)?!1:e in t}const Ul=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Pe(e)?n=>pl(e,n):e};function t0(t){t.target.composing=!0}function Td(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const yo=Symbol("_assign");function wd(t,e,n){return e&&(t=t.trim()),n&&(t=hu(t)),t}const hr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[yo]=Ul(i);const s=r||i.props&&i.props.type==="number";cs(t,e?"change":"input",o=>{o.target.composing||t[yo](wd(t.value,n,s))}),(n||s)&&cs(t,"change",()=>{t.value=wd(t.value,n,s)}),e||(cs(t,"compositionstart",t0),cs(t,"compositionend",Td),cs(t,"change",Td))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[yo]=Ul(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?hu(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},n0={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=uu(e);cs(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?hu(Fl(o)):Fl(o));t[yo](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,Aa(()=>{t._assigning=!1})}),t[yo]=Ul(r)},mounted(t,{value:e}){Ad(t,e)},beforeUpdate(t,e,n){t[yo]=Ul(n)},updated(t,{value:e}){t._assigning||Ad(t,e)}};function Ad(t,e){const n=t.multiple,r=Pe(e);if(!(n&&!r&&!uu(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Fl(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=G_(e,a)>-1}else o.selected=e.has(a);else if(pu(Fl(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Fl(t){return"_value"in t?t._value:t.value}const r0=["ctrl","shift","alt","meta"],i0={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>r0.some(n=>t[`${n}Key`]&&!e.includes(n))},Bm=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=i0[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},s0=Vt({patchProp:ZE},xE);let Id;function o0(){return Id||(Id=hE(s0))}const a0=((...t)=>{const e=o0().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=u0(r);if(!i)return;const s=e._component;!Le(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,l0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function l0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function u0(t){return bt(t)?document.querySelector(t):t}const c0=()=>{};var Sd={};const qm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},f0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Hm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(d=64)),r.push(n[c],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new h0;const d=s<<2|a>>4;if(r.push(d),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const T=u<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d0=function(t){const e=qm(t);return Hm.encodeByteArray(e,!0)},jl=function(t){return d0(t).replace(/\./g,"")},zm=function(t){try{return Hm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function p0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const g0=()=>p0().__FIREBASE_DEFAULTS__,m0=()=>{if(typeof process>"u"||typeof Sd>"u")return;const t=Sd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zm(t[1]);return e&&JSON.parse(e)},wu=()=>{try{return c0()||g0()||m0()||y0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Km=t=>wu()?.emulatorHosts?.[t],$m=t=>{const e=Km(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gm=()=>wu()?.config,Wm=t=>wu()?.[`_${t}`];class v0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Ss(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mf(t){return(await fetch(t,{credentials:"include"})).ok}function Qm(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jl(JSON.stringify(n)),jl(JSON.stringify(o)),""].join(".")}const pa={};function _0(){const t={prod:[],emulator:[]};for(const e of Object.keys(pa))pa[e]?t.emulator.push(e):t.prod.push(e);return t}function b0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rd=!1;function Vf(t,e){if(typeof window>"u"||typeof document>"u"||!Ss(window.location.host)||pa[t]===e||pa[t]||Rd)return;pa[t]=e;function n(d){return`__firebase__banner__${d}`}const r="__firebase__banner",s=_0().prod.length>0;function o(){const d=document.getElementById(r);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Rd=!0,o()},d}function c(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=b0(r),p=n("text"),T=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),v=document.getElementById(_)||document.createElement("a"),b=n("preprendIcon"),E=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const m=d.element;a(m),c(v,_);const g=u();l(E,b),m.append(E,T,v,g),document.body.appendChild(m)}s?(T.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function T0(){const t=wu()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function A0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S0(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function R0(){return!T0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O0(){try{return typeof indexedDB=="object"}catch{return!1}}function P0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const C0="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C0,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ha.prototype.create)}}class Ha{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?k0(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sr(i,a,r)}}function k0(t,e){return t.replace(N0,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const N0=/\{\$([^}]+)}/g;function x0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Od(s)&&Od(o)){if(!vs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Od(t){return t!==null&&typeof t=="object"}function za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ea(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function D0(t,e){const n=new L0(t,e);return n.subscribe.bind(n)}class L0{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M0(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=lc),i.error===void 0&&(i.error=lc),i.complete===void 0&&(i.complete=lc);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M0(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lc(){}function It(t){return t&&t._delegate?t._delegate:t}class Li{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ls="[DEFAULT]";class V0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new v0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F0(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U0(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U0(t){return t===ls?void 0:t}function F0(t){return t.instantiationMode==="EAGER"}class j0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new V0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const B0={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},q0=qe.INFO,H0={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},z0=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=H0[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uf{constructor(e){this.name=e,this._logLevel=q0,this._logHandler=z0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const K0=(t,e)=>e.some(n=>t instanceof n);let Pd,Cd;function $0(){return Pd||(Pd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G0(){return Cd||(Cd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ym=new WeakMap,Fc=new WeakMap,Xm=new WeakMap,uc=new WeakMap,Ff=new WeakMap;function W0(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ci(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ym.set(n,t)}).catch(()=>{}),Ff.set(e,t),e}function Q0(t){if(Fc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fc.set(t,e)}let jc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Y0(t){jc=t(jc)}function X0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cc(this),e,...n);return Xm.set(r,e.sort?e.sort():[e]),Ci(r)}:G0().includes(t)?function(...e){return t.apply(cc(this),e),Ci(Ym.get(this))}:function(...e){return Ci(t.apply(cc(this),e))}}function J0(t){return typeof t=="function"?X0(t):(t instanceof IDBTransaction&&Q0(t),K0(t,$0())?new Proxy(t,jc):t)}function Ci(t){if(t instanceof IDBRequest)return W0(t);if(uc.has(t))return uc.get(t);const e=J0(t);return e!==t&&(uc.set(t,e),Ff.set(e,t)),e}const cc=t=>Ff.get(t);function Z0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ci(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ci(o.result),l.oldVersion,l.newVersion,Ci(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const e1=["get","getKey","getAll","getAllKeys","count"],t1=["put","add","delete","clear"],fc=new Map;function kd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fc.get(e))return fc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=t1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e1.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return fc.set(e,s),s}Y0(t=>({...t,get:(e,n,r)=>kd(e,n)||t.get(e,n,r),has:(e,n)=>!!kd(e,n)||t.has(e,n)}));class n1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r1(t){return t.getComponent()?.type==="VERSION"}const Bc="@firebase/app",Nd="0.14.6";const Jr=new Uf("@firebase/app"),i1="@firebase/app-compat",s1="@firebase/analytics-compat",o1="@firebase/analytics",a1="@firebase/app-check-compat",l1="@firebase/app-check",u1="@firebase/auth",c1="@firebase/auth-compat",f1="@firebase/database",h1="@firebase/data-connect",d1="@firebase/database-compat",p1="@firebase/functions",g1="@firebase/functions-compat",m1="@firebase/installations",y1="@firebase/installations-compat",v1="@firebase/messaging",_1="@firebase/messaging-compat",b1="@firebase/performance",E1="@firebase/performance-compat",T1="@firebase/remote-config",w1="@firebase/remote-config-compat",A1="@firebase/storage",I1="@firebase/storage-compat",S1="@firebase/firestore",R1="@firebase/ai",O1="@firebase/firestore-compat",P1="firebase",C1="12.6.0";const qc="[DEFAULT]",k1={[Bc]:"fire-core",[i1]:"fire-core-compat",[o1]:"fire-analytics",[s1]:"fire-analytics-compat",[l1]:"fire-app-check",[a1]:"fire-app-check-compat",[u1]:"fire-auth",[c1]:"fire-auth-compat",[f1]:"fire-rtdb",[h1]:"fire-data-connect",[d1]:"fire-rtdb-compat",[p1]:"fire-fn",[g1]:"fire-fn-compat",[m1]:"fire-iid",[y1]:"fire-iid-compat",[v1]:"fire-fcm",[_1]:"fire-fcm-compat",[b1]:"fire-perf",[E1]:"fire-perf-compat",[T1]:"fire-rc",[w1]:"fire-rc-compat",[A1]:"fire-gcs",[I1]:"fire-gcs-compat",[S1]:"fire-fst",[O1]:"fire-fst-compat",[R1]:"fire-vertex","fire-js":"fire-js",[P1]:"fire-js-all"};const Ao=new Map,Hc=new Map,zc=new Map;function xd(t,e){try{t.container.addComponent(e)}catch(n){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _s(t){const e=t.name;if(zc.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;zc.set(e,t);for(const n of Ao.values())xd(n,t);for(const n of Hc.values())xd(n,t);return!0}function Au(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}const N1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new Ha("app","Firebase",N1);class x1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}const Rs=C1;function jf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qc,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ki.create("bad-app-name",{appName:String(i)});if(n||(n=Gm()),!n)throw ki.create("no-options");const s=Ao.get(i);if(s){if(vs(n,s.options)&&vs(r,s.config))return s;throw ki.create("duplicate-app",{appName:i})}const o=new j0(i);for(const l of zc.values())o.addComponent(l);const a=new x1(n,r,o);return Ao.set(i,a),a}function Bf(t=qc){const e=Ao.get(t);if(!e&&t===qc&&Gm())return jf();if(!e)throw ki.create("no-app",{appName:t});return e}async function D1(t){let e=!1;const n=t.name;Ao.has(n)?(e=!0,Ao.delete(n)):Hc.has(n)&&t.decRefCount()<=0&&(Hc.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function gr(t,e,n){let r=k1[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(o.join(" "));return}_s(new Li(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const L1="firebase-heartbeat-database",M1=1,Ca="firebase-heartbeat-store";let hc=null;function Jm(){return hc||(hc=Z0(L1,M1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw ki.create("idb-open",{originalErrorMessage:t.message})})),hc}async function V1(t){try{const n=(await Jm()).transaction(Ca),r=await n.objectStore(Ca).get(Zm(t));return await n.done,r}catch(e){if(e instanceof Sr)Jr.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e?.message});Jr.warn(n.message)}}}async function Dd(t,e){try{const r=(await Jm()).transaction(Ca,"readwrite");await r.objectStore(Ca).put(e,Zm(t)),await r.done}catch(n){if(n instanceof Sr)Jr.warn(n.message);else{const r=ki.create("idb-set",{originalErrorMessage:n?.message});Jr.warn(r.message)}}}function Zm(t){return`${t.name}!${t.options.appId}`}const U1=1024,F1=30;class j1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ld();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>F1){const i=H1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ld(),{heartbeatsToSend:n,unsentEntries:r}=B1(this._heartbeatsCache.heartbeats),i=jl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Jr.warn(e),""}}}function Ld(){return new Date().toISOString().substring(0,10)}function B1(t,e=U1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Md(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Md(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O0()?P0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Md(t){return jl(JSON.stringify({version:2,heartbeats:t})).length}function H1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function z1(t){_s(new Li("platform-logger",e=>new n1(e),"PRIVATE")),_s(new Li("heartbeat",e=>new j1(e),"PRIVATE")),gr(Bc,Nd,t),gr(Bc,Nd,"esm2020"),gr("fire-js","")}z1("");var K1="firebase",$1="12.6.0";gr(K1,$1,"app");var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ni,ey;(function(){var t;function e(R,A){function P(){}P.prototype=A.prototype,R.F=A.prototype,R.prototype=new P,R.prototype.constructor=R,R.D=function(O,y,I){for(var S=Array(arguments.length-2),D=2;D<arguments.length;D++)S[D-2]=arguments[D];return A.prototype[y].apply(O,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,A,P){P||(P=0);const O=Array(16);if(typeof A=="string")for(var y=0;y<16;++y)O[y]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(y=0;y<16;++y)O[y]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=R.g[0],P=R.g[1],y=R.g[2];let I=R.g[3],S;S=A+(I^P&(y^I))+O[0]+3614090360&4294967295,A=P+(S<<7&4294967295|S>>>25),S=I+(y^A&(P^y))+O[1]+3905402710&4294967295,I=A+(S<<12&4294967295|S>>>20),S=y+(P^I&(A^P))+O[2]+606105819&4294967295,y=I+(S<<17&4294967295|S>>>15),S=P+(A^y&(I^A))+O[3]+3250441966&4294967295,P=y+(S<<22&4294967295|S>>>10),S=A+(I^P&(y^I))+O[4]+4118548399&4294967295,A=P+(S<<7&4294967295|S>>>25),S=I+(y^A&(P^y))+O[5]+1200080426&4294967295,I=A+(S<<12&4294967295|S>>>20),S=y+(P^I&(A^P))+O[6]+2821735955&4294967295,y=I+(S<<17&4294967295|S>>>15),S=P+(A^y&(I^A))+O[7]+4249261313&4294967295,P=y+(S<<22&4294967295|S>>>10),S=A+(I^P&(y^I))+O[8]+1770035416&4294967295,A=P+(S<<7&4294967295|S>>>25),S=I+(y^A&(P^y))+O[9]+2336552879&4294967295,I=A+(S<<12&4294967295|S>>>20),S=y+(P^I&(A^P))+O[10]+4294925233&4294967295,y=I+(S<<17&4294967295|S>>>15),S=P+(A^y&(I^A))+O[11]+2304563134&4294967295,P=y+(S<<22&4294967295|S>>>10),S=A+(I^P&(y^I))+O[12]+1804603682&4294967295,A=P+(S<<7&4294967295|S>>>25),S=I+(y^A&(P^y))+O[13]+4254626195&4294967295,I=A+(S<<12&4294967295|S>>>20),S=y+(P^I&(A^P))+O[14]+2792965006&4294967295,y=I+(S<<17&4294967295|S>>>15),S=P+(A^y&(I^A))+O[15]+1236535329&4294967295,P=y+(S<<22&4294967295|S>>>10),S=A+(y^I&(P^y))+O[1]+4129170786&4294967295,A=P+(S<<5&4294967295|S>>>27),S=I+(P^y&(A^P))+O[6]+3225465664&4294967295,I=A+(S<<9&4294967295|S>>>23),S=y+(A^P&(I^A))+O[11]+643717713&4294967295,y=I+(S<<14&4294967295|S>>>18),S=P+(I^A&(y^I))+O[0]+3921069994&4294967295,P=y+(S<<20&4294967295|S>>>12),S=A+(y^I&(P^y))+O[5]+3593408605&4294967295,A=P+(S<<5&4294967295|S>>>27),S=I+(P^y&(A^P))+O[10]+38016083&4294967295,I=A+(S<<9&4294967295|S>>>23),S=y+(A^P&(I^A))+O[15]+3634488961&4294967295,y=I+(S<<14&4294967295|S>>>18),S=P+(I^A&(y^I))+O[4]+3889429448&4294967295,P=y+(S<<20&4294967295|S>>>12),S=A+(y^I&(P^y))+O[9]+568446438&4294967295,A=P+(S<<5&4294967295|S>>>27),S=I+(P^y&(A^P))+O[14]+3275163606&4294967295,I=A+(S<<9&4294967295|S>>>23),S=y+(A^P&(I^A))+O[3]+4107603335&4294967295,y=I+(S<<14&4294967295|S>>>18),S=P+(I^A&(y^I))+O[8]+1163531501&4294967295,P=y+(S<<20&4294967295|S>>>12),S=A+(y^I&(P^y))+O[13]+2850285829&4294967295,A=P+(S<<5&4294967295|S>>>27),S=I+(P^y&(A^P))+O[2]+4243563512&4294967295,I=A+(S<<9&4294967295|S>>>23),S=y+(A^P&(I^A))+O[7]+1735328473&4294967295,y=I+(S<<14&4294967295|S>>>18),S=P+(I^A&(y^I))+O[12]+2368359562&4294967295,P=y+(S<<20&4294967295|S>>>12),S=A+(P^y^I)+O[5]+4294588738&4294967295,A=P+(S<<4&4294967295|S>>>28),S=I+(A^P^y)+O[8]+2272392833&4294967295,I=A+(S<<11&4294967295|S>>>21),S=y+(I^A^P)+O[11]+1839030562&4294967295,y=I+(S<<16&4294967295|S>>>16),S=P+(y^I^A)+O[14]+4259657740&4294967295,P=y+(S<<23&4294967295|S>>>9),S=A+(P^y^I)+O[1]+2763975236&4294967295,A=P+(S<<4&4294967295|S>>>28),S=I+(A^P^y)+O[4]+1272893353&4294967295,I=A+(S<<11&4294967295|S>>>21),S=y+(I^A^P)+O[7]+4139469664&4294967295,y=I+(S<<16&4294967295|S>>>16),S=P+(y^I^A)+O[10]+3200236656&4294967295,P=y+(S<<23&4294967295|S>>>9),S=A+(P^y^I)+O[13]+681279174&4294967295,A=P+(S<<4&4294967295|S>>>28),S=I+(A^P^y)+O[0]+3936430074&4294967295,I=A+(S<<11&4294967295|S>>>21),S=y+(I^A^P)+O[3]+3572445317&4294967295,y=I+(S<<16&4294967295|S>>>16),S=P+(y^I^A)+O[6]+76029189&4294967295,P=y+(S<<23&4294967295|S>>>9),S=A+(P^y^I)+O[9]+3654602809&4294967295,A=P+(S<<4&4294967295|S>>>28),S=I+(A^P^y)+O[12]+3873151461&4294967295,I=A+(S<<11&4294967295|S>>>21),S=y+(I^A^P)+O[15]+530742520&4294967295,y=I+(S<<16&4294967295|S>>>16),S=P+(y^I^A)+O[2]+3299628645&4294967295,P=y+(S<<23&4294967295|S>>>9),S=A+(y^(P|~I))+O[0]+4096336452&4294967295,A=P+(S<<6&4294967295|S>>>26),S=I+(P^(A|~y))+O[7]+1126891415&4294967295,I=A+(S<<10&4294967295|S>>>22),S=y+(A^(I|~P))+O[14]+2878612391&4294967295,y=I+(S<<15&4294967295|S>>>17),S=P+(I^(y|~A))+O[5]+4237533241&4294967295,P=y+(S<<21&4294967295|S>>>11),S=A+(y^(P|~I))+O[12]+1700485571&4294967295,A=P+(S<<6&4294967295|S>>>26),S=I+(P^(A|~y))+O[3]+2399980690&4294967295,I=A+(S<<10&4294967295|S>>>22),S=y+(A^(I|~P))+O[10]+4293915773&4294967295,y=I+(S<<15&4294967295|S>>>17),S=P+(I^(y|~A))+O[1]+2240044497&4294967295,P=y+(S<<21&4294967295|S>>>11),S=A+(y^(P|~I))+O[8]+1873313359&4294967295,A=P+(S<<6&4294967295|S>>>26),S=I+(P^(A|~y))+O[15]+4264355552&4294967295,I=A+(S<<10&4294967295|S>>>22),S=y+(A^(I|~P))+O[6]+2734768916&4294967295,y=I+(S<<15&4294967295|S>>>17),S=P+(I^(y|~A))+O[13]+1309151649&4294967295,P=y+(S<<21&4294967295|S>>>11),S=A+(y^(P|~I))+O[4]+4149444226&4294967295,A=P+(S<<6&4294967295|S>>>26),S=I+(P^(A|~y))+O[11]+3174756917&4294967295,I=A+(S<<10&4294967295|S>>>22),S=y+(A^(I|~P))+O[2]+718787259&4294967295,y=I+(S<<15&4294967295|S>>>17),S=P+(I^(y|~A))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(y+(S<<21&4294967295|S>>>11))&4294967295,R.g[2]=R.g[2]+y&4294967295,R.g[3]=R.g[3]+I&4294967295}r.prototype.v=function(R,A){A===void 0&&(A=R.length);const P=A-this.blockSize,O=this.C;let y=this.h,I=0;for(;I<A;){if(y==0)for(;I<=P;)i(this,R,I),I+=this.blockSize;if(typeof R=="string"){for(;I<A;)if(O[y++]=R.charCodeAt(I++),y==this.blockSize){i(this,O),y=0;break}}else for(;I<A;)if(O[y++]=R[I++],y==this.blockSize){i(this,O),y=0;break}}this.h=y,this.o+=A},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var P=R.length-8;P<R.length;++P)R[P]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,P=0;P<4;++P)for(let O=0;O<32;O+=8)R[A++]=this.g[P]>>>O&255;return R};function s(R,A){var P=a;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=A(R)}function o(R,A){this.h=A;const P=[];let O=!0;for(let y=R.length-1;y>=0;y--){const I=R[y]|0;O&&I==A||(P[y]=I,O=!1)}this.g=P}var a={};function l(R){return-128<=R&&R<128?s(R,function(A){return new o([A|0],A<0?-1:0)}):new o([R|0],R<0?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return h;if(R<0)return v(u(-R));const A=[];let P=1;for(let O=0;R>=P;O++)A[O]=R/P|0,P*=4294967296;return new o(A,0)}function c(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return v(c(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=u(Math.pow(A,8));let O=h;for(let I=0;I<R.length;I+=8){var y=Math.min(8,R.length-I);const S=parseInt(R.substring(I,I+y),A);y<8?(y=u(Math.pow(A,y)),O=O.j(y).add(u(S))):(O=O.j(P),O=O.add(u(S)))}return O}var h=l(0),d=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-v(this).m();let R=0,A=1;for(let P=0;P<this.g.length;P++){const O=this.i(P);R+=(O>=0?O:4294967296+O)*A,A*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(T(this))return"0";if(_(this))return"-"+v(this).toString(R);const A=u(Math.pow(R,6));var P=this;let O="";for(;;){const y=g(P,A).g;P=b(P,y.j(A));let I=((P.g.length>0?P.g[0]:P.h)>>>0).toString(R);if(P=y,T(P))return I+O;for(;I.length<6;)I="0"+I;O=I+O}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function T(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function _(R){return R.h==-1}t.l=function(R){return R=b(this,R),_(R)?-1:T(R)?0:1};function v(R){const A=R.g.length,P=[];for(let O=0;O<A;O++)P[O]=~R.g[O];return new o(P,~R.h).add(d)}t.abs=function(){return _(this)?v(this):this},t.add=function(R){const A=Math.max(this.g.length,R.g.length),P=[];let O=0;for(let y=0;y<=A;y++){let I=O+(this.i(y)&65535)+(R.i(y)&65535),S=(I>>>16)+(this.i(y)>>>16)+(R.i(y)>>>16);O=S>>>16,I&=65535,S&=65535,P[y]=S<<16|I}return new o(P,P[P.length-1]&-2147483648?-1:0)};function b(R,A){return R.add(v(A))}t.j=function(R){if(T(this)||T(R))return h;if(_(this))return _(R)?v(this).j(v(R)):v(v(this).j(R));if(_(R))return v(this.j(v(R)));if(this.l(p)<0&&R.l(p)<0)return u(this.m()*R.m());const A=this.g.length+R.g.length,P=[];for(var O=0;O<2*A;O++)P[O]=0;for(O=0;O<this.g.length;O++)for(let y=0;y<R.g.length;y++){const I=this.i(O)>>>16,S=this.i(O)&65535,D=R.i(y)>>>16,B=R.i(y)&65535;P[2*O+2*y]+=S*B,E(P,2*O+2*y),P[2*O+2*y+1]+=I*B,E(P,2*O+2*y+1),P[2*O+2*y+1]+=S*D,E(P,2*O+2*y+1),P[2*O+2*y+2]+=I*D,E(P,2*O+2*y+2)}for(R=0;R<A;R++)P[R]=P[2*R+1]<<16|P[2*R];for(R=A;R<2*A;R++)P[R]=0;return new o(P,0)};function E(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function m(R,A){this.g=R,this.h=A}function g(R,A){if(T(A))throw Error("division by zero");if(T(R))return new m(h,h);if(_(R))return A=g(v(R),A),new m(v(A.g),v(A.h));if(_(A))return A=g(R,v(A)),new m(v(A.g),A.h);if(R.g.length>30){if(_(R)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var P=d,O=A;O.l(R)<=0;)P=w(P),O=w(O);var y=x(P,1),I=x(O,1);for(O=x(O,2),P=x(P,2);!T(O);){var S=I.add(O);S.l(R)<=0&&(y=y.add(P),I=S),O=x(O,1),P=x(P,1)}return A=b(R,y.j(A)),new m(y,A)}for(y=h;R.l(A)>=0;){for(P=Math.max(1,Math.floor(R.m()/A.m())),O=Math.ceil(Math.log(P)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),I=u(P),S=I.j(A);_(S)||S.l(R)>0;)P-=O,I=u(P),S=I.j(A);T(I)&&(I=d),y=y.add(I),R=b(R,S)}return new m(y,R)}t.B=function(R){return g(this,R).h},t.and=function(R){const A=Math.max(this.g.length,R.g.length),P=[];for(let O=0;O<A;O++)P[O]=this.i(O)&R.i(O);return new o(P,this.h&R.h)},t.or=function(R){const A=Math.max(this.g.length,R.g.length),P=[];for(let O=0;O<A;O++)P[O]=this.i(O)|R.i(O);return new o(P,this.h|R.h)},t.xor=function(R){const A=Math.max(this.g.length,R.g.length),P=[];for(let O=0;O<A;O++)P[O]=this.i(O)^R.i(O);return new o(P,this.h^R.h)};function w(R){const A=R.g.length+1,P=[];for(let O=0;O<A;O++)P[O]=R.i(O)<<1|R.i(O-1)>>>31;return new o(P,R.h)}function x(R,A){const P=A>>5;A%=32;const O=R.g.length-P,y=[];for(let I=0;I<O;I++)y[I]=A>0?R.i(I+P)>>>A|R.i(I+P+1)<<32-A:R.i(I+P);return new o(y,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ey=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Ni=o}).apply(typeof Vd<"u"?Vd:typeof self<"u"?self:typeof window<"u"?window:{});var al=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ty,ta,ny,vl,Kc,ry,iy,sy;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof al=="object"&&al];for(var C=0;C<f.length;++C){var N=f[C];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(f,C){if(C)e:{var N=r;f=f.split(".");for(var U=0;U<f.length-1;U++){var oe=f[U];if(!(oe in N))break e;N=N[oe]}f=f[f.length-1],U=N[f],C=C(U),C!=U&&C!=null&&e(N,f,{configurable:!0,writable:!0,value:C})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(C){var N=[],U;for(U in C)Object.prototype.hasOwnProperty.call(C,U)&&N.push([U,C[U]]);return N}});var s=s||{},o=this||self;function a(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function l(f,C,N){return f.call.apply(f.bind,arguments)}function u(f,C,N){return u=l,u.apply(null,arguments)}function c(f,C){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),f.apply(this,U)}}function h(f,C){function N(){}N.prototype=C.prototype,f.Z=C.prototype,f.prototype=new N,f.prototype.constructor=f,f.Ob=function(U,oe,fe){for(var Ee=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Ee[Fe-2]=arguments[Fe];return C.prototype[oe].apply(U,Ee)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function p(f){const C=f.length;if(C>0){const N=Array(C);for(let U=0;U<C;U++)N[U]=f[U];return N}return[]}function T(f,C){for(let U=1;U<arguments.length;U++){const oe=arguments[U];var N=typeof oe;if(N=N!="object"?N:oe?Array.isArray(oe)?"array":N:"null",N=="array"||N=="object"&&typeof oe.length=="number"){N=f.length||0;const fe=oe.length||0;f.length=N+fe;for(let Ee=0;Ee<fe;Ee++)f[N+Ee]=oe[Ee]}else f.push(oe)}}class _{constructor(C,N){this.i=C,this.j=N,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function v(f){o.setTimeout(()=>{throw f},0)}function b(){var f=R;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class E{constructor(){this.h=this.g=null}add(C,N){const U=m.get();U.set(C,N),this.h?this.h.next=U:this.g=U,this.h=U}}var m=new _(()=>new g,f=>f.reset());class g{constructor(){this.next=this.g=this.h=null}set(C,N){this.h=C,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let w,x=!1,R=new E,A=()=>{const f=Promise.resolve(void 0);w=()=>{f.then(P)}};function P(){for(var f;f=b();){try{f.h.call(f.g)}catch(N){v(N)}var C=m;C.j(f),C.h<100&&(C.h++,f.next=C.g,C.g=f)}x=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function y(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}y.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const N=()=>{};o.addEventListener("test",N,C),o.removeEventListener("test",N,C)}catch{}return f})();function S(f){return/^[\s\xa0]*$/.test(f)}function D(f,C){y.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,C)}h(D,y),D.prototype.init=function(f,C){const N=this.type=f.type,U=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget,C||(N=="mouseover"?C=f.fromElement:N=="mouseout"&&(C=f.toElement)),this.relatedTarget=C,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&D.Z.h.call(this)},D.prototype.h=function(){D.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),$=0;function W(f,C,N,U,oe){this.listener=f,this.proxy=null,this.src=C,this.type=N,this.capture=!!U,this.ha=oe,this.key=++$,this.da=this.fa=!1}function ae(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Z(f,C,N){for(const U in f)C.call(N,f[U],U,f)}function H(f,C){for(const N in f)C.call(void 0,f[N],N,f)}function L(f){const C={};for(const N in f)C[N]=f[N];return C}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(f,C){let N,U;for(let oe=1;oe<arguments.length;oe++){U=arguments[oe];for(N in U)f[N]=U[N];for(let fe=0;fe<j.length;fe++)N=j[fe],Object.prototype.hasOwnProperty.call(U,N)&&(f[N]=U[N])}}function ne(f){this.src=f,this.g={},this.h=0}ne.prototype.add=function(f,C,N,U,oe){const fe=f.toString();f=this.g[fe],f||(f=this.g[fe]=[],this.h++);const Ee=F(f,C,U,oe);return Ee>-1?(C=f[Ee],N||(C.fa=!1)):(C=new W(C,this.src,fe,!!U,oe),C.fa=N,f.push(C)),C};function G(f,C){const N=C.type;if(N in f.g){var U=f.g[N],oe=Array.prototype.indexOf.call(U,C,void 0),fe;(fe=oe>=0)&&Array.prototype.splice.call(U,oe,1),fe&&(ae(C),f.g[N].length==0&&(delete f.g[N],f.h--))}}function F(f,C,N,U){for(let oe=0;oe<f.length;++oe){const fe=f[oe];if(!fe.da&&fe.listener==C&&fe.capture==!!N&&fe.ha==U)return oe}return-1}var V="closure_lm_"+(Math.random()*1e6|0),Y={};function X(f,C,N,U,oe){if(Array.isArray(C)){for(let fe=0;fe<C.length;fe++)X(f,C[fe],N,U,oe);return null}return N=te(N),f&&f[B]?f.J(C,N,a(U)?!!U.capture:!1,oe):se(f,C,N,!1,U,oe)}function se(f,C,N,U,oe,fe){if(!C)throw Error("Invalid event type");const Ee=a(oe)?!!oe.capture:!!oe;let Fe=he(f);if(Fe||(f[V]=Fe=new ne(f)),N=Fe.add(C,N,U,Ee,fe),N.proxy)return N;if(U=ye(),N.proxy=U,U.src=f,U.listener=N,f.addEventListener)I||(oe=Ee),oe===void 0&&(oe=!1),f.addEventListener(C.toString(),U,oe);else if(f.attachEvent)f.attachEvent(ee(C.toString()),U);else if(f.addListener&&f.removeListener)f.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function ye(){function f(N){return C.call(f.src,f.listener,N)}const C=ue;return f}function q(f,C,N,U,oe){if(Array.isArray(C))for(var fe=0;fe<C.length;fe++)q(f,C[fe],N,U,oe);else U=a(U)?!!U.capture:!!U,N=te(N),f&&f[B]?(f=f.i,fe=String(C).toString(),fe in f.g&&(C=f.g[fe],N=F(C,N,U,oe),N>-1&&(ae(C[N]),Array.prototype.splice.call(C,N,1),C.length==0&&(delete f.g[fe],f.h--)))):f&&(f=he(f))&&(C=f.g[C.toString()],f=-1,C&&(f=F(C,N,U,oe)),(N=f>-1?C[f]:null)&&K(N))}function K(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[B])G(C.i,f);else{var N=f.type,U=f.proxy;C.removeEventListener?C.removeEventListener(N,U,f.capture):C.detachEvent?C.detachEvent(ee(N),U):C.addListener&&C.removeListener&&C.removeListener(U),(N=he(C))?(G(N,f),N.h==0&&(N.src=null,C[V]=null)):ae(f)}}}function ee(f){return f in Y?Y[f]:Y[f]="on"+f}function ue(f,C){if(f.da)f=!0;else{C=new D(C,this);const N=f.listener,U=f.ha||f.src;f.fa&&K(f),f=N.call(U,C)}return f}function he(f){return f=f[V],f instanceof ne?f:null}var ce="__closure_events_fn_"+(Math.random()*1e9>>>0);function te(f){return typeof f=="function"?f:(f[ce]||(f[ce]=function(C){return f.handleEvent(C)}),f[ce])}function J(){O.call(this),this.i=new ne(this),this.M=this,this.G=null}h(J,O),J.prototype[B]=!0,J.prototype.removeEventListener=function(f,C,N,U){q(this,f,C,N,U)};function re(f,C){var N,U=f.G;if(U)for(N=[];U;U=U.G)N.push(U);if(f=f.M,U=C.type||C,typeof C=="string")C=new y(C,f);else if(C instanceof y)C.target=C.target||f;else{var oe=C;C=new y(U,f),z(C,oe)}oe=!0;let fe,Ee;if(N)for(Ee=N.length-1;Ee>=0;Ee--)fe=C.g=N[Ee],oe=ie(fe,U,!0,C)&&oe;if(fe=C.g=f,oe=ie(fe,U,!0,C)&&oe,oe=ie(fe,U,!1,C)&&oe,N)for(Ee=0;Ee<N.length;Ee++)fe=C.g=N[Ee],oe=ie(fe,U,!1,C)&&oe}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var f=this.i;for(const C in f.g){const N=f.g[C];for(let U=0;U<N.length;U++)ae(N[U]);delete f.g[C],f.h--}}this.G=null},J.prototype.J=function(f,C,N,U){return this.i.add(String(f),C,!1,N,U)},J.prototype.K=function(f,C,N,U){return this.i.add(String(f),C,!0,N,U)};function ie(f,C,N,U){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();let oe=!0;for(let fe=0;fe<C.length;++fe){const Ee=C[fe];if(Ee&&!Ee.da&&Ee.capture==N){const Fe=Ee.listener,Ot=Ee.ha||Ee.src;Ee.fa&&G(f.i,Ee),oe=Fe.call(Ot,U)!==!1&&oe}}return oe&&!U.defaultPrevented}function le(f,C){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=u(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:o.setTimeout(f,C||0)}function ge(f){f.g=le(()=>{f.g=null,f.i&&(f.i=!1,ge(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class _e extends O{constructor(C,N){super(),this.m=C,this.l=N,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(f){O.call(this),this.h=f,this.g={}}h(be,O);var Se=[];function Ne(f){Z(f.g,function(C,N){this.g.hasOwnProperty(N)&&K(C)},f),f.g={}}be.prototype.N=function(){be.Z.N.call(this),Ne(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=o.JSON.stringify,ut=o.JSON.parse,Oe=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function tt(){}function Nt(){}var Zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function In(){y.call(this,"d")}h(In,y);function ct(){y.call(this,"c")}h(ct,y);var ft={},Sn=null;function en(){return Sn=Sn||new J}ft.Ia="serverreachability";function ln(f){y.call(this,ft.Ia,f)}h(ln,y);function Rn(f){const C=en();re(C,new ln(C))}ft.STAT_EVENT="statevent";function oi(f,C){y.call(this,ft.STAT_EVENT,f),this.stat=C}h(oi,y);function ht(f){const C=en();re(C,new oi(C,f))}ft.Ja="timingevent";function ai(f,C){y.call(this,ft.Ja,f),this.size=C}h(ai,y);function pn(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},C)}function Fn(){this.g=!0}Fn.prototype.ua=function(){this.g=!1};function $i(f,C,N,U,oe,fe){f.info(function(){if(f.g)if(fe){var Ee="",Fe=fe.split("&");for(let nt=0;nt<Fe.length;nt++){var Ot=Fe[nt].split("=");if(Ot.length>1){const Dt=Ot[0];Ot=Ot[1];const ar=Dt.split("_");Ee=ar.length>=2&&ar[1]=="type"?Ee+(Dt+"="+Ot+"&"):Ee+(Dt+"=redacted&")}}}else Ee=null;else Ee=fe;return"XMLHTTP REQ ("+U+") [attempt "+oe+"]: "+C+`
`+N+`
`+Ee})}function Gi(f,C,N,U,oe,fe,Ee){f.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+oe+"]: "+C+`
`+N+`
`+fe+" "+Ee})}function tn(f,C,N,U){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+jn(f,N)+(U?" "+U:"")})}function xs(f,C){f.info(function(){return"TIMEOUT: "+C})}Fn.prototype.info=function(){};function jn(f,C){if(!f.g)return C;if(!C)return null;try{const fe=JSON.parse(C);if(fe){for(f=0;f<fe.length;f++)if(Array.isArray(fe[f])){var N=fe[f];if(!(N.length<2)){var U=N[1];if(Array.isArray(U)&&!(U.length<1)){var oe=U[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let Ee=1;Ee<U.length;Ee++)U[Ee]=""}}}}return we(fe)}catch{return C}}var li={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ds={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ls;function ui(){}h(ui,tt),ui.prototype.g=function(){return new XMLHttpRequest},Ls=new ui;function Bn(f){return encodeURIComponent(String(f))}function St(f){var C=1;f=f.split(":");const N=[];for(;C>0&&f.length;)N.push(f.shift()),C--;return f.length&&N.push(f.join(":")),N}function On(f,C,N,U){this.j=f,this.i=C,this.l=N,this.S=U||1,this.V=new be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ms}function Ms(){this.i=null,this.g="",this.h=!1}var Vs={},Wi={};function Qi(f,C,N){f.M=1,f.A=Cr(cn(C)),f.u=N,f.R=!0,Rt(f,null)}function Rt(f,C){f.F=Date.now(),ci(f),f.B=cn(f.A);var N=f.B,U=f.S;Array.isArray(U)||(U=[String(U)]),Ks(N.i,"t",U),f.C=0,N=f.j.L,f.h=new Ms,f.g=Uh(f.j,N?C:null,!f.u),f.P>0&&(f.O=new _e(u(f.Y,f,f.g),f.P)),C=f.V,N=f.g,U=f.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(Se[0]=oe.toString()),oe=Se);for(let fe=0;fe<oe.length;fe++){const Ee=X(N,oe[fe],U||C.handleEvent,!1,C.h||C);if(!Ee)break;C.g[Ee.key]=Ee}C=f.J?L(f.J):{},f.u?(f.v||(f.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,C)):(f.v="GET",f.g.ea(f.B,f.v,null,C)),Rn(),$i(f.i,f.v,f.B,f.l,f.S,f.u)}On.prototype.ba=function(f){f=f.target;const C=this.O;C&&Q(f)==3?C.j():this.Y(f)},On.prototype.Y=function(f){try{if(f==this.g)e:{const Fe=Q(this.g),Ot=this.g.ya(),nt=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||de(this.g)))){this.K||Fe!=4||Ot==7||(Ot==8||nt<=0?Rn(3):Rn(2)),xt(this);var C=this.g.ca();this.X=C;var N=Uo(this);if(this.o=C==200,Gi(this.i,this.v,this.B,this.l,this.S,Fe,C),this.o){if(this.U&&!this.L){t:{if(this.g){var U,oe=this.g;if((U=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(U)){var fe=U;break t}}fe=null}if(f=fe)tn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yi(this,f);else{this.o=!1,this.m=3,ht(12),qn(this),Or(this);break e}}if(this.R){f=!0;let Dt;for(;!this.K&&this.C<N.length;)if(Dt=Fo(this,N),Dt==Wi){Fe==4&&(this.m=4,ht(14),f=!1),tn(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Vs){this.m=4,ht(15),tn(this.i,this.l,N,"[Invalid Chunk]"),f=!1;break}else tn(this.i,this.l,Dt,null),Yi(this,Dt);if(Us(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||N.length!=0||this.h.h||(this.m=1,ht(16),f=!1),this.o=this.o&&f,!f)tn(this.i,this.l,N,"[Invalid Chunked Response]"),qn(this),Or(this);else if(N.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),$n(Ee),Ee.P=!0,ht(11))}}else tn(this.i,this.l,N,null),Yi(this,N);Fe==4&&qn(this),this.o&&!this.K&&(Fe==4?es(this.j,this):(this.o=!1,ci(this)))}else xe(this.g),C==400&&N.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),qn(this),Or(this)}}}catch{}finally{}};function Uo(f){if(!Us(f))return f.g.la();const C=de(f.g);if(C==="")return"";let N="";const U=C.length,oe=Q(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return qn(f),Or(f),"";f.h.i=new o.TextDecoder}for(let fe=0;fe<U;fe++)f.h.h=!0,N+=f.h.i.decode(C[fe],{stream:!(oe&&fe==U-1)});return C.length=0,f.h.g+=N,f.C=0,f.h.g}function Us(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Fo(f,C){var N=f.C,U=C.indexOf(`
`,N);return U==-1?Wi:(N=Number(C.substring(N,U)),isNaN(N)?Vs:(U+=1,U+N>C.length?Wi:(C=C.slice(U,U+N),f.C=U+N,C)))}On.prototype.cancel=function(){this.K=!0,qn(this)};function ci(f){f.T=Date.now()+f.H,Fs(f,f.H)}function Fs(f,C){if(f.D!=null)throw Error("WatchDog timer not null");f.D=pn(u(f.aa,f),C)}function xt(f){f.D&&(o.clearTimeout(f.D),f.D=null)}On.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(xs(this.i,this.B),this.M!=2&&(Rn(),ht(17)),qn(this),this.m=2,Or(this)):Fs(this,this.T-f)};function Or(f){f.j.I==0||f.K||es(f.j,f)}function qn(f){xt(f);var C=f.O;C&&typeof C.dispose=="function"&&C.dispose(),f.O=null,Ne(f.V),f.g&&(C=f.g,f.g=null,C.abort(),C.dispose())}function Yi(f,C){try{var N=f.j;if(N.I!=0&&(N.g==f||nr(N.h,f))){if(!f.L&&nr(N.h,f)&&N.I==3){try{var U=N.Ba.g.parse(C)}catch{U=null}if(Array.isArray(U)&&U.length==3){var oe=U;if(oe[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<f.F)Mr(N),ot(N);else break e;yn(N),ht(18)}}else N.xa=oe[1],0<N.xa-N.K&&oe[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=pn(u(N.Va,N),6e3));Xi(N.h)<=1&&N.ta&&(N.ta=void 0)}else ts(N,11)}else if((f.L||N.g==f)&&Mr(N),!S(C))for(oe=N.Ba.g.parse(C),C=0;C<oe.length;C++){let nt=oe[C];const Dt=nt[0];if(!(Dt<=N.K))if(N.K=Dt,nt=nt[1],N.I==2)if(nt[0]=="c"){N.M=nt[1],N.ba=nt[2];const ar=nt[3];ar!=null&&(N.ka=ar,N.j.info("VER="+N.ka));const ns=nt[4];ns!=null&&(N.za=ns,N.j.info("SVER="+N.za));const pi=nt[5];pi!=null&&typeof pi=="number"&&pi>0&&(U=1.5*pi,N.O=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const gi=f.g;if(gi){const nl=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nl){var fe=U.h;fe.g||nl.indexOf("spdy")==-1&&nl.indexOf("quic")==-1&&nl.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(un(fe,fe.h),fe.h=null))}if(U.G){const Qu=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qu&&(U.wa=Qu,Ye(U.J,U.G,Qu))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-f.F,N.j.info("Handshake RTT: "+N.T+"ms")),U=N;var Ee=f;if(U.na=Vh(U,U.L?U.ba:null,U.W),Ee.L){fi(U.h,Ee);var Fe=Ee,Ot=U.O;Ot&&(Fe.H=Ot),Fe.D&&(xt(Fe),ci(Fe)),U.g=Ee}else Kn(U);N.i.length>0&&yt(N)}else nt[0]!="stop"&&nt[0]!="close"||ts(N,7);else N.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?ts(N,7):je(N):nt[0]!="noop"&&N.l&&N.l.qa(nt),N.A=0)}}Rn(4)}catch{}}var jo=class{constructor(f,C){this.g=f,this.map=C}};function js(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Xi(f){return f.h?1:f.g?f.g.size:0}function nr(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function un(f,C){f.g?f.g.add(C):f.h=C}function fi(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}js.prototype.cancel=function(){if(this.i=Bs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Bs(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const N of f.g.values())C=C.concat(N.G);return C}return p(f.i)}var qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bo(f,C){if(f){f=f.split("&");for(let N=0;N<f.length;N++){const U=f[N].indexOf("=");let oe,fe=null;U>=0?(oe=f[N].substring(0,U),fe=f[N].substring(U+1)):oe=f[N],C(oe,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function Pn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;f instanceof Pn?(this.l=f.l,Cn(this,f.j),this.o=f.o,this.g=f.g,Hn(this,f.u),this.h=f.h,zn(this,$s(f.i)),this.m=f.m):f&&(C=String(f).match(qs))?(this.l=!1,Cn(this,C[1]||"",!0),this.o=kr(C[2]||""),this.g=kr(C[3]||"",!0),Hn(this,C[4]),this.h=kr(C[5]||"",!0),zn(this,C[6]||"",!0),this.m=kr(C[7]||"")):(this.l=!1,this.i=new Ut(null,this.l))}Pn.prototype.toString=function(){const f=[];var C=this.j;C&&f.push(Nr(C,Hs,!0),":");var N=this.g;return(N||C=="file")&&(f.push("//"),(C=this.o)&&f.push(Nr(C,Hs,!0),"@"),f.push(Bn(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&f.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&f.push("/"),f.push(Nr(N,N.charAt(0)=="/"?Ho:Ji,!0))),(N=this.i.toString())&&f.push("?",N),(N=this.m)&&f.push("#",Nr(N,xr)),f.join("")},Pn.prototype.resolve=function(f){const C=cn(this);let N=!!f.j;N?Cn(C,f.j):N=!!f.o,N?C.o=f.o:N=!!f.g,N?C.g=f.g:N=f.u!=null;var U=f.h;if(N)Hn(C,f.u);else if(N=!!f.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var oe=C.h.lastIndexOf("/");oe!=-1&&(U=C.h.slice(0,oe+1)+U)}if(oe=U,oe==".."||oe==".")U="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){U=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const fe=[];for(let Ee=0;Ee<oe.length;){const Fe=oe[Ee++];Fe=="."?U&&Ee==oe.length&&fe.push(""):Fe==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),U&&Ee==oe.length&&fe.push("")):(fe.push(Fe),U=!0)}U=fe.join("/")}else U=oe}return N?C.h=U:N=f.i.toString()!=="",N?zn(C,$s(f.i)):N=!!f.m,N&&(C.m=f.m),C};function cn(f){return new Pn(f)}function Cn(f,C,N){f.j=N?kr(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function Hn(f,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);f.u=C}else f.u=null}function zn(f,C,N){C instanceof Ut?(f.i=C,Ko(f.i,f.l)):(N||(C=Nr(C,zo)),f.i=new Ut(C,f.l))}function Ye(f,C,N){f.i.set(C,N)}function Cr(f){return Ye(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function kr(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Nr(f,C,N){return typeof f=="string"?(f=encodeURI(f).replace(C,qo),N&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function qo(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Hs=/[#\/\?@]/g,Ji=/[#\?:]/g,Ho=/[#\?]/g,zo=/[#\?@]/g,xr=/#/g;function Ut(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function Ft(f){f.g||(f.g=new Map,f.h=0,f.i&&Bo(f.i,function(C,N){f.add(decodeURIComponent(C.replace(/\+/g," ")),N)}))}t=Ut.prototype,t.add=function(f,C){Ft(this),this.i=null,f=rr(this,f);let N=this.g.get(f);return N||this.g.set(f,N=[]),N.push(C),this.h+=1,this};function kn(f,C){Ft(f),C=rr(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function zs(f,C){return Ft(f),C=rr(f,C),f.g.has(C)}t.forEach=function(f,C){Ft(this),this.g.forEach(function(N,U){N.forEach(function(oe){f.call(C,oe,U,this)},this)},this)};function gn(f,C){Ft(f);let N=[];if(typeof C=="string")zs(f,C)&&(N=N.concat(f.g.get(rr(f,C))));else for(f=Array.from(f.g.values()),C=0;C<f.length;C++)N=N.concat(f[C]);return N}t.set=function(f,C){return Ft(this),this.i=null,f=rr(this,f),zs(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},t.get=function(f,C){return f?(f=gn(this,f),f.length>0?String(f[0]):C):C};function Ks(f,C,N){kn(f,C),N.length>0&&(f.i=null,f.g.set(rr(f,C),p(N)),f.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(let U=0;U<C.length;U++){var N=C[U];const oe=Bn(N);N=gn(this,N);for(let fe=0;fe<N.length;fe++){let Ee=oe;N[fe]!==""&&(Ee+="="+Bn(N[fe])),f.push(Ee)}}return this.i=f.join("&")};function $s(f){const C=new Ut;return C.i=f.i,f.g&&(C.g=new Map(f.g),C.h=f.h),C}function rr(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function Ko(f,C){C&&!f.j&&(Ft(f),f.i=null,f.g.forEach(function(N,U){const oe=U.toLowerCase();U!=oe&&(kn(this,U),Ks(this,oe,N))},f)),f.j=C}function Gs(f,C){const N=new Fn;if(o.Image){const U=new Image;U.onload=c(mn,N,"TestLoadImage: loaded",!0,C,U),U.onerror=c(mn,N,"TestLoadImage: error",!1,C,U),U.onabort=c(mn,N,"TestLoadImage: abort",!1,C,U),U.ontimeout=c(mn,N,"TestLoadImage: timeout",!1,C,U),o.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=f}else C(!1)}function jt(f,C){const N=new Fn,U=new AbortController,oe=setTimeout(()=>{U.abort(),mn(N,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:U.signal}).then(fe=>{clearTimeout(oe),fe.ok?mn(N,"TestPingServer: ok",!0,C):mn(N,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(oe),mn(N,"TestPingServer: error",!1,C)})}function mn(f,C,N,U,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),U(N)}catch{}}function Ws(){this.g=new Oe}function ir(f){this.i=f.Sb||null,this.h=f.ab||!1}h(ir,tt),ir.prototype.g=function(){return new sr(this.i,this.h)};function sr(f,C){J.call(this),this.H=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(sr,J),t=sr.prototype,t.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=C,this.readyState=1,or(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(C.body=f),(this.H||o).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dr(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dr(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?Lr(this):or(this),this.readyState==3&&Dr(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Lr(this))},t.Na=function(f){this.g&&(this.response=f,Lr(this))},t.ga=function(){this.g&&Lr(this)};function Lr(f){f.readyState=4,f.l=null,f.j=null,f.B=null,or(f)}t.setRequestHeader=function(f,C){this.A.append(f,C)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var N=C.next();!N.done;)N=N.value,f.push(N[0]+": "+N[1]),N=C.next();return f.join(`\r
`)};function or(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(sr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function hi(f){let C="";return Z(f,function(N,U){C+=U,C+=":",C+=N,C+=`\r
`}),C}function di(f,C,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=hi(N),typeof f=="string"?N!=null&&Bn(N):Ye(f,C,N))}function Ge(f){J.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Ge,J);var Qs=/^https?$/i,Zi=["POST","PUT"];t=Ge.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,C,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ls.g(),this.g.onreadystatechange=d(u(this.Ca,this));try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(fe){Ys(this,fe);return}if(f=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var oe in U)N.set(oe,U[oe]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const fe of U.keys())N.set(fe,U.get(fe));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(fe=>fe.toLowerCase()=="content-type"),oe=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(Zi,C,void 0)>=0)||U||oe||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,Ee]of N)this.g.setRequestHeader(fe,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(fe){Ys(this,fe)}};function Ys(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.o=5,Xs(f),M(f)}function Xs(f){f.A||(f.A=!0,re(f,"complete"),re(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,re(this,"complete"),re(this,"abort"),M(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),M(this,!0)),Ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?k(this):this.Xa())},t.Xa=function(){k(this)};function k(f){if(f.h&&typeof s<"u"){if(f.v&&Q(f)==4)setTimeout(f.Ca.bind(f),0);else if(re(f,"readystatechange"),Q(f)==4){f.h=!1;try{const fe=f.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var N;if(!(N=C)){var U;if(U=fe===0){let Ee=String(f.D).match(qs)[1]||null;!Ee&&o.self&&o.self.location&&(Ee=o.self.location.protocol.slice(0,-1)),U=!Qs.test(Ee?Ee.toLowerCase():"")}N=U}if(N)re(f,"complete"),re(f,"success");else{f.o=6;try{var oe=Q(f)>2?f.g.statusText:""}catch{oe=""}f.l=oe+" ["+f.ca()+"]",Xs(f)}}finally{M(f)}}}}function M(f,C){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const N=f.g;f.g=null,C||re(f,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Q(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Q(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),ut(C)}};function de(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function xe(f){const C={};f=(f.g&&Q(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<f.length;U++){if(S(f[U]))continue;var N=St(f[U]);const oe=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const fe=C[oe]||[];C[oe]=fe,fe.push(N)}H(C,function(U){return U.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ae(f,C,N){return N&&N.internalChannelParams&&N.internalChannelParams[f]||C}function Ke(f){this.za=0,this.i=[],this.j=new Fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ae("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ae("baseRetryDelayMs",5e3,f),this.Za=Ae("retryDelaySeedMs",1e4,f),this.Ta=Ae("forwardChannelMaxRetries",2,f),this.va=Ae("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new js(f&&f.concurrentRequestLimit),this.Ba=new Ws,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ke.prototype,t.ka=8,t.I=1,t.connect=function(f,C,N,U){ht(0),this.W=f,this.H=C||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.J=Vh(this,null,this.W),yt(this)};function je(f){if(We(f),f.I==3){var C=f.V++,N=cn(f.J);if(Ye(N,"SID",f.M),Ye(N,"RID",C),Ye(N,"TYPE","terminate"),gt(f,N),C=new On(f,f.j,C),C.M=2,C.A=Cr(cn(N)),N=!1,o.navigator&&o.navigator.sendBeacon)try{N=o.navigator.sendBeacon(C.A.toString(),"")}catch{}!N&&o.Image&&(new Image().src=C.A,N=!0),N||(C.g=Uh(C.j,null),C.g.ea(C.A)),C.F=Date.now(),ci(C)}Mh(f)}function ot(f){f.g&&($n(f),f.g.cancel(),f.g=null)}function We(f){ot(f),f.v&&(o.clearTimeout(f.v),f.v=null),Mr(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function yt(f){if(!Pr(f.h)&&!f.m){f.m=!0;var C=f.Ea;w||A(),x||(w(),x=!0),R.add(C,f),f.D=0}}function zt(f,C){return Xi(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=C.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=pn(u(f.Ea,f,C),Lh(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const oe=new On(this,this.j,f);let fe=this.o;if(this.U&&(fe?(fe=L(fe),z(fe,this.U)):fe=this.U),this.u!==null||this.R||(oe.J=fe,fe=null),this.S)e:{for(var C=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(C+=U,C>4096){C=N;break e}if(C===4096||N===this.i.length-1){C=N+1;break e}}C=1e3}else C=1e3;C=Et(this,oe,C),N=cn(this.J),Ye(N,"RID",f),Ye(N,"CVER",22),this.G&&Ye(N,"X-HTTP-Session-Id",this.G),gt(this,N),fe&&(this.R?C="headers="+Bn(hi(fe))+"&"+C:this.u&&di(N,this.u,fe)),un(this.h,oe),this.Ra&&Ye(N,"TYPE","init"),this.S?(Ye(N,"$req",C),Ye(N,"SID","null"),oe.U=!0,Qi(oe,N,null)):Qi(oe,N,C),this.I=2}}else this.I==3&&(f?pt(this,f):this.i.length==0||Pr(this.h)||pt(this))};function pt(f,C){var N;C?N=C.l:N=f.V++;const U=cn(f.J);Ye(U,"SID",f.M),Ye(U,"RID",N),Ye(U,"AID",f.K),gt(f,U),f.u&&f.o&&di(U,f.u,f.o),N=new On(f,f.j,N,f.D+1),f.u===null&&(N.J=f.o),C&&(f.i=C.G.concat(f.i)),C=Et(f,N,1e3),N.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),un(f.h,N),Qi(N,U,C)}function gt(f,C){f.H&&Z(f.H,function(N,U){Ye(C,U,N)}),f.l&&Z({},function(N,U){Ye(C,U,N)})}function Et(f,C,N){N=Math.min(f.i.length,N);const U=f.l?u(f.l.Ka,f.l,f):null;e:{var oe=f.i;let Fe=-1;for(;;){const Ot=["count="+N];Fe==-1?N>0?(Fe=oe[0].g,Ot.push("ofs="+Fe)):Fe=0:Ot.push("ofs="+Fe);let nt=!0;for(let Dt=0;Dt<N;Dt++){var fe=oe[Dt].g;const ar=oe[Dt].map;if(fe-=Fe,fe<0)Fe=Math.max(0,oe[Dt].g-100),nt=!1;else try{fe="req"+fe+"_"||"";try{var Ee=ar instanceof Map?ar:Object.entries(ar);for(const[ns,pi]of Ee){let gi=pi;a(pi)&&(gi=we(pi)),Ot.push(fe+ns+"="+encodeURIComponent(gi))}}catch(ns){throw Ot.push(fe+"type="+encodeURIComponent("_badmap")),ns}}catch{U&&U(ar)}}if(nt){Ee=Ot.join("&");break e}}Ee=void 0}return f=f.i.splice(0,N),C.G=f,Ee}function Kn(f){if(!f.g&&!f.v){f.Y=1;var C=f.Da;w||A(),x||(w(),x=!0),R.add(C,f),f.A=0}}function yn(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=pn(u(f.Da,f),Lh(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,$o(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=pn(u(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),ot(this),$o(this))};function $n(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function $o(f){f.g=new On(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var C=cn(f.na);Ye(C,"RID","rpc"),Ye(C,"SID",f.M),Ye(C,"AID",f.K),Ye(C,"CI",f.F?"0":"1"),!f.F&&f.ia&&Ye(C,"TO",f.ia),Ye(C,"TYPE","xmlhttp"),gt(f,C),f.u&&f.o&&di(C,f.u,f.o),f.O&&(f.g.H=f.O);var N=f.g;f=f.ba,N.M=1,N.A=Cr(cn(C)),N.u=null,N.R=!0,Rt(N,f)}t.Va=function(){this.C!=null&&(this.C=null,ot(this),yn(this),ht(19))};function Mr(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function es(f,C){var N=null;if(f.g==C){Mr(f),$n(f),f.g=null;var U=2}else if(nr(f.h,C))N=C.G,fi(f.h,C),U=1;else return;if(f.I!=0){if(C.o)if(U==1){N=C.u?C.u.length:0,C=Date.now()-C.F;var oe=f.D;U=en(),re(U,new ai(U,N)),yt(f)}else Kn(f);else if(oe=C.m,oe==3||oe==0&&C.X>0||!(U==1&&zt(f,C)||U==2&&yn(f)))switch(N&&N.length>0&&(C=f.h,C.i=C.i.concat(N)),oe){case 1:ts(f,5);break;case 4:ts(f,10);break;case 3:ts(f,6);break;default:ts(f,2)}}}function Lh(f,C){let N=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(N*=2),N*C}function ts(f,C){if(f.j.info("Error code "+C),C==2){var N=u(f.bb,f),U=f.Ua;const oe=!U;U=new Pn(U||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Cn(U,"https"),Cr(U),oe?Gs(U.toString(),N):jt(U.toString(),N)}else ht(2);f.I=0,f.l&&f.l.pa(C),Mh(f),We(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Mh(f){if(f.I=0,f.ja=[],f.l){const C=Bs(f.h);(C.length!=0||f.i.length!=0)&&(T(f.ja,C),T(f.ja,f.i),f.h.i.length=0,p(f.i),f.i.length=0),f.l.oa()}}function Vh(f,C,N){var U=N instanceof Pn?cn(N):new Pn(N);if(U.g!="")C&&(U.g=C+"."+U.g),Hn(U,U.u);else{var oe=o.location;U=oe.protocol,C=C?C+"."+oe.hostname:oe.hostname,oe=+oe.port;const fe=new Pn(null);U&&Cn(fe,U),C&&(fe.g=C),oe&&Hn(fe,oe),N&&(fe.h=N),U=fe}return N=f.G,C=f.wa,N&&C&&Ye(U,N,C),Ye(U,"VER",f.ka),gt(f,U),U}function Uh(f,C,N){if(C&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Aa&&!f.ma?new Ge(new ir({ab:N})):new Ge(f.ma),C.Fa(f.L),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fh(){}t=Fh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function tl(){}tl.prototype.g=function(f,C){return new vn(f,C)};function vn(f,C){J.call(this),this.g=new Ke(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(f?f["X-WebChannel-Client-Profile"]=C.sa:f={"X-WebChannel-Client-Profile":C.sa}),this.g.U=f,(f=C&&C.Qb)&&!S(f)&&(this.g.u=f),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!S(C)&&(this.g.G=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new Js(this)}h(vn,J),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){je(this.g)},vn.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var N={};N.__data__=f,f=N}else this.v&&(N={},N.__data__=we(f),f=N);C.i.push(new jo(C.Ya++,f)),C.I==3&&yt(C)},vn.prototype.N=function(){this.g.l=null,delete this.j,je(this.g),delete this.g,vn.Z.N.call(this)};function jh(f){In.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const N in C){f=N;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}h(jh,In);function Bh(){ct.call(this),this.status=1}h(Bh,ct);function Js(f){this.g=f}h(Js,Fh),Js.prototype.ra=function(){re(this.g,"a")},Js.prototype.qa=function(f){re(this.g,new jh(f))},Js.prototype.pa=function(f){re(this.g,new Bh)},Js.prototype.oa=function(){re(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,sy=function(){return new tl},iy=function(){return en()},ry=ft,Kc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},li.NO_ERROR=0,li.TIMEOUT=8,li.HTTP_ERROR=6,vl=li,Ds.COMPLETE="complete",ny=Ds,Nt.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",J.prototype.listen=J.prototype.J,ta=Nt,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,ty=Ge}).apply(typeof al<"u"?al:typeof self<"u"?self:typeof window<"u"?window:{});const Ud="@firebase/firestore",Fd="4.9.2";class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");let Do="12.3.0";const bs=new Uf("@firebase/firestore");function io(){return bs.logLevel}function Te(t,...e){if(bs.logLevel<=qe.DEBUG){const n=e.map(qf);bs.debug(`Firestore (${Do}): ${t}`,...n)}}function Zr(t,...e){if(bs.logLevel<=qe.ERROR){const n=e.map(qf);bs.error(`Firestore (${Do}): ${t}`,...n)}}function Io(t,...e){if(bs.logLevel<=qe.WARN){const n=e.map(qf);bs.warn(`Firestore (${Do}): ${t}`,...n)}}function qf(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ke(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,oy(t,r,n)}function oy(t,e,n){let r=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Zr(r),new Error(r)}function Ze(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||oy(e,i,r)}function Me(t,e){return t}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ay{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n($t.UNAUTHENTICATED)))}shutdown(){}}class W1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Q1{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gr,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gr)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string",31837,{l:r}),new ay(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class Y1{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class X1{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Y1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const r=s=>{s.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jd(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Z1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Hf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Z1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function He(t,e){return t<e?-1:t>e?1:0}function $c(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return dc(i)===dc(s)?He(i,s):dc(i)?1:-1}return He(t.length,e.length)}const eT=55296,tT=57343;function dc(t){const e=t.charCodeAt(0);return e>=eT&&e<=tT}function So(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const Bd="__name__";class cr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ke(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=cr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return He(e.length,n.length)}static compareSegments(e,n){const r=cr.isNumericId(e),i=cr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?cr.extractNumericId(e).compare(cr.extractNumericId(n)):$c(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class at extends cr{construct(e,n,r){return new at(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const nT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends cr{construct(e,n,r){return new qt(e,n,r)}static isValidIdentifier(e){return nT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bd}static keyField(){return new qt([Bd])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ie(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ie(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ie(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ie(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(at.fromString(e))}static fromName(e){return new Re(at.fromString(e).popFirst(5))}static empty(){return new Re(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new at(e.slice()))}}function ly(t,e,n){if(!n)throw new Ie(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rT(t,e,n,r){if(e===!0&&r===!0)throw new Ie(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qd(t){if(!Re.isDocumentKey(t))throw new Ie(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hd(t){if(Re.isDocumentKey(t))throw new Ie(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function Zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(t);throw new Ie(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ka(t,e){if(!uy(t))throw new Ie(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ie(ve.INVALID_ARGUMENT,n);return!0}const zd=-62135596800,Kd=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Kd);return new lt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zd)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kd}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ka(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:wt("string",lt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new lt(0,0))}static max(){return new De(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ka=-1;function iT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new Mi(i,Re.empty(),e)}function sT(t){return new Mi(t.readTime,t.key,ka)}class Mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mi(De.min(),Re.empty(),ka)}static max(){return new Mi(De.max(),Re.empty(),ka)}}function oT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}const aT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Lo(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==aT)throw t;Te("LocalStore","Unexpectedly lost primary lease")}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):me.reject(n)}static resolve(e){return new me(((n,r)=>{n(e)}))}static reject(e){return new me(((n,r)=>{r(e)}))}static waitFor(e){return new me(((n,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(e){let n=me.resolve(!1);for(const r of e)n=n.next((i=>i?me.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new me(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next((c=>{o[u]=c,++a,a===s&&r(o)}),(c=>i(c)))}}))}static doWhile(e,n){return new me(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function uT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(t){return t.name==="IndexedDbTransactionError"}class Iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Iu.ce=-1;const Kf=-1;function Su(t){return t==null}function Bl(t){return t===0&&1/t==-1/0}function cT(t){return typeof t=="number"&&Number.isInteger(t)&&!Bl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const cy="";function fT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$d(e)),e=hT(t.get(n),e);return $d(e)}function hT(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case cy:n+="";break;default:n+=s}}return n}function $d(t){return t+cy+""}function Gd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class dt{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ll(this.root,e,this.comparator,!0)}}class ll{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Bt.RED,this.left=i??Bt.EMPTY,this.right=s??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wd(this.data.getIterator())}getIteratorFrom(e){return new Wd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class Wd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class An{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new An([])}unionWith(e){let n=new kt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class hy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hy("Invalid base64 string: "+s):s}})(e);return new Ht(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const dT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=dT.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ui(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}const dy="server_timestamp",py="__type__",gy="__previous_value__",my="__local_write_time__";function $f(t){return(t?.mapValue?.fields||{})[py]?.stringValue===dy}function Ru(t){const e=t.mapValue.fields[gy];return $f(e)?Ru(e):e}function Na(t){const e=Vi(t.mapValue.fields[my].timestampValue);return new lt(e.seconds,e.nanos)}class pT{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const ql="(default)";class xa{constructor(e,n){this.projectId=e,this.database=n||ql}static empty(){return new xa("","")}get isDefaultDatabase(){return this.database===ql}isEqual(e){return e instanceof xa&&e.projectId===this.projectId&&e.database===this.database}}const yy="__type__",gT="__max__",ul={mapValue:{}},vy="__vector__",Hl="value";function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$f(t)?4:yT(t)?9007199254740991:mT(t)?10:11:ke(28295,{value:t})}function wr(t,e){if(t===e)return!0;const n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Na(t).isEqual(Na(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Vi(i.timestampValue),a=Vi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Ui(i.bytesValue).isEqual(Ui(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return vt(i.geoPointValue.latitude)===vt(s.geoPointValue.latitude)&&vt(i.geoPointValue.longitude)===vt(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return vt(i.integerValue)===vt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=vt(i.doubleValue),a=vt(s.doubleValue);return o===a?Bl(o)===Bl(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return So(t.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Gd(o)!==Gd(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!wr(o[l],a[l])))return!1;return!0})(t,e);default:return ke(52216,{left:t})}}function Da(t,e){return(t.values||[]).find((n=>wr(n,e)))!==void 0}function Ro(t,e){if(t===e)return 0;const n=Fi(t),r=Fi(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=vt(s.integerValue||s.doubleValue),l=vt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return Qd(t.timestampValue,e.timestampValue);case 4:return Qd(Na(t),Na(e));case 5:return $c(t.stringValue,e.stringValue);case 6:return(function(s,o){const a=Ui(s),l=Ui(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=He(a[u],l[u]);if(c!==0)return c}return He(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=He(vt(s.latitude),vt(o.latitude));return a!==0?a:He(vt(s.longitude),vt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Yd(t.arrayValue,e.arrayValue);case 10:return(function(s,o){const a=s.fields||{},l=o.fields||{},u=a[Hl]?.arrayValue,c=l[Hl]?.arrayValue,h=He(u?.values?.length||0,c?.values?.length||0);return h!==0?h:Yd(u,c)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===ul.mapValue&&o===ul.mapValue)return 0;if(s===ul.mapValue)return 1;if(o===ul.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=$c(l[h],c[h]);if(d!==0)return d;const p=Ro(a[l[h]],u[c[h]]);if(p!==0)return p}return He(l.length,c.length)})(t.mapValue,e.mapValue);default:throw ke(23264,{he:n})}}function Qd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=Vi(t),r=Vi(e),i=He(n.seconds,r.seconds);return i!==0?i:He(n.nanos,r.nanos)}function Yd(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ro(n[i],r[i]);if(s)return s}return He(n.length,r.length)}function Oo(t){return Gc(t)}function Gc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Vi(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ui(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Re.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Gc(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Gc(n.fields[o])}`;return i+"}"})(t.mapValue):ke(61005,{value:t})}function _l(t){switch(Fi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ru(t);return e?16+_l(e):16;case 5:return 2*t.stringValue.length;case 6:return Ui(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+_l(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Hi(r.fields,((s,o)=>{i+=s.length+_l(o)})),i})(t.mapValue);default:throw ke(13486,{value:t})}}function Wc(t){return!!t&&"integerValue"in t}function Gf(t){return!!t&&"arrayValue"in t}function Xd(t){return!!t&&"nullValue"in t}function Jd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bl(t){return!!t&&"mapValue"in t}function mT(t){return(t?.mapValue?.fields||{})[yy]?.stringValue===vy}function ga(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ga(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return{...t}}function yT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gT}class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=qt.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ga(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new dn(ga(this.value))}}function _y(t){const e=[];return Hi(t.fields,((n,r)=>{const i=new qt([n]);if(bl(r)){const s=_y(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new An(e)}class Wt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Wt(e,0,De.min(),De.min(),De.min(),dn.empty(),0)}static newFoundDocument(e,n,r,i){return new Wt(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new Wt(e,2,n,De.min(),De.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,De.min(),De.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zl{constructor(e,n){this.position=e,this.inclusive=n}}function Zd(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Re.comparator(Re.fromName(o.referenceValue),n.key):r=Ro(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ep(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wr(t.position[n],e.position[n]))return!1;return!0}class Kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function vT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class by{}class Ct extends by{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bT(e,n,r):n==="array-contains"?new wT(e,r):n==="in"?new AT(e,r):n==="not-in"?new IT(e,r):n==="array-contains-any"?new ST(e,r):new Ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ET(e,r):new TT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends by{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ar(e,n)}matches(e){return Ey(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ey(t){return t.op==="and"}function Ty(t){return _T(t)&&Ey(t)}function _T(t){for(const e of t.filters)if(e instanceof Ar)return!1;return!0}function Qc(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+Oo(t.value);if(Ty(t))return t.filters.map((e=>Qc(e))).join(",");{const e=t.filters.map((n=>Qc(n))).join(",");return`${t.op}(${e})`}}function wy(t,e){return t instanceof Ct?(function(r,i){return i instanceof Ct&&r.op===i.op&&r.field.isEqual(i.field)&&wr(r.value,i.value)})(t,e):t instanceof Ar?(function(r,i){return i instanceof Ar&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&wy(o,i.filters[a])),!0):!1})(t,e):void ke(19439)}function Ay(t){return t instanceof Ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${Oo(n.value)}`})(t):t instanceof Ar?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ay).join(" ,")+"}"})(t):"Filter"}class bT extends Ct{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class ET extends Ct{constructor(e,n){super(e,"in",n),this.keys=Iy("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class TT extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=Iy("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Iy(t,e){return(e.arrayValue?.values||[]).map((n=>Re.fromName(n.referenceValue)))}class wT extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gf(n)&&Da(n.arrayValue,this.value)}}class AT extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class IT extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Da(this.value.arrayValue,n)}}class ST extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Da(this.value.arrayValue,r)))}}class RT{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function tp(t,e=null,n=[],r=[],i=null,s=null,o=null){return new RT(t,e,n,r,i,s,o)}function Wf(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Qc(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Oo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Oo(r))).join(",")),e.Te=n}return e.Te}function Qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ep(t.startAt,e.startAt)&&ep(t.endAt,e.endAt)}function Yc(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ou{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OT(t,e,n,r,i,s,o,a){return new Ou(t,e,n,r,i,s,o,a)}function Yf(t){return new Ou(t)}function np(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PT(t){return t.collectionGroup!==null}function ma(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(qt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Kl(s,r))})),n.has(qt.keyField().canonicalString())||e.Ie.push(new Kl(qt.keyField(),r))}return e.Ie}function mr(t){const e=Me(t);return e.Ee||(e.Ee=CT(e,ma(t))),e.Ee}function CT(t,e){if(t.limitType==="F")return tp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Kl(i.field,s)}));const n=t.endAt?new zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zl(t.startAt.position,t.startAt.inclusive):null;return tp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xc(t,e,n){return new Ou(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pu(t,e){return Qf(mr(t),mr(e))&&t.limitType===e.limitType}function Sy(t){return`${Wf(mr(t))}|lt:${t.limitType}`}function so(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Ay(i))).join(", ")}]`),Su(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Oo(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Oo(i))).join(",")),`Target(${r})`})(mr(t))}; limitType=${t.limitType})`}function Cu(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of ma(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const u=Zd(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,ma(r),i)||r.endAt&&!(function(o,a,l){const u=Zd(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,ma(r),i))})(t,e)}function kT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ry(t){return(e,n)=>{let r=!1;for(const i of ma(t)){const s=NT(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NT(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):(function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ro(l,u):ke(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:t.dir})}}class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return fy(this.inner)}size(){return this.innerSize}}const xT=new dt(Re.comparator);function ei(){return xT}const Oy=new dt(Re.comparator);function na(...t){let e=Oy;for(const n of t)e=e.insert(n.key,n);return e}function Py(t){let e=Oy;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function fs(){return ya()}function Cy(){return ya()}function ya(){return new Os((t=>t.toString()),((t,e)=>t.isEqual(e)))}const DT=new dt(Re.comparator),LT=new kt(Re.comparator);function ze(...t){let e=LT;for(const n of t)e=e.add(n);return e}const MT=new kt(He);function VT(){return MT}function Xf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(e)?"-0":e}}function ky(t){return{integerValue:""+t}}function UT(t,e){return cT(e)?ky(e):Xf(t,e)}class ku{constructor(){this._=void 0}}function FT(t,e,n){return t instanceof $l?(function(i,s){const o={fields:{[py]:{stringValue:dy},[my]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$f(s)&&(s=Ru(s)),s&&(o.fields[gy]=s),{mapValue:o}})(n,e):t instanceof La?xy(t,e):t instanceof Ma?Dy(t,e):(function(i,s){const o=Ny(i,s),a=rp(o)+rp(i.Ae);return Wc(o)&&Wc(i.Ae)?ky(a):Xf(i.serializer,a)})(t,e)}function jT(t,e,n){return t instanceof La?xy(t,e):t instanceof Ma?Dy(t,e):n}function Ny(t,e){return t instanceof Gl?(function(r){return Wc(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class $l extends ku{}class La extends ku{constructor(e){super(),this.elements=e}}function xy(t,e){const n=Ly(e);for(const r of t.elements)n.some((i=>wr(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Ma extends ku{constructor(e){super(),this.elements=e}}function Dy(t,e){let n=Ly(e);for(const r of t.elements)n=n.filter((i=>!wr(i,r)));return{arrayValue:{values:n}}}class Gl extends ku{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rp(t){return vt(t.integerValue||t.doubleValue)}function Ly(t){return Gf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BT(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof La&&i instanceof La||r instanceof Ma&&i instanceof Ma?So(r.elements,i.elements,wr):r instanceof Gl&&i instanceof Gl?wr(r.Ae,i.Ae):r instanceof $l&&i instanceof $l})(t.transform,e.transform)}class qT{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function El(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nu{}function My(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jf(t.key,Vn.none()):new $a(t.key,t.data,Vn.none());{const n=t.data,r=dn.empty();let i=new kt(qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zi(t.key,r,new An(i.toArray()),Vn.none())}}function HT(t,e,n){t instanceof $a?(function(i,s,o){const a=i.value.clone(),l=sp(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof zi?(function(i,s,o){if(!El(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sp(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Vy(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function va(t,e,n,r){return t instanceof $a?(function(s,o,a,l){if(!El(s.precondition,o))return a;const u=s.value.clone(),c=op(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof zi?(function(s,o,a,l){if(!El(s.precondition,o))return a;const u=op(s.fieldTransforms,l,o),c=o.data;return c.setAll(Vy(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(s,o,a){return El(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function zT(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Ny(r.transform,i||null);s!=null&&(n===null&&(n=dn.empty()),n.set(r.field,s))}return n||null}function ip(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&So(r,i,((s,o)=>BT(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $a extends Nu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zi extends Nu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Vy(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function sp(t,e,n){const r=new Map;Ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,jT(o,a,n[i]))}return r}function op(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,FT(s,o,e))}return r}class Jf extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KT extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $T{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&HT(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Cy();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=My(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,((n,r)=>ip(n,r)))&&So(this.baseMutations,e.baseMutations,((n,r)=>ip(n,r)))}}class Zf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return DT})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Zf(e,n,r,i)}}class GT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WT{constructor(e,n){this.count=e,this.unchangedNames=n}}var Tt,$e;function QT(t){switch(t){case ve.OK:return ke(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function Uy(t){if(t===void 0)return Zr("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Tt.OK:return ve.OK;case Tt.CANCELLED:return ve.CANCELLED;case Tt.UNKNOWN:return ve.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return ve.INTERNAL;case Tt.UNAVAILABLE:return ve.UNAVAILABLE;case Tt.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Tt.NOT_FOUND:return ve.NOT_FOUND;case Tt.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Tt.ABORTED:return ve.ABORTED;case Tt.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Tt.DATA_LOSS:return ve.DATA_LOSS;default:return ke(39323,{code:t})}}($e=Tt||(Tt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function YT(){return new TextEncoder}const XT=new Ni([4294967295,4294967295],0);function ap(t){const e=YT().encode(t),n=new ey;return n.update(e),new Uint8Array(n.digest())}function lp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ni([n,r],0),new Ni([i,s],0)]}class eh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ni.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Ni.fromNumber(r)));return i.compare(XT)===1&&(i=new Ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ap(e),[r,i]=lp(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new eh(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=ap(e),[r,i]=lp(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xu(De.min(),i,new dt(He),ei(),ze())}}class Ga{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ga(r,n,ze(),ze(),ze())}}class Tl{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Fy{constructor(e,n){this.targetId=e,this.Ce=n}}class jy{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class up{constructor(){this.ve=0,this.Fe=cp(),this.Me=Ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),r=ze();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ke(38017,{changeType:s})}})),new Ga(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=cp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JT{constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.Je=cl(),this.He=cl(),this.Ye=new dt(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Yc(s))if(r===0){const o=new Re(s.path);this.et(n,o,Wt.newNoDocument(o,De.min()))}else Ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ui(r).toUint8Array()}catch(l){if(l instanceof hy)return Io("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new eh(o,i,s)}catch(l){return Io(l instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Yc(a.target)){const l=new Re(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Wt.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=ze();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new xu(e,n,this.Ye,this.je,r);return this.je=ei(),this.Je=cl(),this.He=cl(),this.Ye=new dt(He),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new up,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new kt(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new kt(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new up),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cl(){return new dt(Re.comparator)}function cp(){return new dt(Re.comparator)}const ZT={asc:"ASCENDING",desc:"DESCENDING"},ew={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tw={and:"AND",or:"OR"};class nw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jc(t,e){return t.useProto3Json||Su(e)?e:{value:e}}function Wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function By(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rw(t,e){return Wl(t,e.toTimestamp())}function yr(t){return Ze(!!t,49232),De.fromTimestamp((function(n){const r=Vi(n);return new lt(r.seconds,r.nanos)})(t))}function th(t,e){return Zc(t,e).canonicalString()}function Zc(t,e){const n=(function(i){return new at(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function qy(t){const e=at.fromString(t);return Ze(Gy(e),10190,{key:e.toString()}),e}function ef(t,e){return th(t.databaseId,e.path)}function pc(t,e){const n=qy(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(zy(n))}function Hy(t,e){return th(t.databaseId,e)}function iw(t){const e=qy(t);return e.length===4?at.emptyPath():zy(e)}function tf(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zy(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fp(t,e,n){return{name:ef(t,e),fields:n.value.mapValue.fields}}function sw(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ke(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,c){return u.useProto3Json?(Ze(c===void 0||typeof c=="string",58123),Ht.fromBase64String(c||"")):(Ze(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Ht.fromUint8Array(c||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const c=u.code===void 0?ve.UNKNOWN:Uy(u.code);return new Ie(c,u.message||"")})(o);n=new jy(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pc(t,r.document.name),s=yr(r.document.updateTime),o=r.document.createTime?yr(r.document.createTime):De.min(),a=new dn({mapValue:{fields:r.document.fields}}),l=Wt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Tl(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pc(t,r.document),s=r.readTime?yr(r.readTime):De.min(),o=Wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Tl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pc(t,r.document),s=r.removedTargetIds||[];n=new Tl([],s,i,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new WT(i,s),a=r.targetId;n=new Fy(a,o)}}return n}function ow(t,e){let n;if(e instanceof $a)n={update:fp(t,e.key,e.value)};else if(e instanceof Jf)n={delete:ef(t,e.key)};else if(e instanceof zi)n={update:fp(t,e.key,e.data),updateMask:gw(e.fieldMask)};else{if(!(e instanceof KT))return ke(16599,{Vt:e.type});n={verify:ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof $l)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof La)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ke(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:rw(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ke(27497)})(t,e.precondition)),n}function aw(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?yr(i.updateTime):yr(s);return o.isEqual(De.min())&&(o=yr(s)),new qT(o,i.transformResults||[])})(n,e)))):[]}function lw(t,e){return{documents:[Hy(t,e.path)]}}function uw(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hy(t,i);const s=(function(u){if(u.length!==0)return $y(Ar.create(u,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(u){if(u.length!==0)return u.map((c=>(function(d){return{field:oo(d.field),direction:hw(d.dir)}})(c)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Jc(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function cw(t){let e=iw(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ze(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=(function(h){const d=Ky(h);return d instanceof Ar&&Ty(d)?d.getFilters():[d]})(n.where));let o=[];n.orderBy&&(o=(function(h){return h.map((d=>(function(T){return new Kl(ao(T.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(d)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let d;return d=typeof h=="object"?h.value:h,Su(d)?null:d})(n.limit));let l=null;n.startAt&&(l=(function(h){const d=!!h.before,p=h.values||[];return new zl(p,d)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const d=!h.before,p=h.values||[];return new zl(p,d)})(n.endAt)),OT(e,i,o,s,a,"F",l,u)}function fw(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ky(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ao(n.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ao(n.unaryFilter.field);return Ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ao(n.unaryFilter.field);return Ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ao(n.unaryFilter.field);return Ct.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ct.create(ao(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ar.create(n.compositeFilter.filters.map((r=>Ky(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(t):ke(30097,{filter:t})}function hw(t){return ZT[t]}function dw(t){return ew[t]}function pw(t){return tw[t]}function oo(t){return{fieldPath:t.canonicalString()}}function ao(t){return qt.fromServerFormat(t.fieldPath)}function $y(t){return t instanceof Ct?(function(n){if(n.op==="=="){if(Jd(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(Xd(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jd(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(Xd(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:dw(n.op),value:n.value}}})(t):t instanceof Ar?(function(n){const r=n.getFilters().map((i=>$y(i)));return r.length===1?r[0]:{compositeFilter:{op:pw(n.op),filters:r}}})(t):ke(54877,{filter:t})}function gw(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Gy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Ri{constructor(e,n,r,i,s=De.min(),o=De.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mw{constructor(e){this.yt=e}}function yw(t){const e=cw({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}class vw{constructor(){this.Cn=new _w}addToCollectionParentIndex(e,n){return this.Cn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve(Mi.min())}updateCollectionGroup(e,n,r){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class _w{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(at.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(at.comparator)).toArray()}}const hp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wy=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(Wy,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}const dp="LruGarbageCollector",bw=1048576;function pp([t,e],[n,r]){const i=He(t,n);return i===0?He(e,r):i}class Ew{constructor(e){this.Ir=e,this.buffer=new kt(pp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Tw{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(dp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?Te(dp,"Ignoring IndexedDB error during garbage collection: ",n):await Lo(n)}await this.Vr(3e5)}))}}class ww{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return me.resolve(Iu.ce);const r=new Ew(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(hp)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hp):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,n)))).next((h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),io()<=qe.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h}))))}}function Aw(t,e){return new ww(t,e)}class Iw{constructor(){this.changes=new Os((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?me.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Sw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Rw{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&va(r.mutation,i,An.empty(),lt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ze()){const i=fs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=na();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=fs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ze())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,i){let s=ei();const o=ya(),a=(function(){return ya()})();return n.forEach(((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof zi)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),va(c.mutation,u,c.mutation.getFieldMask(),lt.now())):o.set(u.key,An.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,c)=>o.set(u,c))),n.forEach(((u,c)=>a.set(u,new Sw(c,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=ya();let i=new dt(((o,a)=>o-a)),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||An.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||ze()).add(l);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Cy();c.forEach((d=>{if(!s.has(d)){const p=My(n.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return me.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):me.resolve(fs());let a=ka,l=s;return o.next((u=>me.forEach(u,((c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?me.resolve():this.remoteDocumentCache.getEntry(e,c).next((d=>{l=l.insert(c,d)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,ze()))).next((c=>({batchId:a,changes:Py(c)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next((r=>{let i=na();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=na();return this.indexManager.getCollectionParents(e,s).next((a=>me.forEach(a,(l=>{const u=(function(h,d){return new Ou(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((c=>{c.forEach(((h,d)=>{o=o.insert(h,d)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Wt.newInvalidDocument(c)))}));let a=na();return o.forEach(((l,u)=>{const c=s.get(l);c!==void 0&&va(c.mutation,u,An.empty(),lt.now()),Cu(n,u)&&(a=a.insert(l,u))})),a}))}}class Ow{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return me.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:yr(i.createTime)}})(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:yw(i.bundledQuery),readTime:yr(i.readTime)}})(n)),me.resolve()}}class Pw{constructor(){this.overlays=new dt(Re.comparator),this.qr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fs();return me.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),me.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),me.resolve()}getOverlaysForCollection(e,n,r){const i=fs(),s=n.length+1,o=new Re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return me.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new dt(((u,c)=>u-c));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=fs(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=fs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,c)=>a.set(u,c))),!(a.size()>=i)););return me.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GT(n,r));let s=this.qr.get(n);s===void 0&&(s=ze(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}class Cw{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}class nh{constructor(){this.Qr=new kt(Lt.$r),this.Ur=new kt(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Lt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Lt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Re(new at([])),r=new Lt(n,e),i=new Lt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Re(new at([])),r=new Lt(n,e),i=new Lt(n,e+1);let s=ze();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new Lt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Re.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||Re.comparator(e.key,n.key)}}class kw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Lt.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $T(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return me.resolve(o)}lookupMutationBatch(e,n){return me.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Kf:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Lt(n,0),i=new Lt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(He);return n.forEach((i=>{const s=new Lt(i,0),o=new Lt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),me.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Re.isDocumentKey(s)||(s=s.child(""));const o=new Lt(new Re(s),0);let a=new kt(He);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)}),o),me.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return me.forEach(n.mutations,(i=>{const s=new Lt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Lt(n,0),i=this.Zr.firstAfterOrEqual(r);return me.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Nw{constructor(e){this.ri=e,this.docs=(function(){return new dt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return me.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=ei();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))})),me.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ei();const o=n.path,a=new Re(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||oT(sT(c),r)<=0||(i.has(c.key)||Cu(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return me.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ke(9500)}ii(e,n){return me.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new xw(this)}getSize(e){return me.resolve(this.size)}}class xw extends Iw{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),me.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Dw{constructor(e){this.persistence=e,this.si=new Os((n=>Wf(n)),Qf),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new nh,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),me.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Po(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.Pr(n),me.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),me.waitFor(s).next((()=>i))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return me.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),me.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),me.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return me.resolve(r)}containsKey(e,n){return me.resolve(this._i.containsKey(n))}}class Qy{constructor(e,n){this.ui={},this.overlays={},this.ci=new Iu(0),this.li=!1,this.li=!0,this.hi=new Cw,this.referenceDelegate=e(this),this.Pi=new Dw(this),this.indexManager=new vw,this.remoteDocumentCache=(function(i){return new Nw(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new mw(n),this.Ii=new Ow(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Pw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kw(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const i=new Lw(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return me.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Lw extends lT{constructor(e){super(),this.currentSequenceNumber=e}}class rh{constructor(e){this.persistence=e,this.Ri=new nh,this.Vi=null}static mi(e){return new rh(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),me.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(r=>{const i=Re.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,De.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ql{constructor(e,n){this.persistence=e,this.pi=new Os((r=>fT(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Aw(this,n)}static mi(e,n){return new Ql(e,n)}Ei(){}di(e){return me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return me.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?me.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,s.removeEntry(o,De.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),me.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),me.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),me.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_l(e.data.value)),n}br(e,n,r){return me.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return me.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ih{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ze(),i=ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ih(e,n.fromCache,r,i)}}class Mw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Vw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return R0()?8:uT(Jt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new Mw;return this.Ss(e,n,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(io()<=qe.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",so(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(io()<=qe.DEBUG&&Te("QueryEngine","Query:",so(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(io()<=qe.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",so(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):me.resolve())}ys(e,n){if(np(n))return me.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Xc(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=ze(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Xc(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,i){return np(n)||i.isEqual(De.min())?me.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?me.resolve(null):(io()<=qe.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),so(n)),this.vs(e,o,n,iT(i,ka)).next((a=>a)))}))}Ds(e,n){let r=new kt(Ry(e));return n.forEach(((i,s)=>{Cu(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return io()<=qe.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",so(n)),this.ps.getDocumentsMatchingQuery(e,n,Mi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}const sh="LocalStore",Uw=3e8;class Fw{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new dt(He),this.xs=new Os((s=>Wf(s)),Qf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function jw(t,e,n,r){return new Fw(t,e,n,r)}async function Yy(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=ze();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function Bw(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,c){const h=u.batch,d=h.keys();let p=me.resolve();return d.forEach((T=>{p=p.next((()=>c.getEntry(l,T))).next((_=>{const v=u.docVersions.get(T);Ze(v!==null,48541),_.version.compareTo(v)<0&&(h.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),c.addEntry(_)))}))})),p.next((()=>a.mutationQueue.removeMutationBatch(l,h)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=ze();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Xy(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function qw(t,e){const n=Me(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Pi.removeMatchingKeys(s,c.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(s,c.addedDocuments,h))));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Ht.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),(function(_,v,b){return _.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=Uw?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0})(d,p,c)&&a.push(n.Pi.updateTargetData(s,p))}));let l=ei(),u=ze();if(e.documentUpdates.forEach((c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))})),a.push(Hw(s,o,e.documentUpdates).next((c=>{l=c.ks,u=c.qs}))),!r.isEqual(De.min())){const c=n.Pi.getLastRemoteSnapshotVersion(s).next((h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(c)}return me.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(n.Ms=i,s)))}function Hw(t,e,n){let r=ze(),i=ze();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=ei();return n.forEach(((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Te(sh,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function zw(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Kf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Kw(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,me.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new Ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function nf(t,e,n){const r=Me(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Mo(o))throw o;Te(sh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function gp(t,e,n){const r=Me(t);let i=De.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,c){const h=Me(l),d=h.xs.get(c);return d!==void 0?me.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,c)})(r,o,mr(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:De.min(),n?s:ze()))).next((a=>($w(r,kT(e),a),{documents:a,Qs:s})))))}function $w(t,e,n){let r=t.Os.get(e)||De.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class mp{constructor(){this.activeTargetIds=VT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gw{constructor(){this.Mo=new mp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ww{Oo(e){}shutdown(){}}const yp="ConnectivityMonitor";class vp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(yp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(yp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fl=null;function rf(){return fl===null?fl=(function(){return 268435456+Math.round(2147483648*Math.random())})():fl++,"0x"+fl.toString(16)}const gc="RestConnection",Qw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yw{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ql?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=rf(),a=this.zo(e,n.toUriEncodedString());Te(gc,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),c=Ss(u);return this.Jo(e,a,l,r,c).then((h=>(Te(gc,`Received RPC '${e}' ${o}: `,h),h)),(h=>{throw Io(gc,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Do})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=Qw[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class Xw{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Kt="WebChannelConnection";class Jw extends Yw{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=rf();return new Promise(((a,l)=>{const u=new ty;u.setWithCredentials(!0),u.listenOnce(ny.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case vl.NO_ERROR:const h=u.getResponseJson();Te(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case vl.TIMEOUT:Te(Kt,`RPC '${e}' ${o} timed out`),l(new Ie(ve.DEADLINE_EXCEEDED,"Request time out"));break;case vl.HTTP_ERROR:const d=u.getStatus();if(Te(Kt,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const T=p?.error;if(T&&T.status&&T.message){const _=(function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(E)>=0?E:ve.UNKNOWN})(T.status);l(new Ie(_,T.message))}else l(new Ie(ve.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ie(ve.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Te(Kt,`RPC '${e}' ${o} completed.`)}}));const c=JSON.stringify(i);Te(Kt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)}))}T_(e,n,r){const i=rf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sy(),a=iy(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Te(Kt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);this.I_(h);let d=!1,p=!1;const T=new Xw({Yo:v=>{p?Te(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(d||(Te(Kt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),Te(Kt,`RPC '${e}' stream ${i} sending:`,v),h.send(v))},Zo:()=>h.close()}),_=(v,b,E)=>{v.listen(b,(m=>{try{E(m)}catch(g){setTimeout((()=>{throw g}),0)}}))};return _(h,ta.EventType.OPEN,(()=>{p||(Te(Kt,`RPC '${e}' stream ${i} transport opened.`),T.o_())})),_(h,ta.EventType.CLOSE,(()=>{p||(p=!0,Te(Kt,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(h))})),_(h,ta.EventType.ERROR,(v=>{p||(p=!0,Io(Kt,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),T.a_(new Ie(ve.UNAVAILABLE,"The operation could not be completed")))})),_(h,ta.EventType.MESSAGE,(v=>{if(!p){const b=v.data[0];Ze(!!b,16349);const E=b,m=E?.error||E[0]?.error;if(m){Te(Kt,`RPC '${e}' stream ${i} received error:`,m);const g=m.status;let w=(function(A){const P=Tt[A];if(P!==void 0)return Uy(P)})(g),x=m.message;w===void 0&&(w=ve.INTERNAL,x="Unknown error status: "+g+" with message "+m.message),p=!0,T.a_(new Ie(w,x)),h.close()}else Te(Kt,`RPC '${e}' stream ${i} received:`,b),T.u_(b)}})),_(a,ry.STAT_EVENT,(v=>{v.stat===Kc.PROXY?Te(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===Kc.NOPROXY&&Te(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function mc(){return typeof document<"u"?document:null}function Du(t){return new nw(t,!0)}class Jy{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const _p="PersistentStream";class Zy{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Zr(n.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ie(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(_p,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Te(_p,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Zw extends Zy{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sw(this.serializer,e),r=(function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?yr(o.readTime):De.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=tf(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=Yc(l)?{documents:lw(s,l)}:{query:uw(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=By(s,o.resumeToken);const u=Jc(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Wl(s,o.snapshotVersion.toTimestamp());const u=Jc(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=fw(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=tf(this.serializer),n.removeTarget=e,this.q_(n)}}class eA extends Zy{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aw(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=tf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>ow(this.serializer,r)))};this.q_(n)}}class tA{}class nA extends tA{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ie(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,Zc(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(ve.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Zc(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(ve.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zr(n),this.aa=!1):Te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Es="RemoteStore";class iA{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Ps(this)&&(Te(Es,"Restarting streams for network reachability change."),await(async function(l){const u=Me(l);u.Ea.add(4),await Wa(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Lu(u)})(this))}))})),this.Ra=new rA(r,i)}}async function Lu(t){if(Ps(t))for(const e of t.da)await e(!0)}async function Wa(t){for(const e of t.da)await e(!1)}function ev(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),uh(n)?lh(n):Vo(n).O_()&&ah(n,e))}function oh(t,e){const n=Me(t),r=Vo(n);n.Ia.delete(e),r.O_()&&tv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ps(n)&&n.Ra.set("Unknown"))}function ah(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vo(t).Y_(e)}function tv(t,e){t.Va.Ue(e),Vo(t).Z_(e)}function lh(t){t.Va=new JT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Vo(t).start(),t.Ra.ua()}function uh(t){return Ps(t)&&!Vo(t).x_()&&t.Ia.size>0}function Ps(t){return Me(t).Ea.size===0}function nv(t){t.Va=void 0}async function sA(t){t.Ra.set("Online")}async function oA(t){t.Ia.forEach(((e,n)=>{ah(t,e)}))}async function aA(t,e){nv(t),uh(t)?(t.Ra.ha(e),lh(t)):t.Ra.set("Unknown")}async function lA(t,e,n){if(t.Ra.set("Online"),e instanceof jy&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){Te(Es,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yl(t,r)}else if(e instanceof Tl?t.Va.Ze(e):e instanceof Fy?t.Va.st(e):t.Va.tt(e),!n.isEqual(De.min()))try{const r=await Xy(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(Ht.EMPTY_BYTE_STRING,c.snapshotVersion)),tv(s,l);const h=new Ri(c.target,l,u,c.sequenceNumber);ah(s,h)})),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){Te(Es,"Failed to raise snapshot:",r),await Yl(t,r)}}async function Yl(t,e,n){if(!Mo(e))throw e;t.Ea.add(1),await Wa(t),t.Ra.set("Offline"),n||(n=()=>Xy(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te(Es,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Lu(t)}))}function rv(t,e){return e().catch((n=>Yl(t,n,e)))}async function Mu(t){const e=Me(t),n=ji(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kf;for(;uA(e);)try{const i=await zw(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,cA(e,i)}catch(i){await Yl(e,i)}iv(e)&&sv(e)}function uA(t){return Ps(t)&&t.Ta.length<10}function cA(t,e){t.Ta.push(e);const n=ji(t);n.O_()&&n.X_&&n.ea(e.mutations)}function iv(t){return Ps(t)&&!ji(t).x_()&&t.Ta.length>0}function sv(t){ji(t).start()}async function fA(t){ji(t).ra()}async function hA(t){const e=ji(t);for(const n of t.Ta)e.ea(n.mutations)}async function dA(t,e,n){const r=t.Ta.shift(),i=Zf.from(r,e,n);await rv(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Mu(t)}async function pA(t,e){e&&ji(t).X_&&await(async function(r,i){if((function(o){return QT(o)&&o!==ve.ABORTED})(i.code)){const s=r.Ta.shift();ji(r).B_(),await rv(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Mu(r)}})(t,e),iv(t)&&sv(t)}async function bp(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),Te(Es,"RemoteStore received new credentials");const r=Ps(n);n.Ea.add(3),await Wa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Lu(n)}async function gA(t,e){const n=Me(t);e?(n.Ea.delete(2),await Lu(n)):e||(n.Ea.add(2),await Wa(n),n.Ra.set("Unknown"))}function Vo(t){return t.ma||(t.ma=(function(n,r,i){const s=Me(n);return s.sa(),new Zw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:sA.bind(null,t),t_:oA.bind(null,t),r_:aA.bind(null,t),H_:lA.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),uh(t)?lh(t):t.Ra.set("Unknown")):(await t.ma.stop(),nv(t))}))),t.ma}function ji(t){return t.fa||(t.fa=(function(n,r,i){const s=Me(n);return s.sa(),new eA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fA.bind(null,t),r_:pA.bind(null,t),ta:hA.bind(null,t),na:dA.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Mu(t)):(await t.fa.stop(),t.Ta.length>0&&(Te(Es,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class ch{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ch(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fh(t,e){if(Zr("AsyncQueue",`${e}: ${t}`),Mo(t))return new Ie(ve.UNAVAILABLE,`${e}: ${t}`);throw t}class vo{static emptySet(e){return new vo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=na(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Ep{constructor(){this.ga=new dt(Re.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Co{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Co(e,n,vo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class mA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yA{constructor(){this.queries=Tp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Me(n),s=i.queries;i.queries=Tp(),s.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new Ie(ve.ABORTED,"Firestore shutting down"))}}function Tp(){return new Os((t=>Sy(t)),Pu)}async function ov(t,e){const n=Me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new mA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=fh(o,`Initialization of query '${so(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&hh(n)}async function av(t,e){const n=Me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vA(t,e){const n=Me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&hh(n)}function _A(t,e,n){const r=Me(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function hh(t){t.Ca.forEach((e=>{e.next()}))}var sf,wp;(wp=sf||(sf={})).Ma="default",wp.Cache="cache";class lv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sf.Cache}}class uv{constructor(e){this.key=e}}class cv{constructor(e){this.key=e}}class bA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=Ry(e),this.tu=new vo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ep,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((c,h)=>{const d=i.get(c),p=Cu(this.query,h)?h:null,T=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;d&&p?d.data.isEqual(p.data)?T!==_&&(r.track({type:3,doc:p}),v=!0):this.su(d,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),v=!0):d&&!p&&(r.track({type:1,doc:d}),v=!0,(l||u)&&(a=!0)),v&&(p?(o=o.add(p),s=_?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((c,h)=>(function(p,T){const _=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:v})}};return _(p)-_(T)})(c.type,h.type)||this.eu(c.doc,h.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Co(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ep,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new cv(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new uv(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dh="SyncEngine";class EA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TA{constructor(e){this.key=e,this.hu=!1}}class wA{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Os((a=>Sy(a)),Pu),this.Iu=new Map,this.Eu=new Set,this.du=new dt(Re.comparator),this.Au=new Map,this.Ru=new nh,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AA(t,e,n=!0){const r=mv(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await fv(r,e,n,!0),i}async function IA(t,e){const n=mv(t);await fv(n,e,!0,!1)}async function fv(t,e,n,r){const i=await Kw(t.localStore,mr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await SA(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ev(t.remoteStore,i),a}async function SA(t,e,n,r,i){t.pu=(h,d,p)=>(async function(_,v,b,E){let m=v.view.ru(b);m.Cs&&(m=await gp(_.localStore,v.query,!1).then((({documents:R})=>v.view.ru(R,m))));const g=E&&E.targetChanges.get(v.targetId),w=E&&E.targetMismatches.get(v.targetId)!=null,x=v.view.applyChanges(m,_.isPrimaryClient,g,w);return Ip(_,v.targetId,x.au),x.snapshot})(t,h,d,p);const s=await gp(t.localStore,e,!0),o=new bA(e,s.Qs),a=o.ru(s.documents),l=Ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Ip(t,n,u.au);const c=new EA(e,n,o);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function RA(t,e,n){const r=Me(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!Pu(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nf(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oh(r.remoteStore,i.targetId),of(r,i.targetId)})).catch(Lo)):(of(r,i.targetId),await nf(r.localStore,i.targetId,!0))}async function OA(t,e){const n=Me(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oh(n.remoteStore,r.targetId))}async function PA(t,e,n){const r=MA(t);try{const i=await(function(o,a){const l=Me(o),u=lt.now(),c=a.reduce(((p,T)=>p.add(T.key)),ze());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let T=ei(),_=ze();return l.Ns.getEntries(p,c).next((v=>{T=v,T.forEach(((b,E)=>{E.isValidDocument()||(_=_.add(b))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,T))).next((v=>{h=v;const b=[];for(const E of a){const m=zT(E,h.get(E.key).overlayedDocument);m!=null&&b.push(new zi(E.key,m,_y(m.value.mapValue),Vn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,b,a)})).next((v=>{d=v;const b=v.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(p,v.batchId,b)}))})).then((()=>({batchId:d.batchId,changes:Py(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new dt(He)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(r,i.batchId,n),await Qa(r,i.changes),await Mu(r.remoteStore)}catch(i){const s=fh(i,"Failed to persist write");n.reject(s)}}async function hv(t,e){const n=Me(t);try{const r=await qw(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(Ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ze(o.hu,14607):i.removedDocuments.size>0&&(Ze(o.hu,42227),o.hu=!1))})),await Qa(n,r,e)}catch(r){await Lo(r)}}function Ap(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=Me(o);l.onlineState=a;let u=!1;l.queries.forEach(((c,h)=>{for(const d of h.Sa)d.va(a)&&(u=!0)})),u&&hh(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CA(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new dt(Re.comparator);o=o.insert(s,Wt.newNoDocument(s,De.min()));const a=ze().add(s),l=new xu(De.min(),new Map,new dt(He),o,a);await hv(r,l),r.du=r.du.remove(s),r.Au.delete(e),ph(r)}else await nf(r.localStore,e,!1).then((()=>of(r,e,n))).catch(Lo)}async function kA(t,e){const n=Me(t),r=e.batch.batchId;try{const i=await Bw(n.localStore,e);pv(n,r,null),dv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qa(n,i)}catch(i){await Lo(i)}}async function NA(t,e,n){const r=Me(t);try{const i=await(function(o,a){const l=Me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next((h=>(Ze(h!==null,37113),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c))).next((()=>l.localDocuments.getDocuments(u,c)))}))})(r.localStore,e);pv(r,e,n),dv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qa(r,i)}catch(i){await Lo(i)}}function dv(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function pv(t,e,n){const r=Me(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function of(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||gv(t,r)}))}function gv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(oh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ph(t))}function Ip(t,e,n){for(const r of n)r instanceof uv?(t.Ru.addReference(r.key,e),xA(t,r)):r instanceof cv?(Te(dh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||gv(t,r.key)):ke(19791,{wu:r})}function xA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Te(dh,"New document in limbo: "+n),t.Eu.add(r),ph(t))}function ph(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Re(at.fromString(e)),r=t.fu.next();t.Au.set(r,new TA(n)),t.du=t.du.insert(n,r),ev(t.remoteStore,new Ri(mr(Yf(n.path)),r,"TargetPurposeLimboResolution",Iu.ce))}}async function Qa(t,e,n){const r=Me(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const c=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,c?"current":"not-current")}if(u){i.push(u);const c=ih.As(l.targetId,u);s.push(c)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(l,u){const c=Me(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>me.forEach(u,(d=>me.forEach(d.Es,(p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p))).next((()=>me.forEach(d.ds,(p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))))))}catch(h){if(!Mo(h))throw h;Te(sh,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const p=c.Ms.get(d),T=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(T);c.Ms=c.Ms.insert(d,_)}}})(r.localStore,s))}async function DA(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){Te(dh,"User change. New user:",e.toKey());const r=await Yy(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((l=>{l.reject(new Ie(ve.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qa(n,r.Ls)}}function LA(t,e){const n=Me(t),r=n.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let i=ze();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function mv(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CA.bind(null,e),e.Pu.H_=vA.bind(null,e.eventManager),e.Pu.yu=_A.bind(null,e.eventManager),e}function MA(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NA.bind(null,e),e}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Du(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return jw(this.persistence,new Vw,e.initialUser,this.serializer)}Cu(e){return new Qy(rh.mi,this.serializer)}Du(e){return new Gw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class VA extends Xl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof Ql,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Tw(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Qy((r=>Ql.mi(r,n)),this.serializer)}}class af{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ap(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DA.bind(null,this.syncEngine),await gA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yA})()}createDatastore(e){const n=Du(e.databaseInfo.databaseId),r=(function(s){return new Jw(s)})(e.databaseInfo);return(function(s,o,a,l){return new nA(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,a){return new iA(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ap(this.syncEngine,n,0)),(function(){return vp.v()?new vp:new Ww})())}createSyncEngine(e,n){return(function(i,s,o,a,l,u,c){const h=new wA(i,s,o,a,l,u);return c&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Me(n);Te(Es,"RemoteStore shutting down."),r.Ea.add(5),await Wa(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}af.provider={build:()=>new af};class yv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Bi="FirestoreClient";class UA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$t.UNAUTHENTICATED,this.clientId=Hf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{Te(Bi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Te(Bi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fh(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yc(t,e){t.asyncQueue.verifyOperationInProgress(),Te(Bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Yy(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Sp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FA(t);Te(Bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>bp(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>bp(e.remoteStore,i))),t._onlineComponents=e}async function FA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(Bi,"Using user provided OfflineComponentProvider");try{await yc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Io("Error using user provided cache. Falling back to memory cache: "+n),await yc(t,new Xl)}}else Te(Bi,"Using default OfflineComponentProvider"),await yc(t,new VA(void 0));return t._offlineComponents}async function vv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(Bi,"Using user provided OnlineComponentProvider"),await Sp(t,t._uninitializedComponentsProvider._online)):(Te(Bi,"Using default OnlineComponentProvider"),await Sp(t,new af))),t._onlineComponents}function jA(t){return vv(t).then((e=>e.syncEngine))}async function _v(t){const e=await vv(t),n=e.eventManager;return n.onListen=AA.bind(null,e.syncEngine),n.onUnlisten=RA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OA.bind(null,e.syncEngine),n}function BA(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,u){const c=new yv({next:d=>{c.Nu(),o.enqueueAndForget((()=>av(s,h)));const p=d.docs.has(a);!p&&d.fromCache?u.reject(new Ie(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?u.reject(new Ie(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new lv(Yf(a.path),c,{includeMetadataChanges:!0,qa:!0});return ov(s,h)})(await _v(t),t.asyncQueue,e,n,r))),r.promise}function qA(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,u){const c=new yv({next:d=>{c.Nu(),o.enqueueAndForget((()=>av(s,h))),d.fromCache&&l.source==="server"?u.reject(new Ie(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new lv(a,c,{includeMetadataChanges:!0,qa:!0});return ov(s,h)})(await _v(t),t.asyncQueue,e,n,r))),r.promise}function bv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Rp=new Map;const Ev="firestore.googleapis.com",Op=!0;class Pp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ev,this.ssl=Op}else this.host=e.host,this.ssl=e.ssl??Op;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Wy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bw)throw new Ie(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bv(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ie(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ie(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ie(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new G1;switch(r.type){case"firstParty":return new X1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Rp.get(n);r&&(Te("ComponentProvider","Removing Datastore"),Rp.delete(n),r.terminate())})(this),Promise.resolve()}}function HA(t,e,n,r={}){t=Zn(t,Vu);const i=Ss(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Mf(`https://${a}`),Vf("Firestore",!0)),s.host!==Ev&&s.host!==a&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!vs(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=$t.MOCK_USER;else{u=Qm(r.mockUserToken,t._app?.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Ie(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new $t(h)}t._authCredentials=new W1(new ay(u,c))}}class Uu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uu(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ka(n,At._jsonSchema))return new At(e,r||null,new Re(at.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:wt("string",At._jsonSchemaVersion),referencePath:wt("string")};class xi extends Uu{constructor(e,n,r){super(e,n,Yf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Re(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Cp(t,e,...n){if(t=It(t),ly("collection","path",e),t instanceof Vu){const r=at.fromString(e,...n);return Hd(r),new xi(t,null,r)}{if(!(t instanceof At||t instanceof xi))throw new Ie(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return Hd(r),new xi(t.firestore,null,r)}}function zr(t,e,...n){if(t=It(t),arguments.length===1&&(e=Hf.newId()),ly("doc","path",e),t instanceof Vu){const r=at.fromString(e,...n);return qd(r),new At(t,null,new Re(r))}{if(!(t instanceof At||t instanceof xi))throw new Ie(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return qd(r),new At(t.firestore,t instanceof xi?t.converter:null,new Re(r))}}const kp="AsyncQueue";class Np{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jy(this,"async_queue_retry"),this._c=()=>{const r=mc();r&&Te(kp,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=mc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Gr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Mo(e))throw e;Te(kp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Zr("INTERNAL UNHANDLED ERROR: ",xp(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ch.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&ke(47125,{Pc:xp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function xp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cs extends Vu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Np,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Np(e),this._firestoreClient=void 0,await e}}}function zA(t,e){const n=typeof t=="object"?t:Bf(),r=typeof t=="string"?t:ql,i=Au(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=$m("firestore");s&&HA(i,...s)}return i}function gh(t){if(t._terminated)throw new Ie(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KA(t),t._firestoreClient}function KA(t){const e=t._freezeSettings(),n=(function(i,s,o,a){return new pT(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,bv(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new UA(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Ht.fromBase64String(e))}catch(n){throw new Ie(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ka(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:wt("string",Dn._jsonSchemaVersion),bytes:wt("string")};class Fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mh{constructor(e){this._methodName=e}}class vr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(Ka(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:wt("string",vr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class _r{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ka(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _r(e.vectorValues);throw new Ie(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:wt("string",_r._jsonSchemaVersion),vectorValues:wt("object")};const $A=/^__.*__$/;class GA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new $a(e,this.data,n,this.fieldTransforms)}}class Tv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:t})}}class yh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wv(this.Ac)&&$A.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Du(e)}Cc(e,n,r,i=!1){return new yh({Ac:e,methodName:n,Dc:r,path:qt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vh(t){const e=t._freezeSettings(),n=Du(t._databaseId);return new WA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Av(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);_h("Data must be an object, but it was:",o,r);const a=Iv(r,o);let l,u;if(s.merge)l=new An(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=lf(e,h,n);if(!o.contains(d))throw new Ie(ve.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Rv(c,d)||c.push(d)}l=new An(c),u=o.fieldTransforms.filter((h=>l.covers(h.field)))}else l=null,u=o.fieldTransforms;return new GA(new dn(a),l,u)}class ju extends mh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ju}}function QA(t,e,n,r){const i=t.Cc(1,e,n);_h("Data must be an object, but it was:",i,r);const s=[],o=dn.empty();Hi(r,((l,u)=>{const c=bh(e,l,n);u=It(u);const h=i.yc(c);if(u instanceof ju)s.push(c);else{const d=Bu(u,h);d!=null&&(s.push(c),o.set(c,d))}}));const a=new An(s);return new Tv(o,a,i.fieldTransforms)}function YA(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[lf(e,r,n)],l=[i];if(s.length%2!=0)throw new Ie(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(lf(e,s[d])),l.push(s[d+1]);const u=[],c=dn.empty();for(let d=a.length-1;d>=0;--d)if(!Rv(u,a[d])){const p=a[d];let T=l[d];T=It(T);const _=o.yc(p);if(T instanceof ju)u.push(p);else{const v=Bu(T,_);v!=null&&(u.push(p),c.set(p,v))}}const h=new An(u);return new Tv(c,h,o.fieldTransforms)}function Bu(t,e){if(Sv(t=It(t)))return _h("Unsupported field value:",e,t),Iv(t,e);if(t instanceof mh)return(function(r,i){if(!wv(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=Bu(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:Wl(i.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wl(i.serializer,s)}}if(r instanceof vr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:By(i.serializer,r._byteString)};if(r instanceof At){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:th(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _r)return(function(o,a){return{mapValue:{fields:{[yy]:{stringValue:vy},[Hl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Xf(a.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${zf(r)}`)})(t,e)}function Iv(t,e){const n={};return fy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,((r,i)=>{const s=Bu(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function Sv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof vr||t instanceof Dn||t instanceof At||t instanceof mh||t instanceof _r)}function _h(t,e,n){if(!Sv(n)||!uy(n)){const r=zf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function lf(t,e,n){if((e=It(e))instanceof Fu)return e._internalPath;if(typeof e=="string")return bh(t,e);throw Jl("Field path arguments must be of type string or ",t,!1,void 0,n)}const XA=new RegExp("[~\\*/\\[\\]]");function bh(t,e,n){if(e.search(XA)>=0)throw Jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fu(...e.split("."))._internalPath}catch{throw Jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ie(ve.INVALID_ARGUMENT,a+t+l)}function Rv(t,e){return t.some((n=>n.isEqual(e)))}class Ov{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JA extends Ov{data(){return super.data()}}function Pv(t,e){return typeof e=="string"?bh(t,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}function ZA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eI{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[Hl].arrayValue?.values?.map((r=>vt(r.doubleValue)));return new _r(n)}convertGeoPoint(e){return new vr(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ru(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Na(e));default:return null}}convertTimestamp(e){const n=Vi(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=at.fromString(e);Ze(Gy(r),9688,{name:e});const i=new xa(r.get(1),r.get(3)),s=new Re(r.popFirst(5));return i.isEqual(n)||Zr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Cv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends Ov{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:wt("string",ys._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class wl extends ys{data(e={}){return super.data(e)}}class _o{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ia(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new wl(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new wl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new wl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:tI(a.type),doc:l,oldIndex:u,newIndex:c}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}function Zl(t){t=Zn(t,At);const e=Zn(t.firestore,Cs);return BA(gh(e),t._key).then((n=>oI(e,t,n)))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:wt("string",_o._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class kv extends eI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function nI(t){t=Zn(t,Uu);const e=Zn(t.firestore,Cs),n=gh(e),r=new kv(e);return ZA(t._query),qA(n,t._query).then((i=>new _o(e,r,t,i)))}function Dp(t,e,n){t=Zn(t,At);const r=Zn(t.firestore,Cs),i=Cv(t.converter,e,n);return qu(r,[Av(vh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vn.none())])}function rI(t,e,n,...r){t=Zn(t,At);const i=Zn(t.firestore,Cs),s=vh(i);let o;return o=typeof(e=It(e))=="string"||e instanceof Fu?YA(s,"updateDoc",t._key,e,n,r):QA(s,"updateDoc",t._key,e),qu(i,[o.toMutation(t._key,Vn.exists(!0))])}function iI(t){return qu(Zn(t.firestore,Cs),[new Jf(t._key,Vn.none())])}function sI(t,e){const n=Zn(t.firestore,Cs),r=zr(t),i=Cv(t.converter,e);return qu(n,[Av(vh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Vn.exists(!1))]).then((()=>r))}function qu(t,e){return(function(r,i){const s=new Gr;return r.asyncQueue.enqueueAndForget((async()=>PA(await jA(r),i,s))),s.promise})(gh(t),e)}function oI(t,e,n){const r=n.docs.get(e._key),i=new kv(t);return new ys(t,i,e._key,r,new ia(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Do=i})(Rs),_s(new Li("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Cs(new Q1(r.getProvider("auth-internal")),new J1(o,r.getProvider("app-check-internal")),(function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ie(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(u.options.projectId,c)})(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),gr(Ud,Fd,e),gr(Ud,Fd,"esm2020")})();function Nv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aI=Nv,xv=new Ha("auth","Firebase",Nv());const eu=new Uf("@firebase/auth");function lI(t,...e){eu.logLevel<=qe.WARN&&eu.warn(`Auth (${Rs}): ${t}`,...e)}function Al(t,...e){eu.logLevel<=qe.ERROR&&eu.error(`Auth (${Rs}): ${t}`,...e)}function er(t,...e){throw Eh(t,...e)}function br(t,...e){return Eh(t,...e)}function Dv(t,e,n){const r={...aI(),[e]:n};return new Ha("auth","Firebase",r).create(e,{appName:t.name})}function Wr(t){return Dv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Eh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xv.create(t,...e)}function Ce(t,e,...n){if(!t)throw Eh(e,...n)}function Kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Al(e),new Error(e)}function ti(t,e){t||Kr(e)}function uf(){return typeof self<"u"&&self.location?.href||""}function uI(){return Lp()==="http:"||Lp()==="https:"}function Lp(){return typeof self<"u"&&self.location?.protocol||null}function cI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uI()||A0()||"connection"in navigator)?navigator.onLine:!0}function fI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ya{constructor(e,n){this.shortDelay=e,this.longDelay=n,ti(n>e,"Short delay should be less than long delay!"),this.isMobile=E0()||I0()}get(){return cI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Th(t,e){ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Lv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pI=new Ya(3e4,6e4);function Ki(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ii(t,e,n,r,i={}){return Mv(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=za({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return w0()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ss(t.emulatorConfig.host)&&(u.credentials="include"),Lv.fetch()(await Vv(t,t.config.apiHost,n,a),u)})}async function Mv(t,e,n){t._canInitEmulator=!1;const r={...hI,...e};try{const i=new mI(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw hl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw hl(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Dv(t,c,u);er(t,c)}}catch(i){if(i instanceof Sr)throw i;er(t,"network-request-failed",{message:String(i)})}}async function Xa(t,e,n,r,i={}){const s=await ii(t,e,n,r,i);return"mfaPendingCredential"in s&&er(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Vv(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Th(t.config,i):`${t.config.apiScheme}://${i}`;return dI.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function gI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),pI.get())})}}function hl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=br(t,e,r);return i.customData._tokenResponse=n,i}function Mp(t){return t!==void 0&&t.enterprise!==void 0}class yI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vI(t,e){return ii(t,"GET","/v2/recaptchaConfig",Ki(t,e))}async function _I(t,e){return ii(t,"POST","/v1/accounts:delete",e)}async function tu(t,e){return ii(t,"POST","/v1/accounts:lookup",e)}function _a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bI(t,e=!1){const n=It(t),r=await n.getIdToken(e),i=wh(r);Ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:_a(vc(i.auth_time)),issuedAtTime:_a(vc(i.iat)),expirationTime:_a(vc(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function vc(t){return Number(t)*1e3}function wh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Al("JWT malformed, contained fewer than 3 sections"),null;try{const i=zm(n);return i?JSON.parse(i):(Al("Failed to decode base64 JWT payload"),null)}catch(i){return Al("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Vp(t){const e=wh(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ko(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sr&&EI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class TI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class cf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_a(this.lastLoginAt),this.creationTime=_a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nu(t){const e=t.auth,n=await t.getIdToken(),r=await ko(t,tu(e,{idToken:n}));Ce(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?Uv(i.providerUserInfo):[],o=AI(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!o?.length,u=a?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new cf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function wI(t){const e=It(t);await nu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AI(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Uv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function II(t,e){const n=await Mv(t,{},async()=>{const r=za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Vv(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ss(t.emulatorConfig.host)&&(l.credentials="include"),Lv.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SI(t,e){return ii(t,"POST","/v2/accounts:revokeToken",Ki(t,e))}class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=Vp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await II(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new bo;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return Kr("not implemented")}}function yi(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new TI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ko(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bI(this,e)}reload(){return wI(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Wr(this.auth));const e=await this.getIdToken();return await ko(this,_I(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:h,emailVerified:d,isAnonymous:p,providerData:T,stsTokenManager:_}=n;Ce(h&&_,e,"internal-error");const v=bo.fromJSON(this.name,_);Ce(typeof h=="string",e,"internal-error"),yi(r,e.name),yi(i,e.name),Ce(typeof d=="boolean",e,"internal-error"),Ce(typeof p=="boolean",e,"internal-error"),yi(s,e.name),yi(o,e.name),yi(a,e.name),yi(l,e.name),yi(u,e.name),yi(c,e.name);const b=new Gn({uid:h,auth:e,email:i,emailVerified:d,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:v,createdAt:u,lastLoginAt:c});return T&&Array.isArray(T)&&(b.providerData=T.map(E=>({...E}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new bo;i.updateFromServerResponse(n);const s=new Gn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Uv(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new bo;a.updateFromIdToken(r);const l=new Gn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const Up=new Map;function $r(t){ti(t instanceof Function,"Expected a class definition");let e=Up.get(t);return e?(ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Up.set(t,e),e)}class Fv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Fv.type="NONE";const Fp=Fv;function Il(t,e,n){return`firebase:${t}:${e}:${n}`}class Eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Il(this.userKey,i.apiKey,s),this.fullPersistenceKey=Il("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await tu(this.auth,{idToken:e}).catch(()=>{});return n?Gn._fromGetAccountInfoResponse(this.auth,n,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Eo($r(Fp),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||$r(Fp);const o=Il(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let h;if(typeof c=="string"){const d=await tu(e,{idToken:c}).catch(()=>{});if(!d)break;h=await Gn._fromGetAccountInfoResponse(e,d,c)}else h=Gn._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Eo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Eo(s,e,r))}}function jp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kv(e))return"Blackberry";if($v(e))return"Webos";if(Bv(e))return"Safari";if((e.includes("chrome/")||qv(e))&&!e.includes("edge/"))return"Chrome";if(zv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function jv(t=Jt()){return/firefox\//i.test(t)}function Bv(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qv(t=Jt()){return/crios\//i.test(t)}function Hv(t=Jt()){return/iemobile/i.test(t)}function zv(t=Jt()){return/android/i.test(t)}function Kv(t=Jt()){return/blackberry/i.test(t)}function $v(t=Jt()){return/webos/i.test(t)}function Ah(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RI(t=Jt()){return Ah(t)&&!!window.navigator?.standalone}function OI(){return S0()&&document.documentMode===10}function Gv(t=Jt()){return Ah(t)||zv(t)||$v(t)||Kv(t)||/windows phone/i.test(t)||Hv(t)}function Wv(t,e=[]){let n;switch(t){case"Browser":n=jp(Jt());break;case"Worker":n=`${jp(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rs}/${r}`}class PI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function CI(t,e={}){return ii(t,"GET","/v2/passwordPolicy",Ki(t,e))}const kI=6;class NI{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class xI{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bp(this),this.idTokenSubscription=new Bp(this),this.beforeStateQueue=new PI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$r(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tu(this,{idToken:e}),r=await Gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(En(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Wr(this));const n=e?It(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CI(this),n=new NI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ha("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SI(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$r(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[$r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ks(t){return It(t)}class Bp{constructor(e){this.auth=e,this.observer=null,this.addObserver=D0(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DI(t){Hu=t}function Qv(t){return Hu.loadJS(t)}function LI(){return Hu.recaptchaEnterpriseScript}function MI(){return Hu.gapiScript}function VI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class UI{constructor(){this.enterprise=new FI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jI="recaptcha-enterprise",Yv="NO_RECAPTCHA";class BI{constructor(e){this.type=jI,this.auth=ks(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{vI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new yI(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Mp(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Yv)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UI().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Mp(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=LI();l.length!==0&&(l+=a),Qv(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function qp(t,e,n,r=!1,i=!1){const s=new BI(t);let o;if(i)o=Yv;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ff(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await qp(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await qp(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function qI(t,e){const n=Au(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(vs(s,e??{}))return i;er(i,"already-initialized")}return n.initialize({options:e})}function HI(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map($r);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function zI(t,e,n){const r=ks(t);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Xv(e),{host:o,port:a}=KI(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(vs(u,r.config.emulator)&&vs(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Ss(o)?(Mf(`${s}//${o}${l}`),Vf("Auth",!0)):$I()}function Xv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KI(t){const e=Xv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Hp(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Hp(o)}}}function Hp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $I(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Ih{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function GI(t,e){return ii(t,"POST","/v1/accounts:update",e)}async function WI(t,e){return ii(t,"POST","/v1/accounts:signUp",e)}async function QI(t,e){return Xa(t,"POST","/v1/accounts:signInWithPassword",Ki(t,e))}async function YI(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}async function XI(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}class Va extends Ih{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Va(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Va(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,n,"signInWithPassword",QI);case"emailLink":return YI(e,{email:this._email,oobCode:this._password});default:er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,r,"signUpPassword",WI);case"emailLink":return XI(e,{idToken:n,email:this._email,oobCode:this._password});default:er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function To(t,e){return Xa(t,"POST","/v1/accounts:signInWithIdp",Ki(t,e))}const JI="http://localhost";class Ts extends Ih{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Ts(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,To(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:JI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=za(n)}return e}}function ZI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eS(t){const e=Zo(ea(t)).link,n=e?Zo(ea(e)).deep_link_id:null,r=Zo(ea(t)).deep_link_id;return(r?Zo(ea(r)).link:null)||r||n||e||t}class Sh{constructor(e){const n=Zo(ea(e)),r=n.apiKey??null,i=n.oobCode??null,s=ZI(n.mode??null);Ce(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=eS(e);try{return new Sh(n)}catch{return null}}}class Ns{constructor(){this.providerId=Ns.PROVIDER_ID}static credential(e,n){return Va._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sh.parseLink(n);return Ce(r,"argument-error"),Va._fromEmailAndCode(e,r.code,r.tenantId)}}Ns.PROVIDER_ID="password";Ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Jv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ja extends Jv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wi extends Ja{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";class Ai extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ts._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";class Ii extends Ja{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";class Si extends Ja{constructor(){super("twitter.com")}static credential(e,n){return Ts._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";async function tS(t,e){return Xa(t,"POST","/v1/accounts:signUp",Ki(t,e))}class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Gn._fromIdTokenResponse(e,r,i),o=zp(r);return new ws({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=zp(r);return new ws({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function zp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ru extends Sr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ru.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ru(e,n,r,i)}}function Zv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ru._fromErrorAndOperation(t,s,e,r):s})}async function nS(t,e,n=!1){const r=await ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ws._forOperation(t,"link",r)}async function e_(t,e,n=!1){const{auth:r}=t;if(En(r.app))return Promise.reject(Wr(r));const i="reauthenticate";try{const s=await ko(t,Zv(r,i,e,t),n);Ce(s.idToken,r,"internal-error");const o=wh(s.idToken);Ce(o,r,"internal-error");const{sub:a}=o;return Ce(t.uid===a,r,"user-mismatch"),ws._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&er(r,"user-mismatch"),s}}async function t_(t,e,n=!1){if(En(t.app))return Promise.reject(Wr(t));const r="signIn",i=await Zv(t,r,e),s=await ws._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function rS(t,e){return t_(ks(t),e)}async function iS(t,e){return e_(It(t),e)}async function n_(t){const e=ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sS(t,e,n){if(En(t.app))return Promise.reject(Wr(t));const r=ks(t),o=await ff(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&n_(t),l}),a=await ws._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function oS(t,e,n){return En(t.app)?Promise.reject(Wr(t)):rS(It(t),Ns.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&n_(t),r})}function aS(t,e){return lS(It(t),null,e)}async function lS(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await ko(t,GI(r,s));await t._updateTokensIfNecessary(o,!0)}function uS(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function cS(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function zu(t,e,n,r){return It(t).onAuthStateChanged(e,n,r)}function r_(t){return It(t).signOut()}const iu="__sak";class i_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iu,"1"),this.storage.removeItem(iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const fS=1e3,hS=10;class s_ extends i_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);OI()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hS):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}s_.type="LOCAL";const dS=s_;class o_ extends i_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o_.type="SESSION";const a_=o_;function pS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ku{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ku(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await pS(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ku.receivers=[];function Rh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class gS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Rh("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Er(){return window}function mS(t){Er().location.href=t}function l_(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function yS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vS(){return navigator?.serviceWorker?.controller||null}function _S(){return l_()?self:null}const u_="firebaseLocalStorageDb",bS=1,su="firebaseLocalStorage",c_="fbase_key";class Za{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $u(t,e){return t.transaction([su],e?"readwrite":"readonly").objectStore(su)}function ES(){const t=indexedDB.deleteDatabase(u_);return new Za(t).toPromise()}function hf(){const t=indexedDB.open(u_,bS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(su,{keyPath:c_})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(su)?e(r):(r.close(),await ES(),e(await hf()))})})}async function Kp(t,e,n){const r=$u(t,!0).put({[c_]:e,value:n});return new Za(r).toPromise()}async function TS(t,e){const n=$u(t,!1).get(e),r=await new Za(n).toPromise();return r===void 0?null:r.value}function $p(t,e){const n=$u(t,!0).delete(e);return new Za(n).toPromise()}const wS=800,AS=3;class f_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>AS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ku._getInstance(_S()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yS(),!this.activeServiceWorker)return;this.sender=new gS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await Kp(e,iu,"1"),await $p(e,iu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$p(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$u(i,!1).getAll();return new Za(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f_.type="LOCAL";const IS=f_;new Ya(3e4,6e4);function SS(t,e){return e?$r(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Oh extends Ih{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RS(t){return t_(t.auth,new Oh(t),t.bypassAuthState)}function OS(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),e_(n,new Oh(t),t.bypassAuthState)}async function PS(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),nS(n,new Oh(t),t.bypassAuthState)}class h_{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RS;case"linkViaPopup":case"linkViaRedirect":return PS;case"reauthViaPopup":case"reauthViaRedirect":return OS;default:er(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CS=new Ya(2e3,1e4);class co extends h_{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=Rh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CS.get())};e()}}co.currentPopupAction=null;const kS="pendingRedirect",Sl=new Map;class NS extends h_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sl.get(this.auth._key());if(!e){try{const r=await xS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sl.set(this.auth._key(),e)}return this.bypassAuthState||Sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xS(t,e){const n=MS(e),r=LS(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function DS(t,e){Sl.set(t._key(),e)}function LS(t){return $r(t._redirectPersistence)}function MS(t){return Il(kS,t.config.apiKey,t.name)}async function VS(t,e,n=!1){if(En(t.app))return Promise.reject(Wr(t));const r=ks(t),i=SS(r,e),o=await new NS(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const US=600*1e3;class FS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!d_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(br(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=US&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gp(e))}saveEventToCache(e){this.cachedEventUids.add(Gp(e)),this.lastProcessedEventTime=Date.now()}}function Gp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function d_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function jS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d_(t);default:return!1}}async function BS(t,e={}){return ii(t,"GET","/v1/projects",e)}const qS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HS=/^https?/;async function zS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BS(t);for(const n of e)try{if(KS(n))return}catch{}er(t,"unauthorized-domain")}function KS(t){const e=uf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!HS.test(n))return!1;if(qS.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const $S=new Ya(3e4,6e4);function Wp(){const t=Er().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GS(t){return new Promise((e,n)=>{function r(){Wp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wp(),n(br(t,"network-request-failed"))},timeout:$S.get()})}if(Er().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Er().gapi?.load)r();else{const i=VI("iframefcb");return Er()[i]=()=>{gapi.load?r():n(br(t,"network-request-failed"))},Qv(`${MI()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw Rl=null,e})}let Rl=null;function WS(t){return Rl=Rl||GS(t),Rl}const QS=new Ya(5e3,15e3),YS="__/auth/iframe",XS="emulator/auth/iframe",JS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eR(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Th(e,XS):`https://${t.config.authDomain}/${YS}`,r={apiKey:e.apiKey,appName:t.name,v:Rs},i=ZS.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${za(r).slice(1)}`}async function tR(t){const e=await WS(t),n=Er().gapi;return Ce(n,t,"internal-error"),e.open({where:document.body,url:eR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JS,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=br(t,"network-request-failed"),a=Er().setTimeout(()=>{s(o)},QS.get());function l(){Er().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}const nR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rR=500,iR=600,sR="_blank",oR="http://localhost";class Qp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aR(t,e,n,r=rR,i=iR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...nR,width:r.toString(),height:i.toString(),top:s,left:o},u=Jt().toLowerCase();n&&(a=qv(u)?sR:n),jv(u)&&(e=e||oR,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[p,T])=>`${d}${p}=${T},`,"");if(RI(u)&&a!=="_self")return lR(e||"",a),new Qp(null);const h=window.open(e||"",a,c);Ce(h,t,"popup-blocked");try{h.focus()}catch{}return new Qp(h)}function lR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const uR="__/auth/handler",cR="emulator/auth/handler",fR=encodeURIComponent("fac");async function Yp(t,e,n,r,i,s){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rs,eventId:i};if(e instanceof Jv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",x0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))o[c]=h}if(e instanceof Ja){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${fR}=${encodeURIComponent(l)}`:"";return`${hR(t)}?${za(a).slice(1)}${u}`}function hR({config:t}){return t.emulator?Th(t,cR):`https://${t.authDomain}/${uR}`}const _c="webStorageSupport";class dR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a_,this._completeRedirectFn=VS,this._overrideRedirectResult=DS}async _openPopup(e,n,r,i){ti(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await Yp(e,n,r,uf(),i);return aR(e,s,Rh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Yp(e,n,r,uf(),i);return mS(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ti(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tR(e),r=new FS(e);return n.register("authEvent",i=>(Ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_c,{type:_c},i=>{const s=i?.[0]?.[_c];s!==void 0&&n(!!s),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gv()||Bv()||Ah()}}const pR=dR;var Xp="@firebase/auth",Jp="1.11.1";class gR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yR(t){_s(new Li("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wv(t)},u=new xI(r,i,s,l);return HI(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_s(new Li("auth-internal",e=>{const n=ks(e.getProvider("auth").getImmediate());return(r=>new gR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(Xp,Jp,mR(t)),gr(Xp,Jp,"esm2020")}const vR=300,_R=Wm("authIdTokenMaxAge")||vR;let Zp=null;const bR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_R)return;const i=n?.token;Zp!==i&&(Zp=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function p_(t=Bf()){const e=Au(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qI(t,{popupRedirectResolver:pR,persistence:[IS,dS,a_]}),r=Wm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=bR(s.toString());cS(n,o,()=>o(n.currentUser)),uS(n,a=>o(a))}}const i=Km("auth");return i&&zI(n,`http://${i}`),n}function ER(){return document.getElementsByTagName("head")?.[0]??document}DI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=br("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ER().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yR("Browser");const g_="firebasestorage.googleapis.com",TR="storageBucket",wR=120*1e3,AR=600*1e3;class Rr extends Sr{constructor(e,n,r=0){super(bc(e),`Firebase Storage: ${n} (${bc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ir;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ir||(Ir={}));function bc(t){return"storage/"+t}function IR(){const t="An unknown error occurred, please check the error payload for server response.";return new Rr(Ir.UNKNOWN,t)}function SR(){return new Rr(Ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RR(){return new Rr(Ir.CANCELED,"User canceled the upload/download.")}function OR(t){return new Rr(Ir.INVALID_URL,"Invalid URL '"+t+"'.")}function PR(t){return new Rr(Ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function eg(t){return new Rr(Ir.INVALID_ARGUMENT,t)}function m_(){return new Rr(Ir.APP_DELETED,"The Firebase app was deleted.")}function CR(t){return new Rr(Ir.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wn.makeFromUrl(e,n)}catch{return new Wn(e,"")}if(r.path==="")return r;throw PR(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(g){g.path.charAt(g.path.length-1)==="/"&&(g.path_=g.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(g){g.path_=decodeURIComponent(g.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),T={bucket:1,path:3},_=n===g_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",b=new RegExp(`^https?://${_}/${i}/${v}`,"i"),m=[{regex:a,indices:l,postModify:s},{regex:p,indices:T,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let g=0;g<m.length;g++){const w=m[g],x=w.regex.exec(e);if(x){const R=x[w.indices.bucket];let A=x[w.indices.path];A||(A=""),r=new Wn(R,A),w.postModify(r);break}}if(r==null)throw OR(e);return r}}class kR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NR(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function h(v){i=setTimeout(()=>{i=null,t(p,l())},v)}function d(){s&&clearTimeout(s)}function p(v,...b){if(u){d();return}if(v){d(),c.call(null,v,...b);return}if(l()||o){d(),c.call(null,v,...b);return}r<64&&(r*=2);let m;a===1?(a=2,m=0):m=(r+Math.random())*1e3,h(m)}let T=!1;function _(v){T||(T=!0,d(),!u&&(i!==null?(v||(a=2),clearTimeout(i),h(0)):v||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function xR(t){t(!1)}function DR(t){return t!==void 0}function tg(t,e,n,r){if(r<e)throw eg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw eg(`Invalid value for '${t}'. Expected ${n} or less.`)}function LR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ou;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ou||(ou={}));function MR(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}class VR{constructor(e,n,r,i,s,o,a,l,u,c,h,d=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,_)=>{this.resolve_=T,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new dl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ou.NO_ERROR,l=s.getStatus();if(!a||MR(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===ou.ABORT;r(!1,new dl(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new dl(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());DR(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=IR();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?m_():RR();o(l)}else{const l=SR();o(l)}};this.canceled_?n(!1,new dl(!1,null,!0)):this.backoffId_=NR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function FR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function BR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qR(t,e,n,r,i,s,o=!0,a=!1){const l=LR(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return jR(c,e),UR(c,n),FR(c,s),BR(c,r),new VR(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function HR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class au{constructor(e,n){this._service=e,n instanceof Wn?this._location=n:this._location=Wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new au(e,n)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zR(this._location.path)}get storage(){return this._service}get parent(){const e=HR(this._location.path);if(e===null)return null;const n=new Wn(this._location.bucket,e);return new au(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw CR(e)}}function ng(t,e){const n=e?.[TR];return n==null?null:Wn.makeFromBucketSpec(n,t)}function KR(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ss(e);i&&(Mf(`https://${t.host}/b`),Vf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Qm(s,t.app.options.projectId))}class $R{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=g_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wR,this._maxUploadRetryTime=AR,this._requests=new Set,i!=null?this._bucket=Wn.makeFromBucketSpec(i,this._host):this._bucket=ng(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=ng(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new au(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new kR(m_());{const o=qR(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const rg="@firebase/storage",ig="0.14.0";const y_="storage";function GR(t=Bf(),e){t=It(t);const r=Au(t,y_).getImmediate({identifier:e}),i=$m("storage");return i&&WR(r,...i),r}function WR(t,e,n,r={}){KR(t,e,n,r)}function QR(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $R(n,r,i,e,Rs)}function YR(){_s(new Li(y_,QR,"PUBLIC").setMultipleInstances(!0)),gr(rg,ig,""),gr(rg,ig,"esm2020")}YR();const v_={apiKey:"AIzaSyA-Rg7H2fV1XACurDoXCMm2kAkBRShus6o",authDomain:"unique-beings-15a5b.firebaseapp.com",projectId:"unique-beings-15a5b",storageBucket:"unique-beings-15a5b.firebasestorage.app",messagingSenderId:"954432871196",appId:"1:954432871196:web:d3d0796dd34b70f434b8d9",measurementId:"G-XPSY1JPJ8L"},Ph=jf(v_),dr=zA(Ph),qi=p_(Ph);GR(Ph);const lo=typeof document<"u";function __(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function XR(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&__(t.default)}const Xe=Object.assign;function Ec(t,e){const n={};for(const r in e){const i=e[r];n[r]=tr(i)?i.map(t):t(i)}return n}const ba=()=>{},tr=Array.isArray;function sg(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const b_=/#/g,JR=/&/g,ZR=/\//g,eO=/=/g,tO=/\?/g,E_=/\+/g,nO=/%5B/g,rO=/%5D/g,T_=/%5E/g,iO=/%60/g,w_=/%7B/g,sO=/%7C/g,A_=/%7D/g,oO=/%20/g;function Ch(t){return t==null?"":encodeURI(""+t).replace(sO,"|").replace(nO,"[").replace(rO,"]")}function aO(t){return Ch(t).replace(w_,"{").replace(A_,"}").replace(T_,"^")}function df(t){return Ch(t).replace(E_,"%2B").replace(oO,"+").replace(b_,"%23").replace(JR,"%26").replace(iO,"`").replace(w_,"{").replace(A_,"}").replace(T_,"^")}function lO(t){return df(t).replace(eO,"%3D")}function uO(t){return Ch(t).replace(b_,"%23").replace(tO,"%3F")}function cO(t){return uO(t).replace(ZR,"%2F")}function Ua(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const fO=/\/$/,hO=t=>t.replace(fO,"");function Tc(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),s=e.slice(l,a>0?a:e.length),i=t(s.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=mO(r??e,n),{fullPath:r+s+o,path:r,query:i,hash:Ua(o)}}function dO(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function og(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function pO(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&No(e.matched[r],n.matched[i])&&I_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function No(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function I_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!gO(t[n],e[n]))return!1;return!0}function gO(t,e){return tr(t)?ag(t,e):tr(e)?ag(e,t):t?.valueOf()===e?.valueOf()}function ag(t,e){return tr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function mO(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const vi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let pf=(function(t){return t.pop="pop",t.push="push",t})({}),wc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function yO(t){if(!t)if(lo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hO(t)}const vO=/^[^#]+#/;function _O(t,e){return t.replace(vO,"#")+e}function bO(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Gu=()=>({left:window.scrollX,top:window.scrollY});function EO(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=bO(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function lg(t,e){return(history.state?history.state.position-e:-1)+t}const gf=new Map;function TO(t,e){gf.set(t,e)}function wO(t){const e=gf.get(t);return gf.delete(t),e}function AO(t){return typeof t=="string"||t&&typeof t=="object"}function S_(t){return typeof t=="string"||typeof t=="symbol"}let mt=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const R_=Symbol("");mt.MATCHER_NOT_FOUND+"",mt.NAVIGATION_GUARD_REDIRECT+"",mt.NAVIGATION_ABORTED+"",mt.NAVIGATION_CANCELLED+"",mt.NAVIGATION_DUPLICATED+"";function xo(t,e){return Xe(new Error,{type:t,[R_]:!0},e)}function Fr(t,e){return t instanceof Error&&R_ in t&&(e==null||!!(t.type&e))}const IO=["params","query","hash"];function SO(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of IO)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function RO(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(E_," "),s=i.indexOf("="),o=Ua(s<0?i:i.slice(0,s)),a=s<0?null:Ua(i.slice(s+1));if(o in e){let l=e[o];tr(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function ug(t){let e="";for(let n in t){const r=t[n];if(n=lO(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(tr(r)?r.map(i=>i&&df(i)):[r&&df(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function OO(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=tr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const PO=Symbol(""),cg=Symbol(""),Wu=Symbol(""),kh=Symbol(""),mf=Symbol("");function Yo(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ti(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=d=>{d===!1?l(xo(mt.NAVIGATION_ABORTED,{from:n,to:e})):d instanceof Error?l(d):AO(d)?l(xo(mt.NAVIGATION_GUARD_REDIRECT,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},c=s(()=>t.call(r&&r.instances[i],e,n,u));let h=Promise.resolve(c);t.length<3&&(h=h.then(u)),h.catch(d=>l(d))})}function Ac(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(__(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Ti(u,n,r,o,a,i))}else{let u=l();s.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=XR(c)?c.default:c;o.mods[a]=c,o.components[a]=h;const d=(h.__vccOpts||h)[e];return d&&Ti(d,n,r,o,a,i)()}))}}return s}function CO(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(u=>No(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>No(u,l))||i.push(l))}return[n,r,i]}let kO=()=>location.protocol+"//"+location.host;function O_(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),og(a,"")}return og(n,t)+r+i}function NO(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const p=O_(t,location),T=n.value,_=e.value;let v=0;if(d){if(n.value=p,e.value=d,o&&o===T){o=null;return}v=_?d.position-_.position:0}else r(p);i.forEach(b=>{b(n.value,T,{delta:v,type:pf.pop,direction:v?v>0?wc.forward:wc.back:wc.unknown})})};function l(){o=n.value}function u(d){i.push(d);const p=()=>{const T=i.indexOf(d);T>-1&&i.splice(T,1)};return s.push(p),p}function c(){if(document.visibilityState==="hidden"){const{history:d}=window;if(!d.state)return;d.replaceState(Xe({},d.state,{scroll:Gu()}),"")}}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:l,listen:u,destroy:h}}function fg(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Gu():null}}function xO(t){const{history:e,location:n}=window,r={value:O_(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:kO()+t+l;try{e[c?"replaceState":"pushState"](u,"",d),i.value=u}catch(p){console.error(p),n[c?"replace":"assign"](d)}}function o(l,u){s(l,Xe({},e.state,fg(i.value.back,l,i.value.forward,!0),u,{position:i.value.position}),!0),r.value=l}function a(l,u){const c=Xe({},i.value,e.state,{forward:l,scroll:Gu()});s(c.current,c,!0),s(l,Xe({},fg(r.value,l,null),{position:c.position+1},u),!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function DO(t){t=yO(t);const e=xO(t),n=NO(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Xe({location:"",base:t,go:r,createHref:_O.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function LO(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),DO(t)}let hs=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Pt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Pt||{});const MO={type:hs.Static,value:""},VO=/[a-zA-Z0-9_]/;function UO(t){if(!t)return[[]];if(t==="/")return[[MO]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${u}": ${p}`)}let n=Pt.Static,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",c="";function h(){u&&(n===Pt.Static?s.push({type:hs.Static,value:u}):n===Pt.Param||n===Pt.ParamRegExp||n===Pt.ParamRegExpEnd?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:hs.Param,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==Pt.ParamRegExp){r=n,n=Pt.EscapeNext;continue}switch(n){case Pt.Static:l==="/"?(u&&h(),o()):l===":"?(h(),n=Pt.Param):d();break;case Pt.EscapeNext:d(),n=r;break;case Pt.Param:l==="("?n=Pt.ParamRegExp:VO.test(l)?d():(h(),n=Pt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Pt.ParamRegExp:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=Pt.ParamRegExpEnd:c+=l;break;case Pt.ParamRegExpEnd:h(),n=Pt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===Pt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),i}const hg="[^/]+?",FO={sensitive:!1,strict:!1,start:!0,end:!0};var sn=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(sn||{});const jO=/[.+*?^${}()[\]/\\]/g;function BO(t,e){const n=Xe({},FO,e),r=[];let i=n.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[sn.Root];n.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const d=u[h];let p=sn.Segment+(n.sensitive?sn.BonusCaseSensitive:0);if(d.type===hs.Static)h||(i+="/"),i+=d.value.replace(jO,"\\$&"),p+=sn.Static;else if(d.type===hs.Param){const{value:T,repeatable:_,optional:v,regexp:b}=d;s.push({name:T,repeatable:_,optional:v});const E=b||hg;if(E!==hg){p+=sn.BonusCustomRegExp;try{`${E}`}catch(g){throw new Error(`Invalid custom RegExp for param "${T}" (${E}): `+g.message)}}let m=_?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;h||(m=v&&u.length<2?`(?:/${m})`:"/"+m),v&&(m+="?"),i+=m,p+=sn.Dynamic,v&&(p+=sn.BonusOptional),_&&(p+=sn.BonusRepeatable),E===".*"&&(p+=sn.BonusWildcard)}c.push(p)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=sn.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const c=u.match(o),h={};if(!c)return null;for(let d=1;d<c.length;d++){const p=c[d]||"",T=s[d-1];h[T.name]=p&&T.repeatable?p.split("/"):p}return h}function l(u){let c="",h=!1;for(const d of t){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const p of d)if(p.type===hs.Static)c+=p.value;else if(p.type===hs.Param){const{value:T,repeatable:_,optional:v}=p,b=T in u?u[T]:"";if(tr(b)&&!_)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const E=tr(b)?b.join("/"):b;if(!E)if(v)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${T}"`);c+=E}}return c||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function qO(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===sn.Static+sn.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===sn.Static+sn.Segment?1:-1:0}function P_(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=qO(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(dg(r))return 1;if(dg(i))return-1}return i.length-r.length}function dg(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const HO={strict:!1,end:!0,sensitive:!1};function zO(t,e,n){const r=BO(UO(t.path),n),i=Xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function KO(t,e){const n=[],r=new Map;e=sg(HO,e);function i(h){return r.get(h)}function s(h,d,p){const T=!p,_=gg(h);_.aliasOf=p&&p.record;const v=sg(e,h),b=[_];if("alias"in h){const g=typeof h.alias=="string"?[h.alias]:h.alias;for(const w of g)b.push(gg(Xe({},_,{components:p?p.record.components:_.components,path:w,aliasOf:p?p.record:_})))}let E,m;for(const g of b){const{path:w}=g;if(d&&w[0]!=="/"){const x=d.record.path,R=x[x.length-1]==="/"?"":"/";g.path=d.record.path+(w&&R+w)}if(E=zO(g,d,v),p?p.alias.push(E):(m=m||E,m!==E&&m.alias.push(E),T&&h.name&&!mg(E)&&o(h.name)),C_(E)&&l(E),_.children){const x=_.children;for(let R=0;R<x.length;R++)s(x[R],E,p&&p.children[R])}p=p||E}return m?()=>{o(m)}:ba}function o(h){if(S_(h)){const d=r.get(h);d&&(r.delete(h),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(h);d>-1&&(n.splice(d,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const d=WO(h,n);n.splice(d,0,h),h.record.name&&!mg(h)&&r.set(h.record.name,h)}function u(h,d){let p,T={},_,v;if("name"in h&&h.name){if(p=r.get(h.name),!p)throw xo(mt.MATCHER_NOT_FOUND,{location:h});v=p.record.name,T=Xe(pg(d.params,p.keys.filter(m=>!m.optional).concat(p.parent?p.parent.keys.filter(m=>m.optional):[]).map(m=>m.name)),h.params&&pg(h.params,p.keys.map(m=>m.name))),_=p.stringify(T)}else if(h.path!=null)_=h.path,p=n.find(m=>m.re.test(_)),p&&(T=p.parse(_),v=p.record.name);else{if(p=d.name?r.get(d.name):n.find(m=>m.re.test(d.path)),!p)throw xo(mt.MATCHER_NOT_FOUND,{location:h,currentLocation:d});v=p.record.name,T=Xe({},d.params,h.params),_=p.stringify(T)}const b=[];let E=p;for(;E;)b.unshift(E.record),E=E.parent;return{name:v,path:_,params:T,matched:b,meta:GO(b)}}t.forEach(h=>s(h));function c(){n.length=0,r.clear()}return{addRoute:s,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:i}}function pg(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function gg(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:$O(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function $O(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function mg(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function GO(t){return t.reduce((e,n)=>Xe(e,n.meta),{})}function WO(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;P_(t,e[s])<0?r=s:n=s+1}const i=QO(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function QO(t){let e=t;for(;e=e.parent;)if(C_(e)&&P_(t,e)===0)return e}function C_({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function yg(t){const e=Yn(Wu),n=Yn(kh),r=Yt(()=>{const l=gs(t.to);return e.resolve(l)}),i=Yt(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=n.matched;if(!c||!h.length)return-1;const d=h.findIndex(No.bind(null,c));if(d>-1)return d;const p=vg(l[u-2]);return u>1&&vg(c)===p&&h[h.length-1].path!==p?h.findIndex(No.bind(null,l[u-2])):d}),s=Yt(()=>i.value>-1&&eP(n.params,r.value.params)),o=Yt(()=>i.value>-1&&i.value===n.matched.length-1&&I_(n.params,r.value.params));function a(l={}){if(ZO(l)){const u=e[gs(t.replace)?"replace":"push"](gs(t.to)).catch(ba);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Yt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function YO(t){return t.length===1?t[0]:t}const XO=Cf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:yg,setup(t,{slots:e}){const n=Is(yg(t)),{options:r}=Yn(Wu),i=Yt(()=>({[_g(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[_g(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&YO(e.default(n));return t.custom?s:Tu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),JO=XO;function ZO(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function eP(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!tr(i)||i.length!==r.length||r.some((s,o)=>s.valueOf()!==i[o].valueOf()))return!1}return!0}function vg(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const _g=(t,e,n)=>t??e??n,tP=Cf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Yn(mf),i=Yt(()=>t.route||r.value),s=Yn(cg,0),o=Yt(()=>{let u=gs(s);const{matched:c}=i.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),a=Yt(()=>i.value.matched[o.value]);gl(cg,Yt(()=>o.value+1)),gl(PO,a),gl(mf,i);const l=Ue();return ms(()=>[l.value,a.value,t.name],([u,c,h],[d,p,T])=>{c&&(c.instances[h]=u,p&&p!==c&&u&&u===d&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!No(c,p)||!d)&&(c.enterCallbacks[h]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,h=a.value,d=h&&h.components[c];if(!d)return bg(n.default,{Component:d,route:u});const p=h.props[c],T=p?p===!0?u.params:typeof p=="function"?p(u):p:null,v=Tu(d,Xe({},T,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return bg(n.default,{Component:v,route:u})||v}}});function bg(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const nP=tP;function rP(t){const e=KO(t.routes,t),n=t.parseQuery||RO,r=t.stringifyQuery||ug,i=t.history,s=Yo(),o=Yo(),a=Yo(),l=gb(vi);let u=vi;lo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ec.bind(null,V=>""+V),h=Ec.bind(null,cO),d=Ec.bind(null,Ua);function p(V,Y){let X,se;return S_(V)?(X=e.getRecordMatcher(V),se=Y):se=V,e.addRoute(se,X)}function T(V){const Y=e.getRecordMatcher(V);Y&&e.removeRoute(Y)}function _(){return e.getRoutes().map(V=>V.record)}function v(V){return!!e.getRecordMatcher(V)}function b(V,Y){if(Y=Xe({},Y||l.value),typeof V=="string"){const ee=Tc(n,V,Y.path),ue=e.resolve({path:ee.path},Y),he=i.createHref(ee.fullPath);return Xe(ee,ue,{params:d(ue.params),hash:Ua(ee.hash),redirectedFrom:void 0,href:he})}let X;if(V.path!=null)X=Xe({},V,{path:Tc(n,V.path,Y.path).path});else{const ee=Xe({},V.params);for(const ue in ee)ee[ue]==null&&delete ee[ue];X=Xe({},V,{params:h(ee)}),Y.params=h(Y.params)}const se=e.resolve(X,Y),ye=V.hash||"";se.params=c(d(se.params));const q=dO(r,Xe({},V,{hash:aO(ye),path:se.path})),K=i.createHref(q);return Xe({fullPath:q,hash:ye,query:r===ug?OO(V.query):V.query||{}},se,{redirectedFrom:void 0,href:K})}function E(V){return typeof V=="string"?Tc(n,V,l.value.path):Xe({},V)}function m(V,Y){if(u!==V)return xo(mt.NAVIGATION_CANCELLED,{from:Y,to:V})}function g(V){return R(V)}function w(V){return g(Xe(E(V),{replace:!0}))}function x(V,Y){const X=V.matched[V.matched.length-1];if(X&&X.redirect){const{redirect:se}=X;let ye=typeof se=="function"?se(V,Y):se;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=E(ye):{path:ye},ye.params={}),Xe({query:V.query,hash:V.hash,params:ye.path!=null?{}:V.params},ye)}}function R(V,Y){const X=u=b(V),se=l.value,ye=V.state,q=V.force,K=V.replace===!0,ee=x(X,se);if(ee)return R(Xe(E(ee),{state:typeof ee=="object"?Xe({},ye,ee.state):ye,force:q,replace:K}),Y||X);const ue=X;ue.redirectedFrom=Y;let he;return!q&&pO(r,se,X)&&(he=xo(mt.NAVIGATION_DUPLICATED,{to:ue,from:se}),L(se,se,!0,!1)),(he?Promise.resolve(he):O(ue,se)).catch(ce=>Fr(ce)?Fr(ce,mt.NAVIGATION_GUARD_REDIRECT)?ce:H(ce):ae(ce,ue,se)).then(ce=>{if(ce){if(Fr(ce,mt.NAVIGATION_GUARD_REDIRECT))return R(Xe({replace:K},E(ce.to),{state:typeof ce.to=="object"?Xe({},ye,ce.to.state):ye,force:q}),Y||ue)}else ce=I(ue,se,!0,K,ye);return y(ue,se,ce),ce})}function A(V,Y){const X=m(V,Y);return X?Promise.reject(X):Promise.resolve()}function P(V){const Y=ne.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(V):V()}function O(V,Y){let X;const[se,ye,q]=CO(V,Y);X=Ac(se.reverse(),"beforeRouteLeave",V,Y);for(const ee of se)ee.leaveGuards.forEach(ue=>{X.push(Ti(ue,V,Y))});const K=A.bind(null,V,Y);return X.push(K),F(X).then(()=>{X=[];for(const ee of s.list())X.push(Ti(ee,V,Y));return X.push(K),F(X)}).then(()=>{X=Ac(ye,"beforeRouteUpdate",V,Y);for(const ee of ye)ee.updateGuards.forEach(ue=>{X.push(Ti(ue,V,Y))});return X.push(K),F(X)}).then(()=>{X=[];for(const ee of q)if(ee.beforeEnter)if(tr(ee.beforeEnter))for(const ue of ee.beforeEnter)X.push(Ti(ue,V,Y));else X.push(Ti(ee.beforeEnter,V,Y));return X.push(K),F(X)}).then(()=>(V.matched.forEach(ee=>ee.enterCallbacks={}),X=Ac(q,"beforeRouteEnter",V,Y,P),X.push(K),F(X))).then(()=>{X=[];for(const ee of o.list())X.push(Ti(ee,V,Y));return X.push(K),F(X)}).catch(ee=>Fr(ee,mt.NAVIGATION_CANCELLED)?ee:Promise.reject(ee))}function y(V,Y,X){a.list().forEach(se=>P(()=>se(V,Y,X)))}function I(V,Y,X,se,ye){const q=m(V,Y);if(q)return q;const K=Y===vi,ee=lo?history.state:{};X&&(se||K?i.replace(V.fullPath,Xe({scroll:K&&ee&&ee.scroll},ye)):i.push(V.fullPath,ye)),l.value=V,L(V,Y,X,K),H()}let S;function D(){S||(S=i.listen((V,Y,X)=>{if(!G.listening)return;const se=b(V),ye=x(se,G.currentRoute.value);if(ye){R(Xe(ye,{replace:!0,force:!0}),se).catch(ba);return}u=se;const q=l.value;lo&&TO(lg(q.fullPath,X.delta),Gu()),O(se,q).catch(K=>Fr(K,mt.NAVIGATION_ABORTED|mt.NAVIGATION_CANCELLED)?K:Fr(K,mt.NAVIGATION_GUARD_REDIRECT)?(R(Xe(E(K.to),{force:!0}),se).then(ee=>{Fr(ee,mt.NAVIGATION_ABORTED|mt.NAVIGATION_DUPLICATED)&&!X.delta&&X.type===pf.pop&&i.go(-1,!1)}).catch(ba),Promise.reject()):(X.delta&&i.go(-X.delta,!1),ae(K,se,q))).then(K=>{K=K||I(se,q,!1),K&&(X.delta&&!Fr(K,mt.NAVIGATION_CANCELLED)?i.go(-X.delta,!1):X.type===pf.pop&&Fr(K,mt.NAVIGATION_ABORTED|mt.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),y(se,q,K)}).catch(ba)}))}let B=Yo(),$=Yo(),W;function ae(V,Y,X){H(V);const se=$.list();return se.length?se.forEach(ye=>ye(V,Y,X)):console.error(V),Promise.reject(V)}function Z(){return W&&l.value!==vi?Promise.resolve():new Promise((V,Y)=>{B.add([V,Y])})}function H(V){return W||(W=!V,D(),B.list().forEach(([Y,X])=>V?X(V):Y()),B.reset()),V}function L(V,Y,X,se){const{scrollBehavior:ye}=t;if(!lo||!ye)return Promise.resolve();const q=!X&&wO(lg(V.fullPath,0))||(se||!X)&&history.state&&history.state.scroll||null;return Aa().then(()=>ye(V,Y,q)).then(K=>K&&EO(K)).catch(K=>ae(K,V,Y))}const j=V=>i.go(V);let z;const ne=new Set,G={currentRoute:l,listening:!0,addRoute:p,removeRoute:T,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:_,resolve:b,options:t,push:g,replace:w,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:$.add,isReady:Z,install(V){V.component("RouterLink",JO),V.component("RouterView",nP),V.config.globalProperties.$router=G,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>gs(l)}),lo&&!z&&l.value===vi&&(z=!0,g(i.location).catch(se=>{}));const Y={};for(const se in vi)Object.defineProperty(Y,se,{get:()=>l.value[se],enumerable:!0});V.provide(Wu,G),V.provide(kh,Zg(Y)),V.provide(mf,l);const X=V.unmount;ne.add(V),V.unmount=function(){ne.delete(V),ne.size<1&&(u=vi,S&&S(),S=null,l.value=vi,z=!1,W=!1),X()}}};function F(V){return V.reduce((Y,X)=>Y.then(()=>P(X)),Promise.resolve())}return G}function el(){return Yn(Wu)}function iP(t){return Yn(kh)}const sP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='currentColor'%20class='bi%20bi-list'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill-rule='evenodd'%20d='M2.5%2012a.5.5%200%200%201%20.5-.5h10a.5.5%200%200%201%200%201H3a.5.5%200%200%201-.5-.5m0-4a.5.5%200%200%201%20.5-.5h10a.5.5%200%200%201%200%201H3a.5.5%200%200%201-.5-.5m0-4a.5.5%200%200%201%20.5-.5h10a.5.5%200%200%201%200%201H3a.5.5%200%200%201-.5-.5'/%3e%3c/svg%3e",si=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},oP={class:"navContainer"},aP={class:"navContent"},lP={class:"desktopMenu"},uP={class:"navLinks"},cP={class:"authSection"},fP={key:0,class:"roleGroup"},hP={key:1,class:"roleGroup"},dP=["src"],pP={key:0,class:"mobileMenu"},gP={key:1,class:"mobileRoleRow"},mP={key:2,class:"mobileRoleRow"},Eg="uniquecreadm1225@gmail.com",yP={__name:"NavBar",setup(t){const e=el(),n=Ue(null),r=Ue(!1);ri(()=>{zu(qi,u=>n.value=u)});const i=Yt(()=>n.value&&n.value.email===Eg),s=Yt(()=>n.value&&n.value.email!==Eg),o=()=>{r.value=!r.value},a=()=>{r.value=!1},l=async()=>{await r_(qi),a(),e.push("/")};return(u,c)=>{const h=Ba("router-link");return Ve(),Be("nav",oP,[pe("div",aP,[it(h,{to:"/",class:"navLogo"},{default:rn(()=>[...c[0]||(c[0]=[xn("UniqueBeings",-1)])]),_:1}),pe("div",lP,[pe("div",uP,[it(h,{to:"/",class:"navBtn"},{default:rn(()=>[...c[1]||(c[1]=[xn("Home",-1)])]),_:1}),it(h,{to:"/list",class:"navBtn"},{default:rn(()=>[...c[2]||(c[2]=[xn("Creatures",-1)])]),_:1}),n.value?(Ve(),uo(h,{key:0,to:"/settings",class:"navBtn"},{default:rn(()=>[...c[3]||(c[3]=[xn("Settings",-1)])]),_:1})):_t("",!0)]),pe("div",cP,[i.value?(Ve(),Be("div",fP,[it(h,{to:"/create-user",class:"navBtn addUserBtn"},{default:rn(()=>[...c[4]||(c[4]=[pe("span",{class:"plusIcon"},"+",-1),xn(" New User ",-1)])]),_:1}),c[5]||(c[5]=pe("div",{class:"badge adminBadge"},"Admin Mode",-1))])):_t("",!0),s.value?(Ve(),Be("div",hP,[...c[6]||(c[6]=[pe("div",{class:"badge creatorBadge"},"Creator Mode",-1)])])):_t("",!0),n.value?(Ve(),Be("button",{key:2,onClick:l,class:"navBtn logoutBtn"},"Logout")):(Ve(),uo(h,{key:3,to:"/login",class:"navBtn loginBtn"},{default:rn(()=>[...c[7]||(c[7]=[xn("Login",-1)])]),_:1}))])]),pe("button",{class:"hamburgerBtn",onClick:o},[pe("img",{src:gs(sP),alt:"Menu",class:"menuIcon"},null,8,dP)])]),it(Fm,{name:"slide"},{default:rn(()=>[r.value?(Ve(),Be("div",pP,[it(h,{to:"/",class:"mobileLink",onClick:a},{default:rn(()=>[...c[8]||(c[8]=[xn("Home",-1)])]),_:1}),it(h,{to:"/list",class:"mobileLink",onClick:a},{default:rn(()=>[...c[9]||(c[9]=[xn("Creatures",-1)])]),_:1}),n.value?(Ve(),uo(h,{key:0,to:"/settings",class:"mobileLink",onClick:a},{default:rn(()=>[...c[10]||(c[10]=[xn("Settings",-1)])]),_:1})):_t("",!0),c[15]||(c[15]=pe("div",{class:"mobileDivider"},null,-1)),i.value?(Ve(),Be("div",gP,[c[12]||(c[12]=pe("div",{class:"badge adminBadge"},"Admin Mode",-1)),it(h,{to:"/create-user",class:"mobileLink",style:{"font-size":"1rem"},onClick:a},{default:rn(()=>[...c[11]||(c[11]=[xn(" + New User ",-1)])]),_:1})])):_t("",!0),s.value?(Ve(),Be("div",mP,[...c[13]||(c[13]=[pe("div",{class:"badge creatorBadge"},"Creator Mode",-1)])])):_t("",!0),n.value?(Ve(),Be("button",{key:3,onClick:l,class:"navBtn logoutBtn mobileAuthBtn"},"Logout")):(Ve(),uo(h,{key:4,to:"/login",class:"mobileLink mobileAuthLink",onClick:a},{default:rn(()=>[...c[14]||(c[14]=[xn(" Login ",-1)])]),_:1}))])):_t("",!0)]),_:1})])}}},vP=si(yP,[["__scopeId","data-v-82075dc0"]]),_P={class:"appLayout"},bP={class:"mainContent"},EP={__name:"App",setup(t){const e=Ue(!1),n=()=>{e.value=window.scrollY>300},r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return ri(()=>{window.addEventListener("scroll",n)}),Nf(()=>{window.removeEventListener("scroll",n)}),(i,s)=>{const o=Ba("router-view");return Ve(),Be("div",_P,[it(vP),pe("main",bP,[it(o)]),s[0]||(s[0]=pe("footer",{class:"appFooter"},[pe("p",null," 2025 Unique Beings Archive")],-1)),it(Fm,{name:"fade"},{default:rn(()=>[Ln(pe("button",{onClick:r,class:"scrollTopBtn",title:"Scroll to top"},"  ",512),[[BE,e.value]])]),_:1})])}}},TP=si(EP,[["__scopeId","data-v-969ecd04"]]),wP={},AP={class:"container homeContainer"};function IP(t,e){const n=Ba("router-link");return Ve(),Be("div",AP,[e[1]||(e[1]=pe("h1",{class:"mainTitle"},"Welcome to Unique Beings",-1)),e[2]||(e[2]=pe("p",{class:"subtitle"},"An archive of the strange and beautiful.",-1)),it(n,{to:"/list"},{default:rn(()=>[...e[0]||(e[0]=[pe("button",{class:"btn btnPrimary ctaButton"},"Enter Archive",-1)])]),_:1})])}const SP=si(wP,[["render",IP],["__scopeId","data-v-b1652811"]]),RP={class:"imageContainer"},OP=["src","alt"],PP={class:"cardContent"},CP={class:"cardTitle"},kP={__name:"CreatureCard",props:["creature"],setup(t){const e=t,n=el(),r=()=>{n.push(`/creature/${e.creature.id}`)},i=s=>s?s.includes("cloudinary.com")?s.replace("/upload/","/upload/c_fill,w_400,h_300,g_auto/"):s:"https://via.placeholder.com/400";return(s,o)=>(Ve(),Be("div",{class:"cardWrapper",onClick:r},[pe("div",RP,[pe("img",{src:i(t.creature.image),alt:t.creature.name,class:"cardImage"},null,8,OP)]),pe("div",PP,[pe("h3",CP,Mt(t.creature.name),1)])]))}},NP=si(kP,[["__scopeId","data-v-8e8da678"]]);var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ol={exports:{}};var xP=Ol.exports,Tg;function DP(){return Tg||(Tg=1,(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:xP,function(){return(function(n){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)})([(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(18),a=i(19),l=i(45),u=i(46),c=i(47),h=i(48),d=i(49),p=i(12),T=i(32),_=i(33),v=i(31),b=i(1),E={Scope:b.Scope,create:b.create,find:b.find,query:b.query,register:b.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:h.default,Scroll:l.default,Block:c.default,Inline:u.default,Text:d.default,Attributor:{Attribute:p.default,Class:T.default,Style:_.default,Store:v.default}};r.default=E}),(function(n,r,i){var s=this&&this.__extends||(function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,E){b.__proto__=E}||function(b,E){for(var m in E)E.hasOwnProperty(m)&&(b[m]=E[m])};return function(b,E){v(b,E);function m(){this.constructor=b}b.prototype=E===null?Object.create(E):(m.prototype=E.prototype,new m)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=(function(v){s(b,v);function b(E){var m=this;return E="[Parchment] "+E,m=v.call(this,E)||this,m.message=E,m.name=m.constructor.name,m}return b})(Error);r.ParchmentError=o;var a={},l={},u={},c={};r.DATA_KEY="__blot";var h;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function d(v,b){var E=T(v);if(E==null)throw new o("Unable to create "+v+" blot");var m=E,g=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:m.create(b);return new m(g,b)}r.create=d;function p(v,b){return b===void 0&&(b=!1),v==null?null:v[r.DATA_KEY]!=null?v[r.DATA_KEY].blot:b?p(v.parentNode,b):null}r.find=p;function T(v,b){b===void 0&&(b=h.ANY);var E;if(typeof v=="string")E=c[v]||a[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)E=c.text;else if(typeof v=="number")v&h.LEVEL&h.BLOCK?E=c.block:v&h.LEVEL&h.INLINE&&(E=c.inline);else if(v instanceof HTMLElement){var m=(v.getAttribute("class")||"").split(/\s+/);for(var g in m)if(E=l[m[g]],E)break;E=E||u[v.tagName]}return E==null?null:b&h.LEVEL&E.scope&&b&h.TYPE&E.scope?E:null}r.query=T;function _(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];if(v.length>1)return v.map(function(g){return _(g)});var E=v[0];if(typeof E.blotName!="string"&&typeof E.attrName!="string")throw new o("Invalid definition");if(E.blotName==="abstract")throw new o("Cannot register abstract class");if(c[E.blotName||E.attrName]=E,typeof E.keyName=="string")a[E.keyName]=E;else if(E.className!=null&&(l[E.className]=E),E.tagName!=null){Array.isArray(E.tagName)?E.tagName=E.tagName.map(function(g){return g.toUpperCase()}):E.tagName=E.tagName.toUpperCase();var m=Array.isArray(E.tagName)?E.tagName:[E.tagName];m.forEach(function(g){(u[g]==null||E.className==null)&&(u[g]=E)})}return E}r.register=_}),(function(n,r,i){var s=i(51),o=i(11),a=i(3),l=i(20),u="\0",c=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};c.prototype.insert=function(h,d){var p={};return h.length===0?this:(p.insert=h,d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(p.attributes=d),this.push(p))},c.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},c.prototype.retain=function(h,d){if(h<=0)return this;var p={retain:h};return d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(p.attributes=d),this.push(p)},c.prototype.push=function(h){var d=this.ops.length,p=this.ops[d-1];if(h=a(!0,{},h),typeof p=="object"){if(typeof h.delete=="number"&&typeof p.delete=="number")return this.ops[d-1]={delete:p.delete+h.delete},this;if(typeof p.delete=="number"&&h.insert!=null&&(d-=1,p=this.ops[d-1],typeof p!="object"))return this.ops.unshift(h),this;if(o(h.attributes,p.attributes)){if(typeof h.insert=="string"&&typeof p.insert=="string")return this.ops[d-1]={insert:p.insert+h.insert},typeof h.attributes=="object"&&(this.ops[d-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof p.retain=="number")return this.ops[d-1]={retain:p.retain+h.retain},typeof h.attributes=="object"&&(this.ops[d-1].attributes=h.attributes),this}}return d===this.ops.length?this.ops.push(h):this.ops.splice(d,0,h),this},c.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},c.prototype.filter=function(h){return this.ops.filter(h)},c.prototype.forEach=function(h){this.ops.forEach(h)},c.prototype.map=function(h){return this.ops.map(h)},c.prototype.partition=function(h){var d=[],p=[];return this.forEach(function(T){var _=h(T)?d:p;_.push(T)}),[d,p]},c.prototype.reduce=function(h,d){return this.ops.reduce(h,d)},c.prototype.changeLength=function(){return this.reduce(function(h,d){return d.insert?h+l.length(d):d.delete?h-d.delete:h},0)},c.prototype.length=function(){return this.reduce(function(h,d){return h+l.length(d)},0)},c.prototype.slice=function(h,d){h=h||0,typeof d!="number"&&(d=1/0);for(var p=[],T=l.iterator(this.ops),_=0;_<d&&T.hasNext();){var v;_<h?v=T.next(h-_):(v=T.next(d-_),p.push(v)),_+=l.length(v)}return new c(p)},c.prototype.compose=function(h){var d=l.iterator(this.ops),p=l.iterator(h.ops),T=[],_=p.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){for(var v=_.retain;d.peekType()==="insert"&&d.peekLength()<=v;)v-=d.peekLength(),T.push(d.next());_.retain-v>0&&p.next(_.retain-v)}for(var b=new c(T);d.hasNext()||p.hasNext();)if(p.peekType()==="insert")b.push(p.next());else if(d.peekType()==="delete")b.push(d.next());else{var E=Math.min(d.peekLength(),p.peekLength()),m=d.next(E),g=p.next(E);if(typeof g.retain=="number"){var w={};typeof m.retain=="number"?w.retain=E:w.insert=m.insert;var x=l.attributes.compose(m.attributes,g.attributes,typeof m.retain=="number");if(x&&(w.attributes=x),b.push(w),!p.hasNext()&&o(b.ops[b.ops.length-1],w)){var R=new c(d.rest());return b.concat(R).chop()}}else typeof g.delete=="number"&&typeof m.retain=="number"&&b.push(g)}return b.chop()},c.prototype.concat=function(h){var d=new c(this.ops.slice());return h.ops.length>0&&(d.push(h.ops[0]),d.ops=d.ops.concat(h.ops.slice(1))),d},c.prototype.diff=function(h,d){if(this.ops===h.ops)return new c;var p=[this,h].map(function(E){return E.map(function(m){if(m.insert!=null)return typeof m.insert=="string"?m.insert:u;var g=E===h?"on":"with";throw new Error("diff() called "+g+" non-document")}).join("")}),T=new c,_=s(p[0],p[1],d),v=l.iterator(this.ops),b=l.iterator(h.ops);return _.forEach(function(E){for(var m=E[1].length;m>0;){var g=0;switch(E[0]){case s.INSERT:g=Math.min(b.peekLength(),m),T.push(b.next(g));break;case s.DELETE:g=Math.min(m,v.peekLength()),v.next(g),T.delete(g);break;case s.EQUAL:g=Math.min(v.peekLength(),b.peekLength(),m);var w=v.next(g),x=b.next(g);o(w.insert,x.insert)?T.retain(g,l.attributes.diff(w.attributes,x.attributes)):T.push(x).delete(g);break}m-=g}}),T.chop()},c.prototype.eachLine=function(h,d){d=d||`
`;for(var p=l.iterator(this.ops),T=new c,_=0;p.hasNext();){if(p.peekType()!=="insert")return;var v=p.peek(),b=l.length(v)-p.peekLength(),E=typeof v.insert=="string"?v.insert.indexOf(d,b)-b:-1;if(E<0)T.push(p.next());else if(E>0)T.push(p.next(E));else{if(h(T,p.next(1).attributes||{},_)===!1)return;_+=1,T=new c}}T.length()>0&&h(T,{},_)},c.prototype.transform=function(h,d){if(d=!!d,typeof h=="number")return this.transformPosition(h,d);for(var p=l.iterator(this.ops),T=l.iterator(h.ops),_=new c;p.hasNext()||T.hasNext();)if(p.peekType()==="insert"&&(d||T.peekType()!=="insert"))_.retain(l.length(p.next()));else if(T.peekType()==="insert")_.push(T.next());else{var v=Math.min(p.peekLength(),T.peekLength()),b=p.next(v),E=T.next(v);if(b.delete)continue;E.delete?_.push(E):_.retain(v,l.attributes.transform(b.attributes,E.attributes,d))}return _.chop()},c.prototype.transformPosition=function(h,d){d=!!d;for(var p=l.iterator(this.ops),T=0;p.hasNext()&&T<=h;){var _=p.peekLength(),v=p.peekType();if(p.next(),v==="delete"){h-=Math.min(_,h-T);continue}else v==="insert"&&(T<h||!d)&&(h+=_);T+=_}return h},n.exports=c}),(function(n,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(p){return typeof Array.isArray=="function"?Array.isArray(p):s.call(p)==="[object Array]"},u=function(p){if(!p||s.call(p)!=="[object Object]")return!1;var T=i.call(p,"constructor"),_=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!T&&!_)return!1;var v;for(v in p);return typeof v>"u"||i.call(p,v)},c=function(p,T){o&&T.name==="__proto__"?o(p,T.name,{enumerable:!0,configurable:!0,value:T.newValue,writable:!0}):p[T.name]=T.newValue},h=function(p,T){if(T==="__proto__")if(i.call(p,T)){if(a)return a(p,T).value}else return;return p[T]};n.exports=function d(){var p,T,_,v,b,E,m=arguments[0],g=1,w=arguments.length,x=!1;for(typeof m=="boolean"&&(x=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<w;++g)if(p=arguments[g],p!=null)for(T in p)_=h(m,T),v=h(p,T),m!==v&&(x&&v&&(u(v)||(b=l(v)))?(b?(b=!1,E=_&&l(_)?_:[]):E=_&&u(_)?_:{},c(m,{name:T,newValue:d(x,E,v)})):typeof v<"u"&&c(m,{name:T,newValue:v}));return m}}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=(function(){function y(I,S){for(var D=0;D<S.length;D++){var B=S[D];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(I,B.key,B)}}return function(I,S,D){return S&&y(I.prototype,S),D&&y(I,D),I}})(),o=function y(I,S,D){I===null&&(I=Function.prototype);var B=Object.getOwnPropertyDescriptor(I,S);if(B===void 0){var $=Object.getPrototypeOf(I);return $===null?void 0:y($,S,D)}else{if("value"in B)return B.value;var W=B.get;return W===void 0?void 0:W.call(D)}},a=i(3),l=m(a),u=i(2),c=m(u),h=i(0),d=m(h),p=i(16),T=m(p),_=i(6),v=m(_),b=i(7),E=m(b);function m(y){return y&&y.__esModule?y:{default:y}}function g(y,I){if(!(y instanceof I))throw new TypeError("Cannot call a class as a function")}function w(y,I){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:y}function x(y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);y.prototype=Object.create(I&&I.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(y,I):y.__proto__=I)}var R=1,A=(function(y){x(I,y);function I(){return g(this,I),w(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return s(I,[{key:"attach",value:function(){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(D,B){var $=d.default.query(D,d.default.Scope.BLOCK_ATTRIBUTE);$!=null&&this.attributes.attribute($,B)}},{key:"formatAt",value:function(D,B,$,W){this.format($,W)}},{key:"insertAt",value:function(D,B,$){if(typeof B=="string"&&B.endsWith(`
`)){var W=d.default.create(P.blotName);this.parent.insertBefore(W,D===0?this:this.next),W.insertAt(0,B.slice(0,-1))}else o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,D,B,$)}}]),I})(d.default.Embed);A.scope=d.default.Scope.BLOCK_BLOT;var P=(function(y){x(I,y);function I(S){g(this,I);var D=w(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,S));return D.cache={},D}return s(I,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(D,B){return B.length()===0?D:D.insert(B.value(),O(B))},new c.default).insert(`
`,O(this))),this.cache.delta}},{key:"deleteAt",value:function(D,B){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"deleteAt",this).call(this,D,B),this.cache={}}},{key:"formatAt",value:function(D,B,$,W){B<=0||(d.default.query($,d.default.Scope.BLOCK)?D+B===this.length()&&this.format($,W):o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"formatAt",this).call(this,D,Math.min(B,this.length()-D-1),$,W),this.cache={})}},{key:"insertAt",value:function(D,B,$){if($!=null)return o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,D,B,$);if(B.length!==0){var W=B.split(`
`),ae=W.shift();ae.length>0&&(D<this.length()-1||this.children.tail==null?o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,Math.min(D,this.length()-1),ae):this.children.tail.insertAt(this.children.tail.length(),ae),this.cache={});var Z=this;W.reduce(function(H,L){return Z=Z.split(H,!0),Z.insertAt(0,L),L.length},D+ae.length)}}},{key:"insertBefore",value:function(D,B){var $=this.children.head;o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertBefore",this).call(this,D,B),$ instanceof T.default&&$.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"length",this).call(this)+R),this.cache.length}},{key:"moveChildren",value:function(D,B){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"moveChildren",this).call(this,D,B),this.cache={}}},{key:"optimize",value:function(D){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,D),this.cache={}}},{key:"path",value:function(D){return o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"path",this).call(this,D,!0)}},{key:"removeChild",value:function(D){o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"removeChild",this).call(this,D),this.cache={}}},{key:"split",value:function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(D===0||D>=this.length()-R)){var $=this.clone();return D===0?(this.parent.insertBefore($,this),this):(this.parent.insertBefore($,this.next),$)}else{var W=o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"split",this).call(this,D,B);return this.cache={},W}}}]),I})(d.default.Block);P.blotName="block",P.tagName="P",P.defaultChild="break",P.allowedChildren=[v.default,d.default.Embed,E.default];function O(y){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return y==null||(typeof y.formats=="function"&&(I=(0,l.default)(I,y.formats())),y.parent==null||y.parent.blotName=="scroll"||y.parent.statics.scope!==y.statics.scope)?I:O(y.parent,I)}r.bubbleFormats=O,r.BlockEmbed=A,r.default=P}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},o=(function(){function Z(H,L){var j=[],z=!0,ne=!1,G=void 0;try{for(var F=H[Symbol.iterator](),V;!(z=(V=F.next()).done)&&(j.push(V.value),!(L&&j.length===L));z=!0);}catch(Y){ne=!0,G=Y}finally{try{!z&&F.return&&F.return()}finally{if(ne)throw G}}return j}return function(H,L){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return Z(H,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function Z(H,L){for(var j=0;j<L.length;j++){var z=L[j];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(H,z.key,z)}}return function(H,L,j){return L&&Z(H.prototype,L),j&&Z(H,j),H}})();i(50);var l=i(2),u=O(l),c=i(14),h=O(c),d=i(8),p=O(d),T=i(9),_=O(T),v=i(0),b=O(v),E=i(15),m=O(E),g=i(3),w=O(g),x=i(10),R=O(x),A=i(34),P=O(A);function O(Z){return Z&&Z.__esModule?Z:{default:Z}}function y(Z,H,L){return H in Z?Object.defineProperty(Z,H,{value:L,enumerable:!0,configurable:!0,writable:!0}):Z[H]=L,Z}function I(Z,H){if(!(Z instanceof H))throw new TypeError("Cannot call a class as a function")}var S=(0,R.default)("quill"),D=(function(){a(Z,null,[{key:"debug",value:function(L){L===!0&&(L="log"),R.default.level(L)}},{key:"find",value:function(L){return L.__quill||b.default.find(L)}},{key:"import",value:function(L){return this.imports[L]==null&&S.error("Cannot import "+L+". Are you sure it was registered?"),this.imports[L]}},{key:"register",value:function(L,j){var z=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof L!="string"){var G=L.attrName||L.blotName;typeof G=="string"?this.register("formats/"+G,L,j):Object.keys(L).forEach(function(F){z.register(F,L[F],j)})}else this.imports[L]!=null&&!ne&&S.warn("Overwriting "+L+" with",j),this.imports[L]=j,(L.startsWith("blots/")||L.startsWith("formats/"))&&j.blotName!=="abstract"?b.default.register(j):L.startsWith("modules")&&typeof j.register=="function"&&j.register()}}]);function Z(H){var L=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(I(this,Z),this.options=B(H,j),this.container=this.options.container,this.container==null)return S.error("Invalid Quill container",H);this.options.debug&&Z.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=b.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new m.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(G){G===p.default.events.TEXT_CHANGE&&L.root.classList.toggle("ql-blank",L.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(G,F){var V=L.selection.lastRange,Y=V&&V.length===0?V.index:void 0;$.call(L,function(){return L.editor.update(null,F,Y)},G)});var ne=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(ne),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(Z,[{key:"addContainer",value:function(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof L=="string"){var z=L;L=document.createElement("div"),L.classList.add(z)}return this.container.insertBefore(L,j),L}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(L,j,z){var ne=this,G=W(L,j,z),F=o(G,4);return L=F[0],j=F[1],z=F[3],$.call(this,function(){return ne.editor.deleteText(L,j)},z,L,-1*j)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(L),this.container.classList.toggle("ql-disabled",!L)}},{key:"focus",value:function(){var L=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=L,this.scrollIntoView()}},{key:"format",value:function(L,j){var z=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return $.call(this,function(){var G=z.getSelection(!0),F=new u.default;if(G==null)return F;if(b.default.query(L,b.default.Scope.BLOCK))F=z.editor.formatLine(G.index,G.length,y({},L,j));else{if(G.length===0)return z.selection.format(L,j),F;F=z.editor.formatText(G.index,G.length,y({},L,j))}return z.setSelection(G,p.default.sources.SILENT),F},ne)}},{key:"formatLine",value:function(L,j,z,ne,G){var F=this,V=void 0,Y=W(L,j,z,ne,G),X=o(Y,4);return L=X[0],j=X[1],V=X[2],G=X[3],$.call(this,function(){return F.editor.formatLine(L,j,V)},G,L,0)}},{key:"formatText",value:function(L,j,z,ne,G){var F=this,V=void 0,Y=W(L,j,z,ne,G),X=o(Y,4);return L=X[0],j=X[1],V=X[2],G=X[3],$.call(this,function(){return F.editor.formatText(L,j,V)},G,L,0)}},{key:"getBounds",value:function(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof L=="number"?z=this.selection.getBounds(L,j):z=this.selection.getBounds(L.index,L.length);var ne=this.container.getBoundingClientRect();return{bottom:z.bottom-ne.top,height:z.height,left:z.left-ne.left,right:z.right-ne.left,top:z.top-ne.top,width:z.width}}},{key:"getContents",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,z=W(L,j),ne=o(z,2);return L=ne[0],j=ne[1],this.editor.getContents(L,j)}},{key:"getFormat",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof L=="number"?this.editor.getFormat(L,j):this.editor.getFormat(L.index,L.length)}},{key:"getIndex",value:function(L){return L.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(L){return this.scroll.leaf(L)}},{key:"getLine",value:function(L){return this.scroll.line(L)}},{key:"getLines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof L!="number"?this.scroll.lines(L.index,L.length):this.scroll.lines(L,j)}},{key:"getModule",value:function(L){return this.theme.modules[L]}},{key:"getSelection",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return L&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,z=W(L,j),ne=o(z,2);return L=ne[0],j=ne[1],this.editor.getText(L,j)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(L,j,z){var ne=this,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Z.sources.API;return $.call(this,function(){return ne.editor.insertEmbed(L,j,z)},G,L)}},{key:"insertText",value:function(L,j,z,ne,G){var F=this,V=void 0,Y=W(L,0,z,ne,G),X=o(Y,4);return L=X[0],V=X[2],G=X[3],$.call(this,function(){return F.editor.insertText(L,j,V)},G,L,j.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(L,j,z){this.clipboard.dangerouslyPasteHTML(L,j,z)}},{key:"removeFormat",value:function(L,j,z){var ne=this,G=W(L,j,z),F=o(G,4);return L=F[0],j=F[1],z=F[3],$.call(this,function(){return ne.editor.removeFormat(L,j)},z,L)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(L){var j=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return $.call(this,function(){L=new u.default(L);var ne=j.getLength(),G=j.editor.deleteText(0,ne),F=j.editor.applyDelta(L),V=F.ops[F.ops.length-1];V!=null&&typeof V.insert=="string"&&V.insert[V.insert.length-1]===`
`&&(j.editor.deleteText(j.getLength()-1,1),F.delete(1));var Y=G.compose(F);return Y},z)}},{key:"setSelection",value:function(L,j,z){if(L==null)this.selection.setRange(null,j||Z.sources.API);else{var ne=W(L,j,z),G=o(ne,4);L=G[0],j=G[1],z=G[3],this.selection.setRange(new E.Range(L,j),z),z!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,z=new u.default().insert(L);return this.setContents(z,j)}},{key:"update",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,j=this.scroll.update(L);return this.selection.update(L),j}},{key:"updateContents",value:function(L){var j=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return $.call(this,function(){return L=new u.default(L),j.editor.applyDelta(L,z)},z,!0)}}]),Z})();D.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},D.events=p.default.events,D.sources=p.default.sources,D.version="1.3.7",D.imports={delta:u.default,parchment:b.default,"core/module":_.default,"core/theme":P.default};function B(Z,H){if(H=(0,w.default)(!0,{container:Z,modules:{clipboard:!0,keyboard:!0,history:!0}},H),!H.theme||H.theme===D.DEFAULTS.theme)H.theme=P.default;else if(H.theme=D.import("themes/"+H.theme),H.theme==null)throw new Error("Invalid theme "+H.theme+". Did you register it?");var L=(0,w.default)(!0,{},H.theme.DEFAULTS);[L,H].forEach(function(ne){ne.modules=ne.modules||{},Object.keys(ne.modules).forEach(function(G){ne.modules[G]===!0&&(ne.modules[G]={})})});var j=Object.keys(L.modules).concat(Object.keys(H.modules)),z=j.reduce(function(ne,G){var F=D.import("modules/"+G);return F==null?S.error("Cannot load "+G+" module. Are you sure you registered it?"):ne[G]=F.DEFAULTS||{},ne},{});return H.modules!=null&&H.modules.toolbar&&H.modules.toolbar.constructor!==Object&&(H.modules.toolbar={container:H.modules.toolbar}),H=(0,w.default)(!0,{},D.DEFAULTS,{modules:z},L,H),["bounds","container","scrollingContainer"].forEach(function(ne){typeof H[ne]=="string"&&(H[ne]=document.querySelector(H[ne]))}),H.modules=Object.keys(H.modules).reduce(function(ne,G){return H.modules[G]&&(ne[G]=H.modules[G]),ne},{}),H}function $(Z,H,L,j){if(this.options.strict&&!this.isEnabled()&&H===p.default.sources.USER)return new u.default;var z=L==null?null:this.getSelection(),ne=this.editor.delta,G=Z();if(z!=null&&(L===!0&&(L=z.index),j==null?z=ae(z,G,H):j!==0&&(z=ae(z,L,j,H)),this.setSelection(z,p.default.sources.SILENT)),G.length()>0){var F,V=[p.default.events.TEXT_CHANGE,G,ne,H];if((F=this.emitter).emit.apply(F,[p.default.events.EDITOR_CHANGE].concat(V)),H!==p.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,V)}}return G}function W(Z,H,L,j,z){var ne={};return typeof Z.index=="number"&&typeof Z.length=="number"?typeof H!="number"?(z=j,j=L,L=H,H=Z.length,Z=Z.index):(H=Z.length,Z=Z.index):typeof H!="number"&&(z=j,j=L,L=H,H=0),(typeof L>"u"?"undefined":s(L))==="object"?(ne=L,z=j):typeof L=="string"&&(j!=null?ne[L]=j:z=L),z=z||p.default.sources.API,[Z,H,ne,z]}function ae(Z,H,L,j){if(Z==null)return null;var z=void 0,ne=void 0;if(H instanceof u.default){var G=[Z.index,Z.index+Z.length].map(function(X){return H.transformPosition(X,j!==p.default.sources.USER)}),F=o(G,2);z=F[0],ne=F[1]}else{var V=[Z.index,Z.index+Z.length].map(function(X){return X<H||X===H&&j===p.default.sources.USER?X:L>=0?X+L:Math.max(H,X+L)}),Y=o(V,2);z=Y[0],ne=Y[1]}return new E.Range(z,ne-z)}r.expandConfig=B,r.overload=W,r.default=D}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function v(b,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}return function(b,E,m){return E&&v(b.prototype,E),m&&v(b,m),b}})(),o=function v(b,E,m){b===null&&(b=Function.prototype);var g=Object.getOwnPropertyDescriptor(b,E);if(g===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:v(w,E,m)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(m)}},a=i(7),l=h(a),u=i(0),c=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function d(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function T(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var _=(function(v){T(b,v);function b(){return d(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"formatAt",value:function(m,g,w,x){if(b.compare(this.statics.blotName,w)<0&&c.default.query(w,c.default.Scope.BLOT)){var R=this.isolate(m,g);x&&R.wrap(w,x)}else o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"formatAt",this).call(this,m,g,w,x)}},{key:"optimize",value:function(m){if(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,m),this.parent instanceof b&&b.compare(this.statics.blotName,this.parent.statics.blotName)>0){var g=this.parent.isolate(this.offset(),this.length());this.moveChildren(g),g.wrap(this)}}}],[{key:"compare",value:function(m,g){var w=b.order.indexOf(m),x=b.order.indexOf(g);return w>=0||x>=0?w-x:m===g?0:m<g?-1:1}}]),b})(c.default.Inline);_.allowedChildren=[_,c.default.Embed,l.default],_.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=_}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function u(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function c(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var h=(function(d){c(p,d);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default.Text);r.default=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function E(m,g){for(var w=0;w<g.length;w++){var x=g[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}return function(m,g,w){return g&&E(m.prototype,g),w&&E(m,w),m}})(),o=function E(m,g,w){m===null&&(m=Function.prototype);var x=Object.getOwnPropertyDescriptor(m,g);if(x===void 0){var R=Object.getPrototypeOf(m);return R===null?void 0:E(R,g,w)}else{if("value"in x)return x.value;var A=x.get;return A===void 0?void 0:A.call(w)}},a=i(54),l=h(a),u=i(10),c=h(u);function h(E){return E&&E.__esModule?E:{default:E}}function d(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function p(E,m){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:E}function T(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(E,m):E.__proto__=m)}var _=(0,c.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(E){document.addEventListener(E,function(){for(var m=arguments.length,g=Array(m),w=0;w<m;w++)g[w]=arguments[w];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(x){if(x.__quill&&x.__quill.emitter){var R;(R=x.__quill.emitter).handleDOM.apply(R,g)}})})});var b=(function(E){T(m,E);function m(){d(this,m);var g=p(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return g.listeners={},g.on("error",_.error),g}return s(m,[{key:"emit",value:function(){_.log.apply(_,arguments),o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(w){for(var x=arguments.length,R=Array(x>1?x-1:0),A=1;A<x;A++)R[A-1]=arguments[A];(this.listeners[w.type]||[]).forEach(function(P){var O=P.node,y=P.handler;(w.target===O||O.contains(w.target))&&y.apply(void 0,[w].concat(R))})}},{key:"listenDOM",value:function(w,x,R){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push({node:x,handler:R})}}]),m})(l.default);b.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},b.sources={API:"api",SILENT:"silent",USER:"user"},r.default=b}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=u};o.DEFAULTS={},r.default=o}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(u){if(s.indexOf(u)<=s.indexOf(o)){for(var c,h=arguments.length,d=Array(h>1?h-1:0),p=1;p<h;p++)d[p-1]=arguments[p];(c=console)[u].apply(c,d)}}function l(u){return s.reduce(function(c,h){return c[h]=a.bind(console,h,u),c},{})}a.level=l.level=function(u){o=u},r.default=l}),(function(n,r,i){var s=Array.prototype.slice,o=i(52),a=i(53),l=n.exports=function(d,p,T){return T||(T={}),d===p?!0:d instanceof Date&&p instanceof Date?d.getTime()===p.getTime():!d||!p||typeof d!="object"&&typeof p!="object"?T.strict?d===p:d==p:h(d,p,T)};function u(d){return d==null}function c(d){return!(!d||typeof d!="object"||typeof d.length!="number"||typeof d.copy!="function"||typeof d.slice!="function"||d.length>0&&typeof d[0]!="number")}function h(d,p,T){var _,v;if(u(d)||u(p)||d.prototype!==p.prototype)return!1;if(a(d))return a(p)?(d=s.call(d),p=s.call(p),l(d,p,T)):!1;if(c(d)){if(!c(p)||d.length!==p.length)return!1;for(_=0;_<d.length;_++)if(d[_]!==p[_])return!1;return!0}try{var b=o(d),E=o(p)}catch{return!1}if(b.length!=E.length)return!1;for(b.sort(),E.sort(),_=b.length-1;_>=0;_--)if(b[_]!=E[_])return!1;for(_=b.length-1;_>=0;_--)if(v=b[_],!l(d[v],p[v],T))return!1;return typeof d==typeof p}}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=(function(){function a(l,u,c){c===void 0&&(c={}),this.attrName=l,this.keyName=u;var h=s.Scope.TYPE&s.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&s.Scope.LEVEL|h:this.scope=s.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},a.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},a.prototype.canAdd=function(l,u){var c=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},a})();r.default=o}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=(function(){function A(P,O){var y=[],I=!0,S=!1,D=void 0;try{for(var B=P[Symbol.iterator](),$;!(I=($=B.next()).done)&&(y.push($.value),!(O&&y.length===O));I=!0);}catch(W){S=!0,D=W}finally{try{!I&&B.return&&B.return()}finally{if(S)throw D}}return y}return function(P,O){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return A(P,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function A(P,O){for(var y=0;y<O.length;y++){var I=O[y];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(P,I.key,I)}}return function(P,O,y){return O&&A(P.prototype,O),y&&A(P,y),P}})(),a=function A(P,O,y){P===null&&(P=Function.prototype);var I=Object.getOwnPropertyDescriptor(P,O);if(I===void 0){var S=Object.getPrototypeOf(P);return S===null?void 0:A(S,O,y)}else{if("value"in I)return I.value;var D=I.get;return D===void 0?void 0:D.call(y)}},l=i(2),u=E(l),c=i(0),h=E(c),d=i(4),p=E(d),T=i(6),_=E(T),v=i(7),b=E(v);function E(A){return A&&A.__esModule?A:{default:A}}function m(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}function g(A,P){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:A}function w(A,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);A.prototype=Object.create(P&&P.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(A,P):A.__proto__=P)}var x=(function(A){w(P,A);function P(){return m(this,P),g(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return P})(_.default);x.blotName="code",x.tagName="CODE";var R=(function(A){w(P,A);function P(){return m(this,P),g(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"delta",value:function(){var y=this,I=this.domNode.textContent;return I.endsWith(`
`)&&(I=I.slice(0,-1)),I.split(`
`).reduce(function(S,D){return S.insert(D).insert(`
`,y.formats())},new u.default)}},{key:"format",value:function(y,I){if(!(y===this.statics.blotName&&I)){var S=this.descendant(b.default,this.length()-1),D=s(S,1),B=D[0];B?.deleteAt(B.length()-1,1),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,y,I)}}},{key:"formatAt",value:function(y,I,S,D){if(I!==0&&!(h.default.query(S,h.default.Scope.BLOCK)==null||S===this.statics.blotName&&D===this.statics.formats(this.domNode))){var B=this.newlineIndex(y);if(!(B<0||B>=y+I)){var $=this.newlineIndex(y,!0)+1,W=B-$+1,ae=this.isolate($,W),Z=ae.next;ae.format(S,D),Z instanceof P&&Z.formatAt(0,y-$+I-W,S,D)}}}},{key:"insertAt",value:function(y,I,S){if(S==null){var D=this.descendant(b.default,y),B=s(D,2),$=B[0],W=B[1];$.insertAt(W,I)}}},{key:"length",value:function(){var y=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?y:y+1}},{key:"newlineIndex",value:function(y){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(I)return this.domNode.textContent.slice(0,y).lastIndexOf(`
`);var S=this.domNode.textContent.slice(y).indexOf(`
`);return S>-1?y+S:-1}},{key:"optimize",value:function(y){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,y);var I=this.next;I!=null&&I.prev===this&&I.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===I.statics.formats(I.domNode)&&(I.optimize(y),I.moveChildren(this),I.remove())}},{key:"replace",value:function(y){a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,y),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(I){var S=h.default.find(I);S==null?I.parentNode.removeChild(I):S instanceof h.default.Embed?S.remove():S.unwrap()})}}],[{key:"create",value:function(y){var I=a(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,y);return I.setAttribute("spellcheck",!1),I}},{key:"formats",value:function(){return!0}}]),P})(p.default);R.blotName="code-block",R.tagName="PRE",R.TAB="  ",r.Code=x,r.default=R}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},o=(function(){function Z(H,L){var j=[],z=!0,ne=!1,G=void 0;try{for(var F=H[Symbol.iterator](),V;!(z=(V=F.next()).done)&&(j.push(V.value),!(L&&j.length===L));z=!0);}catch(Y){ne=!0,G=Y}finally{try{!z&&F.return&&F.return()}finally{if(ne)throw G}}return j}return function(H,L){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return Z(H,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function Z(H,L){for(var j=0;j<L.length;j++){var z=L[j];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(H,z.key,z)}}return function(H,L,j){return L&&Z(H.prototype,L),j&&Z(H,j),H}})(),l=i(2),u=I(l),c=i(20),h=I(c),d=i(0),p=I(d),T=i(13),_=I(T),v=i(24),b=I(v),E=i(4),m=I(E),g=i(16),w=I(g),x=i(21),R=I(x),A=i(11),P=I(A),O=i(3),y=I(O);function I(Z){return Z&&Z.__esModule?Z:{default:Z}}function S(Z,H,L){return H in Z?Object.defineProperty(Z,H,{value:L,enumerable:!0,configurable:!0,writable:!0}):Z[H]=L,Z}function D(Z,H){if(!(Z instanceof H))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,$=(function(){function Z(H){D(this,Z),this.scroll=H,this.delta=this.getDelta()}return a(Z,[{key:"applyDelta",value:function(L){var j=this,z=!1;this.scroll.update();var ne=this.scroll.length();return this.scroll.batchStart(),L=ae(L),L.reduce(function(G,F){var V=F.retain||F.delete||F.insert.length||1,Y=F.attributes||{};if(F.insert!=null){if(typeof F.insert=="string"){var X=F.insert;X.endsWith(`
`)&&z&&(z=!1,X=X.slice(0,-1)),G>=ne&&!X.endsWith(`
`)&&(z=!0),j.scroll.insertAt(G,X);var se=j.scroll.line(G),ye=o(se,2),q=ye[0],K=ye[1],ee=(0,y.default)({},(0,E.bubbleFormats)(q));if(q instanceof m.default){var ue=q.descendant(p.default.Leaf,K),he=o(ue,1),ce=he[0];ee=(0,y.default)(ee,(0,E.bubbleFormats)(ce))}Y=h.default.attributes.diff(ee,Y)||{}}else if(s(F.insert)==="object"){var te=Object.keys(F.insert)[0];if(te==null)return G;j.scroll.insertAt(G,te,F.insert[te])}ne+=V}return Object.keys(Y).forEach(function(J){j.scroll.formatAt(G,V,J,Y[J])}),G+V},0),L.reduce(function(G,F){return typeof F.delete=="number"?(j.scroll.deleteAt(G,F.delete),G):G+(F.retain||F.insert.length||1)},0),this.scroll.batchEnd(),this.update(L)}},{key:"deleteText",value:function(L,j){return this.scroll.deleteAt(L,j),this.update(new u.default().retain(L).delete(j))}},{key:"formatLine",value:function(L,j){var z=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ne).forEach(function(G){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[G])){var F=z.scroll.lines(L,Math.max(j,1)),V=j;F.forEach(function(Y){var X=Y.length();if(!(Y instanceof _.default))Y.format(G,ne[G]);else{var se=L-Y.offset(z.scroll),ye=Y.newlineIndex(se+V)-se+1;Y.formatAt(se,ye,G,ne[G])}V-=X})}}),this.scroll.optimize(),this.update(new u.default().retain(L).retain(j,(0,R.default)(ne)))}},{key:"formatText",value:function(L,j){var z=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ne).forEach(function(G){z.scroll.formatAt(L,j,G,ne[G])}),this.update(new u.default().retain(L).retain(j,(0,R.default)(ne)))}},{key:"getContents",value:function(L,j){return this.delta.slice(L,L+j)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(L,j){return L.concat(j.delta())},new u.default)}},{key:"getFormat",value:function(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],ne=[];j===0?this.scroll.path(L).forEach(function(F){var V=o(F,1),Y=V[0];Y instanceof m.default?z.push(Y):Y instanceof p.default.Leaf&&ne.push(Y)}):(z=this.scroll.lines(L,j),ne=this.scroll.descendants(p.default.Leaf,L,j));var G=[z,ne].map(function(F){if(F.length===0)return{};for(var V=(0,E.bubbleFormats)(F.shift());Object.keys(V).length>0;){var Y=F.shift();if(Y==null)return V;V=W((0,E.bubbleFormats)(Y),V)}return V});return y.default.apply(y.default,G)}},{key:"getText",value:function(L,j){return this.getContents(L,j).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(L,j,z){return this.scroll.insertAt(L,j,z),this.update(new u.default().retain(L).insert(S({},j,z)))}},{key:"insertText",value:function(L,j){var z=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return j=j.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(L,j),Object.keys(ne).forEach(function(G){z.scroll.formatAt(L,j.length,G,ne[G])}),this.update(new u.default().retain(L).insert(j,(0,R.default)(ne)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var L=this.scroll.children.head;return L.statics.blotName!==m.default.blotName||L.children.length>1?!1:L.children.head instanceof w.default}},{key:"removeFormat",value:function(L,j){var z=this.getText(L,j),ne=this.scroll.line(L+j),G=o(ne,2),F=G[0],V=G[1],Y=0,X=new u.default;F!=null&&(F instanceof _.default?Y=F.newlineIndex(V)-V+1:Y=F.length()-V,X=F.delta().slice(V,V+Y-1).insert(`
`));var se=this.getContents(L,j+Y),ye=se.diff(new u.default().insert(z).concat(X)),q=new u.default().retain(L).concat(ye);return this.applyDelta(q)}},{key:"update",value:function(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ne=this.delta;if(j.length===1&&j[0].type==="characterData"&&j[0].target.data.match(B)&&p.default.find(j[0].target)){var G=p.default.find(j[0].target),F=(0,E.bubbleFormats)(G),V=G.offset(this.scroll),Y=j[0].oldValue.replace(b.default.CONTENTS,""),X=new u.default().insert(Y),se=new u.default().insert(G.value()),ye=new u.default().retain(V).concat(X.diff(se,z));L=ye.reduce(function(q,K){return K.insert?q.insert(K.insert,F):q.push(K)},new u.default),this.delta=ne.compose(L)}else this.delta=this.getDelta(),(!L||!(0,P.default)(ne.compose(L),this.delta))&&(L=ne.diff(this.delta,z));return L}}]),Z})();function W(Z,H){return Object.keys(H).reduce(function(L,j){return Z[j]==null||(H[j]===Z[j]?L[j]=H[j]:Array.isArray(H[j])?H[j].indexOf(Z[j])<0&&(L[j]=H[j].concat([Z[j]])):L[j]=[H[j],Z[j]]),L},{})}function ae(Z){return Z.reduce(function(H,L){if(L.insert===1){var j=(0,R.default)(L.attributes);return delete j.image,H.insert({image:L.attributes.image},j)}if(L.attributes!=null&&(L.attributes.list===!0||L.attributes.bullet===!0)&&(L=(0,R.default)(L),L.attributes.list?L.attributes.list="ordered":(L.attributes.list="bullet",delete L.attributes.bullet)),typeof L.insert=="string"){var z=L.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return H.insert(z,L.attributes)}return H.push(L)},new u.default)}r.default=$}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=(function(){function A(P,O){var y=[],I=!0,S=!1,D=void 0;try{for(var B=P[Symbol.iterator](),$;!(I=($=B.next()).done)&&(y.push($.value),!(O&&y.length===O));I=!0);}catch(W){S=!0,D=W}finally{try{!I&&B.return&&B.return()}finally{if(S)throw D}}return y}return function(P,O){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return A(P,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function A(P,O){for(var y=0;y<O.length;y++){var I=O[y];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(P,I.key,I)}}return function(P,O,y){return O&&A(P.prototype,O),y&&A(P,y),P}})(),a=i(0),l=b(a),u=i(21),c=b(u),h=i(11),d=b(h),p=i(8),T=b(p),_=i(10),v=b(_);function b(A){return A&&A.__esModule?A:{default:A}}function E(A){if(Array.isArray(A)){for(var P=0,O=Array(A.length);P<A.length;P++)O[P]=A[P];return O}else return Array.from(A)}function m(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}var g=(0,v.default)("quill:selection"),w=function A(P){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;m(this,A),this.index=P,this.length=O},x=(function(){function A(P,O){var y=this;m(this,A),this.emitter=O,this.scroll=P,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new w(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){y.mouseDown||setTimeout(y.update.bind(y,T.default.sources.USER),1)}),this.emitter.on(T.default.events.EDITOR_CHANGE,function(I,S){I===T.default.events.TEXT_CHANGE&&S.length()>0&&y.update(T.default.sources.SILENT)}),this.emitter.on(T.default.events.SCROLL_BEFORE_UPDATE,function(){if(y.hasFocus()){var I=y.getNativeRange();I!=null&&I.start.node!==y.cursor.textNode&&y.emitter.once(T.default.events.SCROLL_UPDATE,function(){try{y.setNativeRange(I.start.node,I.start.offset,I.end.node,I.end.offset)}catch{}})}}),this.emitter.on(T.default.events.SCROLL_OPTIMIZE,function(I,S){if(S.range){var D=S.range,B=D.startNode,$=D.startOffset,W=D.endNode,ae=D.endOffset;y.setNativeRange(B,$,W,ae)}}),this.update(T.default.sources.SILENT)}return o(A,[{key:"handleComposition",value:function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var y=O.cursor.restore();if(!y)return;setTimeout(function(){O.setNativeRange(y.startNode,y.startOffset,y.endNode,y.endOffset)},1)}})}},{key:"handleDragging",value:function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(T.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(O,y){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var I=this.getNativeRange();if(!(I==null||!I.native.collapsed||l.default.query(O,l.default.Scope.BLOCK))){if(I.start.node!==this.cursor.textNode){var S=l.default.find(I.start.node,!1);if(S==null)return;if(S instanceof l.default.Leaf){var D=S.split(I.start.offset);S.parent.insertBefore(this.cursor,D)}else S.insertBefore(this.cursor,I.start.node);this.cursor.attach()}this.cursor.format(O,y),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(O){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=this.scroll.length();O=Math.min(O,I-1),y=Math.min(O+y,I-1)-O;var S=void 0,D=this.scroll.leaf(O),B=s(D,2),$=B[0],W=B[1];if($==null)return null;var ae=$.position(W,!0),Z=s(ae,2);S=Z[0],W=Z[1];var H=document.createRange();if(y>0){H.setStart(S,W);var L=this.scroll.leaf(O+y),j=s(L,2);if($=j[0],W=j[1],$==null)return null;var z=$.position(W,!0),ne=s(z,2);return S=ne[0],W=ne[1],H.setEnd(S,W),H.getBoundingClientRect()}else{var G="left",F=void 0;return S instanceof Text?(W<S.data.length?(H.setStart(S,W),H.setEnd(S,W+1)):(H.setStart(S,W-1),H.setEnd(S,W),G="right"),F=H.getBoundingClientRect()):(F=$.domNode.getBoundingClientRect(),W>0&&(G="right")),{bottom:F.top+F.height,height:F.height,left:F[G],right:F[G],top:F.top,width:0}}}},{key:"getNativeRange",value:function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var y=O.getRangeAt(0);if(y==null)return null;var I=this.normalizeNative(y);return g.info("getNativeRange",I),I}},{key:"getRange",value:function(){var O=this.getNativeRange();if(O==null)return[null,null];var y=this.normalizedToRange(O);return[y,O]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(O){var y=this,I=[[O.start.node,O.start.offset]];O.native.collapsed||I.push([O.end.node,O.end.offset]);var S=I.map(function($){var W=s($,2),ae=W[0],Z=W[1],H=l.default.find(ae,!0),L=H.offset(y.scroll);return Z===0?L:H instanceof l.default.Container?L+H.length():L+H.index(ae,Z)}),D=Math.min(Math.max.apply(Math,E(S)),this.scroll.length()-1),B=Math.min.apply(Math,[D].concat(E(S)));return new w(B,D-B)}},{key:"normalizeNative",value:function(O){if(!R(this.root,O.startContainer)||!O.collapsed&&!R(this.root,O.endContainer))return null;var y={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[y.start,y.end].forEach(function(I){for(var S=I.node,D=I.offset;!(S instanceof Text)&&S.childNodes.length>0;)if(S.childNodes.length>D)S=S.childNodes[D],D=0;else if(S.childNodes.length===D)S=S.lastChild,D=S instanceof Text?S.data.length:S.childNodes.length+1;else break;I.node=S,I.offset=D}),y}},{key:"rangeToNative",value:function(O){var y=this,I=O.collapsed?[O.index]:[O.index,O.index+O.length],S=[],D=this.scroll.length();return I.forEach(function(B,$){B=Math.min(D-1,B);var W=void 0,ae=y.scroll.leaf(B),Z=s(ae,2),H=Z[0],L=Z[1],j=H.position(L,$!==0),z=s(j,2);W=z[0],L=z[1],S.push(W,L)}),S.length<2&&(S=S.concat(S)),S}},{key:"scrollIntoView",value:function(O){var y=this.lastRange;if(y!=null){var I=this.getBounds(y.index,y.length);if(I!=null){var S=this.scroll.length()-1,D=this.scroll.line(Math.min(y.index,S)),B=s(D,1),$=B[0],W=$;if(y.length>0){var ae=this.scroll.line(Math.min(y.index+y.length,S)),Z=s(ae,1);W=Z[0]}if(!($==null||W==null)){var H=O.getBoundingClientRect();I.top<H.top?O.scrollTop-=H.top-I.top:I.bottom>H.bottom&&(O.scrollTop+=I.bottom-H.bottom)}}}}},{key:"setNativeRange",value:function(O,y){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:y,D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(g.info("setNativeRange",O,y,I,S),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||I.parentNode==null))){var B=document.getSelection();if(B!=null)if(O!=null){this.hasFocus()||this.root.focus();var $=(this.getNativeRange()||{}).native;if($==null||D||O!==$.startContainer||y!==$.startOffset||I!==$.endContainer||S!==$.endOffset){O.tagName=="BR"&&(y=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),I.tagName=="BR"&&(S=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode);var W=document.createRange();W.setStart(O,y),W.setEnd(I,S),B.removeAllRanges(),B.addRange(W)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(O){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.default.sources.API;if(typeof y=="string"&&(I=y,y=!1),g.info("setRange",O),O!=null){var S=this.rangeToNative(O);this.setNativeRange.apply(this,E(S).concat([y]))}else this.setNativeRange(null);this.update(I)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T.default.sources.USER,y=this.lastRange,I=this.getRange(),S=s(I,2),D=S[0],B=S[1];if(this.lastRange=D,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,d.default)(y,this.lastRange)){var $;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[T.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(y),O];if(($=this.emitter).emit.apply($,[T.default.events.EDITOR_CHANGE].concat(W)),O!==T.default.sources.SILENT){var ae;(ae=this.emitter).emit.apply(ae,W)}}}}]),A})();function R(A,P){try{P.parentNode}catch{return!1}return P instanceof Text&&(P=P.parentNode),A.contains(P)}r.Range=w,r.default=x}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function T(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&T(_.prototype,v),b&&T(_,b),_}})(),o=function T(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var m=Object.getPrototypeOf(_);return m===null?void 0:T(m,v,b)}else{if("value"in E)return E.value;var g=E.get;return g===void 0?void 0:g.call(b)}},a=i(0),l=u(a);function u(T){return T&&T.__esModule?T:{default:T}}function c(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function h(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function d(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var p=(function(T){d(_,T);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"insertInto",value:function(b,E){b.children.length===0?o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertInto",this).call(this,b,E):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),_})(l.default.Embed);p.blotName="break",p.tagName="BR",r.default=p}),(function(n,r,i){var s=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var T in p)p.hasOwnProperty(T)&&(d[T]=p[T])};return function(d,p){h(d,p);function T(){this.constructor=d}d.prototype=p===null?Object.create(p):(T.prototype=p.prototype,new T)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),a=i(30),l=i(1),u=(function(h){s(d,h);function d(p){var T=h.call(this,p)||this;return T.build(),T}return d.prototype.appendChild=function(p){this.insertBefore(p)},d.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},d.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(T){try{var _=c(T);p.insertBefore(_,p.children.head||void 0)}catch(v){if(v instanceof l.ParchmentError)return;throw v}})},d.prototype.deleteAt=function(p,T){if(p===0&&T===this.length())return this.remove();this.children.forEachAt(p,T,function(_,v,b){_.deleteAt(v,b)})},d.prototype.descendant=function(p,T){var _=this.children.find(T),v=_[0],b=_[1];return p.blotName==null&&p(v)||p.blotName!=null&&v instanceof p?[v,b]:v instanceof d?v.descendant(p,b):[null,-1]},d.prototype.descendants=function(p,T,_){T===void 0&&(T=0),_===void 0&&(_=Number.MAX_VALUE);var v=[],b=_;return this.children.forEachAt(T,_,function(E,m,g){(p.blotName==null&&p(E)||p.blotName!=null&&E instanceof p)&&v.push(E),E instanceof d&&(v=v.concat(E.descendants(p,m,b))),b-=g}),v},d.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),h.prototype.detach.call(this)},d.prototype.formatAt=function(p,T,_,v){this.children.forEachAt(p,T,function(b,E,m){b.formatAt(E,m,_,v)})},d.prototype.insertAt=function(p,T,_){var v=this.children.find(p),b=v[0],E=v[1];if(b)b.insertAt(E,T,_);else{var m=_==null?l.create("text",T):l.create(T,_);this.appendChild(m)}},d.prototype.insertBefore=function(p,T){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(_){return p instanceof _}))throw new l.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,T)},d.prototype.length=function(){return this.children.reduce(function(p,T){return p+T.length()},0)},d.prototype.moveChildren=function(p,T){this.children.forEach(function(_){p.insertBefore(_,T)})},d.prototype.optimize=function(p){if(h.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var T=l.create(this.statics.defaultChild);this.appendChild(T),T.optimize(p)}else this.remove()},d.prototype.path=function(p,T){T===void 0&&(T=!1);var _=this.children.find(p,T),v=_[0],b=_[1],E=[[this,p]];return v instanceof d?E.concat(v.path(b,T)):(v!=null&&E.push([v,b]),E)},d.prototype.removeChild=function(p){this.children.remove(p)},d.prototype.replace=function(p){p instanceof d&&p.moveChildren(this),h.prototype.replace.call(this,p)},d.prototype.split=function(p,T){if(T===void 0&&(T=!1),!T){if(p===0)return this;if(p===this.length())return this.next}var _=this.clone();return this.parent.insertBefore(_,this.next),this.children.forEachAt(p,this.length(),function(v,b,E){v=v.split(b,T),_.appendChild(v)}),_},d.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},d.prototype.update=function(p,T){var _=this,v=[],b=[];p.forEach(function(E){E.target===_.domNode&&E.type==="childList"&&(v.push.apply(v,E.addedNodes),b.push.apply(b,E.removedNodes))}),b.forEach(function(E){if(!(E.parentNode!=null&&E.tagName!=="IFRAME"&&document.body.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var m=l.find(E);m!=null&&(m.domNode.parentNode==null||m.domNode.parentNode===_.domNode)&&m.detach()}}),v.filter(function(E){return E.parentNode==_.domNode}).sort(function(E,m){return E===m?0:E.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(E){var m=null;E.nextSibling!=null&&(m=l.find(E.nextSibling));var g=c(E);(g.next!=m||g.next==null)&&(g.parent!=null&&g.parent.removeChild(_),_.insertBefore(g,m||void 0))})},d})(a.default);function c(h){var d=l.find(h);if(d==null)try{d=l.create(h)}catch{d=l.create(l.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(T){d.domNode.appendChild(T)}),h.parentNode&&h.parentNode.replaceChild(d.domNode,h),d.attach()}return d}r.default=u}),(function(n,r,i){var s=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var T in p)p.hasOwnProperty(T)&&(d[T]=p[T])};return function(d,p){h(d,p);function T(){this.constructor=d}d.prototype=p===null?Object.create(p):(T.prototype=p.prototype,new T)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),a=i(31),l=i(17),u=i(1),c=(function(h){s(d,h);function d(p){var T=h.call(this,p)||this;return T.attributes=new a.default(T.domNode),T}return d.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},d.prototype.format=function(p,T){var _=u.query(p);_ instanceof o.default?this.attributes.attribute(_,T):T&&_!=null&&(p!==this.statics.blotName||this.formats()[p]!==T)&&this.replaceWith(p,T)},d.prototype.formats=function(){var p=this.attributes.values(),T=this.statics.formats(this.domNode);return T!=null&&(p[this.statics.blotName]=T),p},d.prototype.replaceWith=function(p,T){var _=h.prototype.replaceWith.call(this,p,T);return this.attributes.copy(_),_},d.prototype.update=function(p,T){var _=this;h.prototype.update.call(this,p,T),p.some(function(v){return v.target===_.domNode&&v.type==="attributes"})&&this.attributes.build()},d.prototype.wrap=function(p,T){var _=h.prototype.wrap.call(this,p,T);return _ instanceof d&&_.statics.scope===this.statics.scope&&this.attributes.move(_),_},d})(l.default);r.default=c}),(function(n,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])};return function(c,h){u(c,h);function d(){this.constructor=c}c.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),a=i(1),l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.value=function(h){return!0},c.prototype.index=function(h,d){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(d,1):-1},c.prototype.position=function(h,d){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(p+=1),[this.parent.domNode,p]},c.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},c.scope=a.Scope.INLINE_BLOT,c})(o.default);r.default=l}),(function(n,r,i){var s=i(11),o=i(3),a={attributes:{compose:function(u,c,h){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var d=o(!0,{},c);h||(d=Object.keys(d).reduce(function(T,_){return d[_]!=null&&(T[_]=d[_]),T},{}));for(var p in u)u[p]!==void 0&&c[p]===void 0&&(d[p]=u[p]);return Object.keys(d).length>0?d:void 0},diff:function(u,c){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var h=Object.keys(u).concat(Object.keys(c)).reduce(function(d,p){return s(u[p],c[p])||(d[p]=c[p]===void 0?null:c[p]),d},{});return Object.keys(h).length>0?h:void 0},transform:function(u,c,h){if(typeof u!="object")return c;if(typeof c=="object"){if(!h)return c;var d=Object.keys(c).reduce(function(p,T){return u[T]===void 0&&(p[T]=c[T]),p},{});return Object.keys(d).length>0?d:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var c=this.ops[this.index];if(c){var h=this.offset,d=a.length(c);if(u>=d-h?(u=d-h,this.index+=1,this.offset=0):this.offset+=u,typeof c.delete=="number")return{delete:u};var p={};return c.attributes&&(p.attributes=c.attributes),typeof c.retain=="number"?p.retain=u:typeof c.insert=="string"?p.insert=c.insert.substr(h,u):p.insert=c.insert,p}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,c=this.index,h=this.next(),d=this.ops.slice(this.index);return this.offset=u,this.index=c,[h].concat(d)}else return[]},n.exports=a}),(function(n,r){var i=(function(){function s(_,v){return v!=null&&_ instanceof v}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(_,v,b,E,m){typeof v=="object"&&(b=v.depth,E=v.prototype,m=v.includeNonEnumerable,v=v.circular);var g=[],w=[],x=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof b>"u"&&(b=1/0);function R(A,P){if(A===null)return null;if(P===0)return A;var O,y;if(typeof A!="object")return A;if(s(A,o))O=new o;else if(s(A,a))O=new a;else if(s(A,l))O=new l(function(H,L){A.then(function(j){H(R(j,P-1))},function(j){L(R(j,P-1))})});else if(u.__isArray(A))O=[];else if(u.__isRegExp(A))O=new RegExp(A.source,T(A)),A.lastIndex&&(O.lastIndex=A.lastIndex);else if(u.__isDate(A))O=new Date(A.getTime());else{if(x&&Buffer.isBuffer(A))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(A.length):O=new Buffer(A.length),A.copy(O),O;s(A,Error)?O=Object.create(A):typeof E>"u"?(y=Object.getPrototypeOf(A),O=Object.create(y)):(O=Object.create(E),y=E)}if(v){var I=g.indexOf(A);if(I!=-1)return w[I];g.push(A),w.push(O)}s(A,o)&&A.forEach(function(H,L){var j=R(L,P-1),z=R(H,P-1);O.set(j,z)}),s(A,a)&&A.forEach(function(H){var L=R(H,P-1);O.add(L)});for(var S in A){var D;y&&(D=Object.getOwnPropertyDescriptor(y,S)),!(D&&D.set==null)&&(O[S]=R(A[S],P-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(A),S=0;S<B.length;S++){var $=B[S],W=Object.getOwnPropertyDescriptor(A,$);W&&!W.enumerable&&!m||(O[$]=R(A[$],P-1),W.enumerable||Object.defineProperty(O,$,{enumerable:!1}))}if(m)for(var ae=Object.getOwnPropertyNames(A),S=0;S<ae.length;S++){var Z=ae[S],W=Object.getOwnPropertyDescriptor(A,Z);W&&W.enumerable||(O[Z]=R(A[Z],P-1),Object.defineProperty(O,Z,{enumerable:!1}))}return O}return R(_,b)}u.clonePrototype=function(v){if(v===null)return null;var b=function(){};return b.prototype=v,new b};function c(_){return Object.prototype.toString.call(_)}u.__objToStr=c;function h(_){return typeof _=="object"&&c(_)==="[object Date]"}u.__isDate=h;function d(_){return typeof _=="object"&&c(_)==="[object Array]"}u.__isArray=d;function p(_){return typeof _=="object"&&c(_)==="[object RegExp]"}u.__isRegExp=p;function T(_){var v="";return _.global&&(v+="g"),_.ignoreCase&&(v+="i"),_.multiline&&(v+="m"),v}return u.__getRegExpFlags=T,u})();typeof n=="object"&&n.exports&&(n.exports=i)}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function O(y,I){var S=[],D=!0,B=!1,$=void 0;try{for(var W=y[Symbol.iterator](),ae;!(D=(ae=W.next()).done)&&(S.push(ae.value),!(I&&S.length===I));D=!0);}catch(Z){B=!0,$=Z}finally{try{!D&&W.return&&W.return()}finally{if(B)throw $}}return S}return function(y,I){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return O(y,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function O(y,I){for(var S=0;S<I.length;S++){var D=I[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(y,D.key,D)}}return function(y,I,S){return I&&O(y.prototype,I),S&&O(y,S),y}})(),a=function O(y,I,S){y===null&&(y=Function.prototype);var D=Object.getOwnPropertyDescriptor(y,I);if(D===void 0){var B=Object.getPrototypeOf(y);return B===null?void 0:O(B,I,S)}else{if("value"in D)return D.value;var $=D.get;return $===void 0?void 0:$.call(S)}},l=i(0),u=g(l),c=i(8),h=g(c),d=i(4),p=g(d),T=i(16),_=g(T),v=i(13),b=g(v),E=i(25),m=g(E);function g(O){return O&&O.__esModule?O:{default:O}}function w(O,y){if(!(O instanceof y))throw new TypeError("Cannot call a class as a function")}function x(O,y){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:O}function R(O,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);O.prototype=Object.create(y&&y.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(O,y):O.__proto__=y)}function A(O){return O instanceof p.default||O instanceof d.BlockEmbed}var P=(function(O){R(y,O);function y(I,S){w(this,y);var D=x(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,I));return D.emitter=S.emitter,Array.isArray(S.whitelist)&&(D.whitelist=S.whitelist.reduce(function(B,$){return B[$]=!0,B},{})),D.domNode.addEventListener("DOMNodeInserted",function(){}),D.optimize(),D.enable(),D}return o(y,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(S,D){var B=this.line(S),$=s(B,2),W=$[0],ae=$[1],Z=this.line(S+D),H=s(Z,1),L=H[0];if(a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"deleteAt",this).call(this,S,D),L!=null&&W!==L&&ae>0){if(W instanceof d.BlockEmbed||L instanceof d.BlockEmbed){this.optimize();return}if(W instanceof b.default){var j=W.newlineIndex(W.length(),!0);if(j>-1&&(W=W.split(j+1),W===L)){this.optimize();return}}else if(L instanceof b.default){var z=L.newlineIndex(0);z>-1&&L.split(z+1)}var ne=L.children.head instanceof _.default?null:L.children.head;W.moveChildren(L,ne),W.remove()}this.optimize()}},{key:"enable",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",S)}},{key:"formatAt",value:function(S,D,B,$){this.whitelist!=null&&!this.whitelist[B]||(a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,S,D,B,$),this.optimize())}},{key:"insertAt",value:function(S,D,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[D])){if(S>=this.length())if(B==null||u.default.query(D,u.default.Scope.BLOCK)==null){var $=u.default.create(this.statics.defaultChild);this.appendChild($),B==null&&D.endsWith(`
`)&&(D=D.slice(0,-1)),$.insertAt(0,D,B)}else{var W=u.default.create(D,B);this.appendChild(W)}else a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertAt",this).call(this,S,D,B);this.optimize()}}},{key:"insertBefore",value:function(S,D){if(S.statics.scope===u.default.Scope.INLINE_BLOT){var B=u.default.create(this.statics.defaultChild);B.appendChild(S),S=B}a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertBefore",this).call(this,S,D)}},{key:"leaf",value:function(S){return this.path(S).pop()||[null,-1]}},{key:"line",value:function(S){return S===this.length()?this.line(S-1):this.descendant(A,S)}},{key:"lines",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function $(W,ae,Z){var H=[],L=Z;return W.children.forEachAt(ae,Z,function(j,z,ne){A(j)?H.push(j):j instanceof u.default.Container&&(H=H.concat($(j,z,L))),L-=ne}),H};return B(this,S,D)}},{key:"optimize",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,S,D),S.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,S,D))}},{key:"path",value:function(S){return a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"path",this).call(this,S).slice(1)}},{key:"update",value:function(S){if(this.batch!==!0){var D=h.default.sources.USER;typeof S=="string"&&(D=S),Array.isArray(S)||(S=this.observer.takeRecords()),S.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,D,S),a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"update",this).call(this,S.concat([])),S.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,D,S)}}}]),y})(u.default.Scroll);P.blotName="scroll",P.className="ql-editor",P.tagName="DIV",P.defaultChild="block",P.allowedChildren=[p.default,d.BlockEmbed,m.default],r.default=P}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=(function(){function F(V,Y){var X=[],se=!0,ye=!1,q=void 0;try{for(var K=V[Symbol.iterator](),ee;!(se=(ee=K.next()).done)&&(X.push(ee.value),!(Y&&X.length===Y));se=!0);}catch(ue){ye=!0,q=ue}finally{try{!se&&K.return&&K.return()}finally{if(ye)throw q}}return X}return function(V,Y){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return F(V,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function F(V,Y){for(var X=0;X<Y.length;X++){var se=Y[X];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(V,se.key,se)}}return function(V,Y,X){return Y&&F(V.prototype,Y),X&&F(V,X),V}})(),l=i(21),u=O(l),c=i(11),h=O(c),d=i(3),p=O(d),T=i(2),_=O(T),v=i(20),b=O(v),E=i(0),m=O(E),g=i(5),w=O(g),x=i(10),R=O(x),A=i(9),P=O(A);function O(F){return F&&F.__esModule?F:{default:F}}function y(F,V,Y){return V in F?Object.defineProperty(F,V,{value:Y,enumerable:!0,configurable:!0,writable:!0}):F[V]=Y,F}function I(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")}function S(F,V){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:F}function D(F,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);F.prototype=Object.create(V&&V.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(F,V):F.__proto__=V)}var B=(0,R.default)("quill:keyboard"),$=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=(function(F){D(V,F),a(V,null,[{key:"match",value:function(X,se){return se=G(se),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ye){return!!se[ye]!==X[ye]&&se[ye]!==null})?!1:se.key===(X.which||X.keyCode)}}]);function V(Y,X){I(this,V);var se=S(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,Y,X));return se.bindings={},Object.keys(se.options.bindings).forEach(function(ye){ye==="list autofill"&&Y.scroll.whitelist!=null&&!Y.scroll.whitelist.list||se.options.bindings[ye]&&se.addBinding(se.options.bindings[ye])}),se.addBinding({key:V.keys.ENTER,shiftKey:null},j),se.addBinding({key:V.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(se.addBinding({key:V.keys.BACKSPACE},{collapsed:!0},Z),se.addBinding({key:V.keys.DELETE},{collapsed:!0},H)):(se.addBinding({key:V.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Z),se.addBinding({key:V.keys.DELETE},{collapsed:!0,suffix:/^.?$/},H)),se.addBinding({key:V.keys.BACKSPACE},{collapsed:!1},L),se.addBinding({key:V.keys.DELETE},{collapsed:!1},L),se.addBinding({key:V.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Z),se.listen(),se}return a(V,[{key:"addBinding",value:function(X){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},q=G(X);if(q==null||q.key==null)return B.warn("Attempted to add invalid keyboard binding",q);typeof se=="function"&&(se={handler:se}),typeof ye=="function"&&(ye={handler:ye}),q=(0,p.default)(q,se,ye),this.bindings[q.key]=this.bindings[q.key]||[],this.bindings[q.key].push(q)}},{key:"listen",value:function(){var X=this;this.quill.root.addEventListener("keydown",function(se){if(!se.defaultPrevented){var ye=se.which||se.keyCode,q=(X.bindings[ye]||[]).filter(function(Oe){return V.match(se,Oe)});if(q.length!==0){var K=X.quill.getSelection();if(!(K==null||!X.quill.hasFocus())){var ee=X.quill.getLine(K.index),ue=o(ee,2),he=ue[0],ce=ue[1],te=X.quill.getLeaf(K.index),J=o(te,2),re=J[0],ie=J[1],le=K.length===0?[re,ie]:X.quill.getLeaf(K.index+K.length),ge=o(le,2),_e=ge[0],be=ge[1],Se=re instanceof m.default.Text?re.value().slice(0,ie):"",Ne=_e instanceof m.default.Text?_e.value().slice(be):"",we={collapsed:K.length===0,empty:K.length===0&&he.length()<=1,format:X.quill.getFormat(K),offset:ce,prefix:Se,suffix:Ne},ut=q.some(function(Oe){if(Oe.collapsed!=null&&Oe.collapsed!==we.collapsed||Oe.empty!=null&&Oe.empty!==we.empty||Oe.offset!=null&&Oe.offset!==we.offset)return!1;if(Array.isArray(Oe.format)){if(Oe.format.every(function(tt){return we.format[tt]==null}))return!1}else if(s(Oe.format)==="object"&&!Object.keys(Oe.format).every(function(tt){return Oe.format[tt]===!0?we.format[tt]!=null:Oe.format[tt]===!1?we.format[tt]==null:(0,h.default)(Oe.format[tt],we.format[tt])}))return!1;return Oe.prefix!=null&&!Oe.prefix.test(we.prefix)||Oe.suffix!=null&&!Oe.suffix.test(we.suffix)?!1:Oe.handler.call(X,K,we)!==!0});ut&&se.preventDefault()}}}})}}]),V})(P.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:ne("bold"),italic:ne("italic"),underline:ne("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function(V,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","+1",w.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(V,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","-1",w.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(V,Y){Y.format.indent!=null?this.quill.format("indent","-1",w.default.sources.USER):Y.format.list!=null&&this.quill.format("list",!1,w.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(V){this.quill.deleteText(V.index-1,1,w.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function(V){this.quill.history.cutoff();var Y=new _.default().retain(V.index).delete(V.length).insert("	");this.quill.updateContents(Y,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(V.index+1,w.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(V,Y){this.quill.format("list",!1,w.default.sources.USER),Y.format.indent&&this.quill.format("indent",!1,w.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(V){var Y=this.quill.getLine(V.index),X=o(Y,2),se=X[0],ye=X[1],q=(0,p.default)({},se.formats(),{list:"checked"}),K=new _.default().retain(V.index).insert(`
`,q).retain(se.length()-ye-1).retain(1,{list:"unchecked"});this.quill.updateContents(K,w.default.sources.USER),this.quill.setSelection(V.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(V,Y){var X=this.quill.getLine(V.index),se=o(X,2),ye=se[0],q=se[1],K=new _.default().retain(V.index).insert(`
`,Y.format).retain(ye.length()-q-1).retain(1,{header:null});this.quill.updateContents(K,w.default.sources.USER),this.quill.setSelection(V.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(V,Y){var X=Y.prefix.length,se=this.quill.getLine(V.index),ye=o(se,2),q=ye[0],K=ye[1];if(K>X)return!0;var ee=void 0;switch(Y.prefix.trim()){case"[]":case"[ ]":ee="unchecked";break;case"[x]":ee="checked";break;case"-":case"*":ee="bullet";break;default:ee="ordered"}this.quill.insertText(V.index," ",w.default.sources.USER),this.quill.history.cutoff();var ue=new _.default().retain(V.index-K).delete(X+1).retain(q.length()-2-K).retain(1,{list:ee});this.quill.updateContents(ue,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(V.index-X,w.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(V){var Y=this.quill.getLine(V.index),X=o(Y,2),se=X[0],ye=X[1],q=new _.default().retain(V.index+se.length()-ye-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(q,w.default.sources.USER)}},"embed left":ae(W.keys.LEFT,!1),"embed left shift":ae(W.keys.LEFT,!0),"embed right":ae(W.keys.RIGHT,!1),"embed right shift":ae(W.keys.RIGHT,!0)}};function ae(F,V){var Y,X=F===W.keys.LEFT?"prefix":"suffix";return Y={key:F,shiftKey:V,altKey:null},y(Y,X,/^$/),y(Y,"handler",function(ye){var q=ye.index;F===W.keys.RIGHT&&(q+=ye.length+1);var K=this.quill.getLeaf(q),ee=o(K,1),ue=ee[0];return ue instanceof m.default.Embed?(F===W.keys.LEFT?V?this.quill.setSelection(ye.index-1,ye.length+1,w.default.sources.USER):this.quill.setSelection(ye.index-1,w.default.sources.USER):V?this.quill.setSelection(ye.index,ye.length+1,w.default.sources.USER):this.quill.setSelection(ye.index+ye.length+1,w.default.sources.USER),!1):!0}),Y}function Z(F,V){if(!(F.index===0||this.quill.getLength()<=1)){var Y=this.quill.getLine(F.index),X=o(Y,1),se=X[0],ye={};if(V.offset===0){var q=this.quill.getLine(F.index-1),K=o(q,1),ee=K[0];if(ee!=null&&ee.length()>1){var ue=se.formats(),he=this.quill.getFormat(F.index-1,1);ye=b.default.attributes.diff(ue,he)||{}}}var ce=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(V.prefix)?2:1;this.quill.deleteText(F.index-ce,ce,w.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(F.index-ce,ce,ye,w.default.sources.USER),this.quill.focus()}}function H(F,V){var Y=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(V.suffix)?2:1;if(!(F.index>=this.quill.getLength()-Y)){var X={},se=0,ye=this.quill.getLine(F.index),q=o(ye,1),K=q[0];if(V.offset>=K.length()-1){var ee=this.quill.getLine(F.index+1),ue=o(ee,1),he=ue[0];if(he){var ce=K.formats(),te=this.quill.getFormat(F.index,1);X=b.default.attributes.diff(ce,te)||{},se=he.length()}}this.quill.deleteText(F.index,Y,w.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(F.index+se-1,Y,X,w.default.sources.USER)}}function L(F){var V=this.quill.getLines(F),Y={};if(V.length>1){var X=V[0].formats(),se=V[V.length-1].formats();Y=b.default.attributes.diff(se,X)||{}}this.quill.deleteText(F,w.default.sources.USER),Object.keys(Y).length>0&&this.quill.formatLine(F.index,1,Y,w.default.sources.USER),this.quill.setSelection(F.index,w.default.sources.SILENT),this.quill.focus()}function j(F,V){var Y=this;F.length>0&&this.quill.scroll.deleteAt(F.index,F.length);var X=Object.keys(V.format).reduce(function(se,ye){return m.default.query(ye,m.default.Scope.BLOCK)&&!Array.isArray(V.format[ye])&&(se[ye]=V.format[ye]),se},{});this.quill.insertText(F.index,`
`,X,w.default.sources.USER),this.quill.setSelection(F.index+1,w.default.sources.SILENT),this.quill.focus(),Object.keys(V.format).forEach(function(se){X[se]==null&&(Array.isArray(V.format[se])||se!=="link"&&Y.quill.format(se,V.format[se],w.default.sources.USER))})}function z(F){return{key:W.keys.TAB,shiftKey:!F,format:{"code-block":!0},handler:function(Y){var X=m.default.query("code-block"),se=Y.index,ye=Y.length,q=this.quill.scroll.descendant(X,se),K=o(q,2),ee=K[0],ue=K[1];if(ee!=null){var he=this.quill.getIndex(ee),ce=ee.newlineIndex(ue,!0)+1,te=ee.newlineIndex(he+ue+ye),J=ee.domNode.textContent.slice(ce,te).split(`
`);ue=0,J.forEach(function(re,ie){F?(ee.insertAt(ce+ue,X.TAB),ue+=X.TAB.length,ie===0?se+=X.TAB.length:ye+=X.TAB.length):re.startsWith(X.TAB)&&(ee.deleteAt(ce+ue,X.TAB.length),ue-=X.TAB.length,ie===0?se-=X.TAB.length:ye-=X.TAB.length),ue+=re.length+1}),this.quill.update(w.default.sources.USER),this.quill.setSelection(se,ye,w.default.sources.SILENT)}}}}function ne(F){return{key:F[0].toUpperCase(),shortKey:!0,handler:function(Y,X){this.quill.format(F,!X.format[F],w.default.sources.USER)}}}function G(F){if(typeof F=="string"||typeof F=="number")return G({key:F});if((typeof F>"u"?"undefined":s(F))==="object"&&(F=(0,u.default)(F,!1)),typeof F.key=="string")if(W.keys[F.key.toUpperCase()]!=null)F.key=W.keys[F.key.toUpperCase()];else if(F.key.length===1)F.key=F.key.toUpperCase().charCodeAt(0);else return null;return F.shortKey&&(F[$]=F.shortKey,delete F.shortKey),F}r.default=W,r.SHORTKEY=$}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function b(E,m){var g=[],w=!0,x=!1,R=void 0;try{for(var A=E[Symbol.iterator](),P;!(w=(P=A.next()).done)&&(g.push(P.value),!(m&&g.length===m));w=!0);}catch(O){x=!0,R=O}finally{try{!w&&A.return&&A.return()}finally{if(x)throw R}}return g}return function(E,m){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return b(E,m);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function b(E,m,g){E===null&&(E=Function.prototype);var w=Object.getOwnPropertyDescriptor(E,m);if(w===void 0){var x=Object.getPrototypeOf(E);return x===null?void 0:b(x,m,g)}else{if("value"in w)return w.value;var R=w.get;return R===void 0?void 0:R.call(g)}},a=(function(){function b(E,m){for(var g=0;g<m.length;g++){var w=m[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(E,w.key,w)}}return function(E,m,g){return m&&b(E.prototype,m),g&&b(E,g),E}})(),l=i(0),u=d(l),c=i(7),h=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function p(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function T(b,E){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:b}function _(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);b.prototype=Object.create(E&&E.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(b,E):b.__proto__=E)}var v=(function(b){_(E,b),a(E,null,[{key:"value",value:function(){}}]);function E(m,g){p(this,E);var w=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,m));return w.selection=g,w.textNode=document.createTextNode(E.CONTENTS),w.domNode.appendChild(w.textNode),w._length=0,w}return a(E,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(g,w){if(this._length!==0)return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,g,w);for(var x=this,R=0;x!=null&&x.statics.scope!==u.default.Scope.BLOCK_BLOT;)R+=x.offset(x.parent),x=x.parent;x!=null&&(this._length=E.CONTENTS.length,x.optimize(),x.formatAt(R,E.CONTENTS.length,g,w),this._length=0)}},{key:"index",value:function(g,w){return g===this.textNode?0:o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"index",this).call(this,g,w)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var g=this.textNode,w=this.selection.getNativeRange(),x=void 0,R=void 0,A=void 0;if(w!=null&&w.start.node===g&&w.end.node===g){var P=[g,w.start.offset,w.end.offset];x=P[0],R=P[1],A=P[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==E.CONTENTS){var O=this.textNode.data.split(E.CONTENTS).join("");this.next instanceof h.default?(x=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=E.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(E.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),R!=null){var y=[R,A].map(function(S){return Math.max(0,Math.min(x.data.length,S-1))}),I=s(y,2);return R=I[0],A=I[1],{startNode:x,startOffset:R,endNode:x,endOffset:A}}}}},{key:"update",value:function(g,w){var x=this;if(g.some(function(A){return A.type==="characterData"&&A.target===x.textNode})){var R=this.restore();R&&(w.range=R)}}},{key:"value",value:function(){return""}}]),E})(u.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",r.default=v}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=u(s),a=i(4),l=u(a);function u(T){return T&&T.__esModule?T:{default:T}}function c(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function h(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function d(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var p=(function(T){d(_,T);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return _})(o.default.Container);p.allowedChildren=[l.default,a.BlockEmbed,p],r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=(function(){function v(b,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}return function(b,E,m){return E&&v(b.prototype,E),m&&v(b,m),b}})(),o=function v(b,E,m){b===null&&(b=Function.prototype);var g=Object.getOwnPropertyDescriptor(b,E);if(g===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:v(w,E,m)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(m)}},a=i(0),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function c(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function h(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function d(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var p=(function(v){d(b,v);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"value",value:function(m){var g=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,m);return g.startsWith("rgb(")?(g=g.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+g.split(",").map(function(w){return("00"+parseInt(w).toString(16)).slice(-2)}).join("")):g}}]),b})(l.default.Attributor.Style),T=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),_=new p("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=T,r.ColorStyle=_}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=(function(){function _(v,b){for(var E=0;E<b.length;E++){var m=b[E];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),o=function _(v,b,E){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var g=Object.getPrototypeOf(v);return g===null?void 0:_(g,b,E)}else{if("value"in m)return m.value;var w=m.get;return w===void 0?void 0:w.call(E)}},a=i(6),l=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function c(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function d(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var p=(function(_){d(v,_);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(E,m){if(E!==this.statics.blotName||!m)return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,E,m);m=this.constructor.sanitize(m),this.domNode.setAttribute("href",m)}}],[{key:"create",value:function(E){var m=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,E);return E=this.sanitize(E),m.setAttribute("href",E),m.setAttribute("rel","noopener noreferrer"),m.setAttribute("target","_blank"),m}},{key:"formats",value:function(E){return E.getAttribute("href")}},{key:"sanitize",value:function(E){return T(E,this.PROTOCOL_WHITELIST)?E:this.SANITIZED_URL}}]),v})(l.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function T(_,v){var b=document.createElement("a");b.href=_;var E=b.href.slice(0,b.href.indexOf(":"));return v.indexOf(E)>-1}r.default=p,r.sanitize=T}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},o=(function(){function v(b,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}return function(b,E,m){return E&&v(b.prototype,E),m&&v(b,m),b}})(),a=i(23),l=h(a),u=i(107),c=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function d(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}var p=0;function T(v,b){v.setAttribute(b,v.getAttribute(b)!=="true")}var _=(function(){function v(b){var E=this;d(this,v),this.select=b,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){E.togglePicker()}),this.label.addEventListener("keydown",function(m){switch(m.keyCode){case l.default.keys.ENTER:E.togglePicker();break;case l.default.keys.ESCAPE:E.escape(),m.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),T(this.label,"aria-expanded"),T(this.options,"aria-hidden")}},{key:"buildItem",value:function(E){var m=this,g=document.createElement("span");return g.tabIndex="0",g.setAttribute("role","button"),g.classList.add("ql-picker-item"),E.hasAttribute("value")&&g.setAttribute("data-value",E.getAttribute("value")),E.textContent&&g.setAttribute("data-label",E.textContent),g.addEventListener("click",function(){m.selectItem(g,!0)}),g.addEventListener("keydown",function(w){switch(w.keyCode){case l.default.keys.ENTER:m.selectItem(g,!0),w.preventDefault();break;case l.default.keys.ESCAPE:m.escape(),w.preventDefault();break}}),g}},{key:"buildLabel",value:function(){var E=document.createElement("span");return E.classList.add("ql-picker-label"),E.innerHTML=c.default,E.tabIndex="0",E.setAttribute("role","button"),E.setAttribute("aria-expanded","false"),this.container.appendChild(E),E}},{key:"buildOptions",value:function(){var E=this,m=document.createElement("span");m.classList.add("ql-picker-options"),m.setAttribute("aria-hidden","true"),m.tabIndex="-1",m.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",m.id),this.options=m,[].slice.call(this.select.options).forEach(function(g){var w=E.buildItem(g);m.appendChild(w),g.selected===!0&&E.selectItem(w)}),this.container.appendChild(m)}},{key:"buildPicker",value:function(){var E=this;[].slice.call(this.select.attributes).forEach(function(m){E.container.setAttribute(m.name,m.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var E=this;this.close(),setTimeout(function(){return E.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(E){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=this.container.querySelector(".ql-selected");if(E!==g&&(g?.classList.remove("ql-selected"),E!=null&&(E.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(E.parentNode.children,E),E.hasAttribute("data-value")?this.label.setAttribute("data-value",E.getAttribute("data-value")):this.label.removeAttribute("data-value"),E.hasAttribute("data-label")?this.label.setAttribute("data-label",E.getAttribute("data-label")):this.label.removeAttribute("data-label"),m))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var w=document.createEvent("Event");w.initEvent("change",!0,!0),this.select.dispatchEvent(w)}this.close()}}},{key:"update",value:function(){var E=void 0;if(this.select.selectedIndex>-1){var m=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];E=this.select.options[this.select.selectedIndex],this.selectItem(m)}else this.selectItem(null);var g=E!=null&&E!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",g)}}]),v})();r.default=_}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=B(s),a=i(5),l=B(a),u=i(4),c=B(u),h=i(16),d=B(h),p=i(25),T=B(p),_=i(24),v=B(_),b=i(35),E=B(b),m=i(6),g=B(m),w=i(22),x=B(w),R=i(7),A=B(R),P=i(55),O=B(P),y=i(42),I=B(y),S=i(23),D=B(S);function B($){return $&&$.__esModule?$:{default:$}}l.default.register({"blots/block":c.default,"blots/block/embed":u.BlockEmbed,"blots/break":d.default,"blots/container":T.default,"blots/cursor":v.default,"blots/embed":E.default,"blots/inline":g.default,"blots/scroll":x.default,"blots/text":A.default,"modules/clipboard":O.default,"modules/history":I.default,"modules/keyboard":D.default}),o.default.register(c.default,d.default,v.default,g.default,x.default,A.default),r.default=l.default}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=(function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,u){var c=this.isolate(l,u);c.remove()},a.prototype.formatAt=function(l,u,c,h){var d=this.isolate(l,u);if(s.query(c,s.Scope.BLOT)!=null&&h)d.wrap(c,h);else if(s.query(c,s.Scope.ATTRIBUTE)!=null){var p=s.create(this.statics.scope);d.wrap(p),p.format(c,h)}},a.prototype.insertAt=function(l,u,c){var h=c==null?s.create("text",u):s.create(u,c),d=this.split(l);this.parent.insertBefore(h,d)},a.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var c=null;l.children.insertBefore(this,u),u!=null&&(c=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=c)&&l.domNode.insertBefore(this.domNode,c),this.parent=l,this.attach()},a.prototype.isolate=function(l,u){var c=this.split(l);return c.split(u),c},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return c.replace(this),c},a.prototype.split=function(l,u){return l===0?this:this.next},a.prototype.update=function(l,u){},a.prototype.wrap=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},a.blotName="abstract",a})();r.default=o}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(32),a=i(33),l=i(1),u=(function(){function c(h){this.attributes={},this.domNode=h,this.build()}return c.prototype.attribute=function(h,d){d?h.add(this.domNode,d)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},c.prototype.build=function(){var h=this;this.attributes={};var d=s.default.keys(this.domNode),p=o.default.keys(this.domNode),T=a.default.keys(this.domNode);d.concat(p).concat(T).forEach(function(_){var v=l.query(_,l.Scope.ATTRIBUTE);v instanceof s.default&&(h.attributes[v.attrName]=v)})},c.prototype.copy=function(h){var d=this;Object.keys(this.attributes).forEach(function(p){var T=d.attributes[p].value(d.domNode);h.format(p,T)})},c.prototype.move=function(h){var d=this;this.copy(h),Object.keys(this.attributes).forEach(function(p){d.attributes[p].remove(d.domNode)}),this.attributes={}},c.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(d,p){return d[p]=h.attributes[p].value(h.domNode),d},{})},c})();r.default=u}),(function(n,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])};return function(c,h){u(c,h);function d(){this.constructor=c}c.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u,c){var h=u.getAttribute("class")||"";return h.split(/\s+/).filter(function(d){return d.indexOf(c+"-")===0})}var l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(d){return d.split("-").slice(0,-1).join("-")})},c.prototype.add=function(h,d){return this.canAdd(h,d)?(this.remove(h),h.classList.add(this.keyName+"-"+d),!0):!1},c.prototype.remove=function(h){var d=a(h,this.keyName);d.forEach(function(p){h.classList.remove(p)}),h.classList.length===0&&h.removeAttribute("class")},c.prototype.value=function(h){var d=a(h,this.keyName)[0]||"",p=d.slice(this.keyName.length+1);return this.canAdd(h,p)?p:""},c})(o.default);r.default=l}),(function(n,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])};return function(c,h){u(c,h);function d(){this.constructor=c}c.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u){var c=u.split("-"),h=c.slice(1).map(function(d){return d[0].toUpperCase()+d.slice(1)}).join("");return c[0]+h}var l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(d){var p=d.split(":");return p[0].trim()})},c.prototype.add=function(h,d){return this.canAdd(h,d)?(h.style[a(this.keyName)]=d,!0):!1},c.prototype.remove=function(h){h.style[a(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},c.prototype.value=function(h){var d=h.style[a(this.keyName)];return this.canAdd(h,d)?d:""},c})(o.default);r.default=l}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function l(u,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}})();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=(function(){function l(u,c){o(this,l),this.quill=u,this.options=c,this.modules={}}return s(l,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(h){c.modules[h]==null&&c.addModule(h)})}},{key:"addModule",value:function(c){var h=this.quill.constructor.import("modules/"+c);return this.modules[c]=new h(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),l})();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function b(E,m){for(var g=0;g<m.length;g++){var w=m[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(E,w.key,w)}}return function(E,m,g){return m&&b(E.prototype,m),g&&b(E,g),E}})(),o=function b(E,m,g){E===null&&(E=Function.prototype);var w=Object.getOwnPropertyDescriptor(E,m);if(w===void 0){var x=Object.getPrototypeOf(E);return x===null?void 0:b(x,m,g)}else{if("value"in w)return w.value;var R=w.get;return R===void 0?void 0:R.call(g)}},a=i(0),l=h(a),u=i(7),c=h(u);function h(b){return b&&b.__esModule?b:{default:b}}function d(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function p(b,E){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:b}function T(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);b.prototype=Object.create(E&&E.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(b,E):b.__proto__=E)}var _="\uFEFF",v=(function(b){T(E,b);function E(m){d(this,E);var g=p(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,m));return g.contentNode=document.createElement("span"),g.contentNode.setAttribute("contenteditable",!1),[].slice.call(g.domNode.childNodes).forEach(function(w){g.contentNode.appendChild(w)}),g.leftGuard=document.createTextNode(_),g.rightGuard=document.createTextNode(_),g.domNode.appendChild(g.leftGuard),g.domNode.appendChild(g.contentNode),g.domNode.appendChild(g.rightGuard),g}return s(E,[{key:"index",value:function(g,w){return g===this.leftGuard?0:g===this.rightGuard?1:o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"index",this).call(this,g,w)}},{key:"restore",value:function(g){var w=void 0,x=void 0,R=g.data.split(_).join("");if(g===this.leftGuard)if(this.prev instanceof c.default){var A=this.prev.length();this.prev.insertAt(A,R),w={startNode:this.prev.domNode,startOffset:A+R.length}}else x=document.createTextNode(R),this.parent.insertBefore(l.default.create(x),this),w={startNode:x,startOffset:R.length};else g===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,R),w={startNode:this.next.domNode,startOffset:R.length}):(x=document.createTextNode(R),this.parent.insertBefore(l.default.create(x),this.next),w={startNode:x,startOffset:R.length}));return g.data=_,w}},{key:"update",value:function(g,w){var x=this;g.forEach(function(R){if(R.type==="characterData"&&(R.target===x.leftGuard||R.target===x.rightGuard)){var A=x.restore(R.target);A&&(w.range=A)}})}}]),E})(l.default.Embed);r.default=v}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),c=new o.default.Attributor.Class("align","ql-align",l),h=new o.default.Attributor.Style("align","text-align",l);r.AlignAttribute=u,r.AlignClass=c,r.AlignStyle=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),o=l(s),a=i(26);function l(h){return h&&h.__esModule?h:{default:h}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),c=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=c}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),c=new o.default.Attributor.Class("direction","ql-direction",l),h=new o.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=u,r.DirectionClass=c,r.DirectionStyle=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=(function(){function b(E,m){for(var g=0;g<m.length;g++){var w=m[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(E,w.key,w)}}return function(E,m,g){return m&&b(E.prototype,m),g&&b(E,g),E}})(),o=function b(E,m,g){E===null&&(E=Function.prototype);var w=Object.getOwnPropertyDescriptor(E,m);if(w===void 0){var x=Object.getPrototypeOf(E);return x===null?void 0:b(x,m,g)}else{if("value"in w)return w.value;var R=w.get;return R===void 0?void 0:R.call(g)}},a=i(0),l=u(a);function u(b){return b&&b.__esModule?b:{default:b}}function c(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function h(b,E){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:b}function d(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);b.prototype=Object.create(E&&E.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(b,E):b.__proto__=E)}var p={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},T=new l.default.Attributor.Class("font","ql-font",p),_=(function(b){d(E,b);function E(){return c(this,E),h(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"value",value:function(g){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,g).replace(/["']/g,"")}}]),E})(l.default.Attributor.Style),v=new _("font","font-family",p);r.FontStyle=v,r.FontClass=T}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),o=a(s);function a(c){return c&&c.__esModule?c:{default:c}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=u}),(function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=(function(){function m(g,w){for(var x=0;x<w.length;x++){var R=w[x];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(g,R.key,R)}}return function(g,w,x){return w&&m(g.prototype,w),x&&m(g,x),g}})(),o=i(0),a=d(o),l=i(5),u=d(l),c=i(9),h=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function p(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function T(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function _(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var v=(function(m){_(g,m);function g(w,x){p(this,g);var R=T(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,w,x));return R.lastRecorded=0,R.ignoreChange=!1,R.clear(),R.quill.on(u.default.events.EDITOR_CHANGE,function(A,P,O,y){A!==u.default.events.TEXT_CHANGE||R.ignoreChange||(!R.options.userOnly||y===u.default.sources.USER?R.record(P,O):R.transform(P))}),R.quill.keyboard.addBinding({key:"Z",shortKey:!0},R.undo.bind(R)),R.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},R.redo.bind(R)),/Win/i.test(navigator.platform)&&R.quill.keyboard.addBinding({key:"Y",shortKey:!0},R.redo.bind(R)),R}return s(g,[{key:"change",value:function(x,R){if(this.stack[x].length!==0){var A=this.stack[x].pop();this.stack[R].push(A),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(A[x],u.default.sources.USER),this.ignoreChange=!1;var P=E(A[x]);this.quill.setSelection(P)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(x,R){if(x.ops.length!==0){this.stack.redo=[];var A=this.quill.getContents().diff(R),P=Date.now();if(this.lastRecorded+this.options.delay>P&&this.stack.undo.length>0){var O=this.stack.undo.pop();A=A.compose(O.undo),x=O.redo.compose(x)}else this.lastRecorded=P;this.stack.undo.push({redo:x,undo:A}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(x){this.stack.undo.forEach(function(R){R.undo=x.transform(R.undo,!0),R.redo=x.transform(R.redo,!0)}),this.stack.redo.forEach(function(R){R.undo=x.transform(R.undo,!0),R.redo=x.transform(R.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),g})(h.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function b(m){var g=m.ops[m.ops.length-1];return g==null?!1:g.insert!=null?typeof g.insert=="string"&&g.insert.endsWith(`
`):g.attributes!=null?Object.keys(g.attributes).some(function(w){return a.default.query(w,a.default.Scope.BLOCK)!=null}):!1}function E(m){var g=m.reduce(function(x,R){return x+=R.delete||0,x},0),w=m.length()-g;return b(m)&&(w-=1),w}r.default=v,r.getLastChangeIndex=E}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=(function(){function j(z,ne){for(var G=0;G<ne.length;G++){var F=ne[G];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(z,F.key,F)}}return function(z,ne,G){return ne&&j(z.prototype,ne),G&&j(z,G),z}})(),o=function j(z,ne,G){z===null&&(z=Function.prototype);var F=Object.getOwnPropertyDescriptor(z,ne);if(F===void 0){var V=Object.getPrototypeOf(z);return V===null?void 0:j(V,ne,G)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(G)}},a=i(3),l=P(a),u=i(2),c=P(u),h=i(8),d=P(h),p=i(23),T=P(p),_=i(34),v=P(_),b=i(59),E=P(b),m=i(60),g=P(m),w=i(28),x=P(w),R=i(61),A=P(R);function P(j){return j&&j.__esModule?j:{default:j}}function O(j,z){if(!(j instanceof z))throw new TypeError("Cannot call a class as a function")}function y(j,z){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:j}function I(j,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);j.prototype=Object.create(z&&z.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(j,z):j.__proto__=z)}var S=[!1,"center","right","justify"],D=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],$=["1","2","3",!1],W=["small",!1,"large","huge"],ae=(function(j){I(z,j);function z(ne,G){O(this,z);var F=y(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ne,G)),V=function Y(X){if(!document.body.contains(ne.root))return document.body.removeEventListener("click",Y);F.tooltip!=null&&!F.tooltip.root.contains(X.target)&&document.activeElement!==F.tooltip.textbox&&!F.quill.hasFocus()&&F.tooltip.hide(),F.pickers!=null&&F.pickers.forEach(function(se){se.container.contains(X.target)||se.close()})};return ne.emitter.listenDOM("click",document.body,V),F}return s(z,[{key:"addModule",value:function(G){var F=o(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,G);return G==="toolbar"&&this.extendToolbar(F),F}},{key:"buildButtons",value:function(G,F){G.forEach(function(V){var Y=V.getAttribute("class")||"";Y.split(/\s+/).forEach(function(X){if(X.startsWith("ql-")&&(X=X.slice(3),F[X]!=null))if(X==="direction")V.innerHTML=F[X][""]+F[X].rtl;else if(typeof F[X]=="string")V.innerHTML=F[X];else{var se=V.value||"";se!=null&&F[X][se]&&(V.innerHTML=F[X][se])}})})}},{key:"buildPickers",value:function(G,F){var V=this;this.pickers=G.map(function(X){if(X.classList.contains("ql-align"))return X.querySelector("option")==null&&L(X,S),new g.default(X,F.align);if(X.classList.contains("ql-background")||X.classList.contains("ql-color")){var se=X.classList.contains("ql-background")?"background":"color";return X.querySelector("option")==null&&L(X,D,se==="background"?"#ffffff":"#000000"),new E.default(X,F[se])}else return X.querySelector("option")==null&&(X.classList.contains("ql-font")?L(X,B):X.classList.contains("ql-header")?L(X,$):X.classList.contains("ql-size")&&L(X,W)),new x.default(X)});var Y=function(){V.pickers.forEach(function(se){se.update()})};this.quill.on(d.default.events.EDITOR_CHANGE,Y)}}]),z})(v.default);ae.DEFAULTS=(0,l.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,ne=this.container.querySelector("input.ql-image[type=file]");ne==null&&(ne=document.createElement("input"),ne.setAttribute("type","file"),ne.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ne.classList.add("ql-image"),ne.addEventListener("change",function(){if(ne.files!=null&&ne.files[0]!=null){var G=new FileReader;G.onload=function(F){var V=z.quill.getSelection(!0);z.quill.updateContents(new c.default().retain(V.index).delete(V.length).insert({image:F.target.result}),d.default.sources.USER),z.quill.setSelection(V.index+1,d.default.sources.SILENT),ne.value=""},G.readAsDataURL(ne.files[0])}}),this.container.appendChild(ne)),ne.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Z=(function(j){I(z,j);function z(ne,G){O(this,z);var F=y(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ne,G));return F.textbox=F.root.querySelector('input[type="text"]'),F.listen(),F}return s(z,[{key:"listen",value:function(){var G=this;this.textbox.addEventListener("keydown",function(F){T.default.match(F,"enter")?(G.save(),F.preventDefault()):T.default.match(F,"escape")&&(G.cancel(),F.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),F!=null?this.textbox.value=F:G!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+G)||""),this.root.setAttribute("data-mode",G)}},{key:"restoreFocus",value:function(){var G=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=G}},{key:"save",value:function(){var G=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var F=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",G,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",G,d.default.sources.USER)),this.quill.root.scrollTop=F;break}case"video":G=H(G);case"formula":{if(!G)break;var V=this.quill.getSelection(!0);if(V!=null){var Y=V.index+V.length;this.quill.insertEmbed(Y,this.root.getAttribute("data-mode"),G,d.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Y+1," ",d.default.sources.USER),this.quill.setSelection(Y+2,d.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z})(A.default);function H(j){var z=j.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||j.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=j.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":j}function L(j,z){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(G){var F=document.createElement("option");G===ne?F.setAttribute("selected","selected"):F.setAttribute("value",G),j.appendChild(F)})}r.BaseTooltip=Z,r.default=ae}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,u=this.iterator();l=u();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,u=this.head;u!=null;){if(u===a)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var u,c=this.iterator();u=c();){var h=u.length();if(a<h||l&&a===h&&(u.next==null||u.next.length()!==0))return[u,a];a-=h}return[null,0]},o.prototype.forEach=function(a){for(var l,u=this.iterator();l=u();)a(l)},o.prototype.forEachAt=function(a,l,u){if(!(l<=0))for(var c=this.find(a),h=c[0],d=c[1],p,T=a-d,_=this.iterator(h);(p=_())&&T<a+l;){var v=p.length();a>T?u(p,a-T,Math.min(l,T+v-a)):u(p,0,Math.min(v,a+l-T)),T+=v}},o.prototype.map=function(a){return this.reduce(function(l,u){return l.push(a(u)),l},[])},o.prototype.reduce=function(a,l){for(var u,c=this.iterator();u=c();)l=a(l,u);return l},o})();r.default=s}),(function(n,r,i){var s=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var T in p)p.hasOwnProperty(T)&&(d[T]=p[T])};return function(d,p){h(d,p);function T(){this.constructor=d}d.prototype=p===null?Object.create(p):(T.prototype=p.prototype,new T)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,c=(function(h){s(d,h);function d(p){var T=h.call(this,p)||this;return T.scroll=T,T.observer=new MutationObserver(function(_){T.update(_)}),T.observer.observe(T.domNode,l),T.attach(),T}return d.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},d.prototype.deleteAt=function(p,T){this.update(),p===0&&T===this.length()?this.children.forEach(function(_){_.remove()}):h.prototype.deleteAt.call(this,p,T)},d.prototype.formatAt=function(p,T,_,v){this.update(),h.prototype.formatAt.call(this,p,T,_,v)},d.prototype.insertAt=function(p,T,_){this.update(),h.prototype.insertAt.call(this,p,T,_)},d.prototype.optimize=function(p,T){var _=this;p===void 0&&(p=[]),T===void 0&&(T={}),h.prototype.optimize.call(this,T);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)p.push(v.pop());for(var b=function(w,x){x===void 0&&(x=!0),!(w==null||w===_)&&w.domNode.parentNode!=null&&(w.domNode[a.DATA_KEY].mutations==null&&(w.domNode[a.DATA_KEY].mutations=[]),x&&b(w.parent))},E=function(w){w.domNode[a.DATA_KEY]==null||w.domNode[a.DATA_KEY].mutations==null||(w instanceof o.default&&w.children.forEach(E),w.optimize(T))},m=p,g=0;m.length>0;g+=1){if(g>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(m.forEach(function(w){var x=a.find(w.target,!0);x!=null&&(x.domNode===w.target&&(w.type==="childList"?(b(a.find(w.previousSibling,!1)),[].forEach.call(w.addedNodes,function(R){var A=a.find(R,!1);b(A,!1),A instanceof o.default&&A.children.forEach(function(P){b(P,!1)})})):w.type==="attributes"&&b(x.prev)),b(x))}),this.children.forEach(E),m=[].slice.call(this.observer.takeRecords()),v=m.slice();v.length>0;)p.push(v.pop())}},d.prototype.update=function(p,T){var _=this;T===void 0&&(T={}),p=p||this.observer.takeRecords(),p.map(function(v){var b=a.find(v.target,!0);return b==null?null:b.domNode[a.DATA_KEY].mutations==null?(b.domNode[a.DATA_KEY].mutations=[v],b):(b.domNode[a.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===_||v.domNode[a.DATA_KEY]==null||v.update(v.domNode[a.DATA_KEY].mutations||[],T)}),this.domNode[a.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,T),this.optimize(p,T)},d.blotName="scroll",d.defaultChild="block",d.scope=a.Scope.BLOCK_BLOT,d.tagName="DIV",d})(o.default);r.default=c}),(function(n,r,i){var s=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var p in d)d.hasOwnProperty(p)&&(h[p]=d[p])};return function(h,d){c(h,d);function p(){this.constructor=h}h.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1);function l(c,h){if(Object.keys(c).length!==Object.keys(h).length)return!1;for(var d in c)if(c[d]!==h[d])return!1;return!0}var u=(function(c){s(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h.formats=function(d){if(d.tagName!==h.tagName)return c.formats.call(this,d)},h.prototype.format=function(d,p){var T=this;d===this.statics.blotName&&!p?(this.children.forEach(function(_){_ instanceof o.default||(_=_.wrap(h.blotName,!0)),T.attributes.copy(_)}),this.unwrap()):c.prototype.format.call(this,d,p)},h.prototype.formatAt=function(d,p,T,_){if(this.formats()[T]!=null||a.query(T,a.Scope.ATTRIBUTE)){var v=this.isolate(d,p);v.format(T,_)}else c.prototype.formatAt.call(this,d,p,T,_)},h.prototype.optimize=function(d){c.prototype.optimize.call(this,d);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var T=this.next;T instanceof h&&T.prev===this&&l(p,T.formats())&&(T.moveChildren(this),T.remove())},h.blotName="inline",h.scope=a.Scope.INLINE_BLOT,h.tagName="SPAN",h})(o.default);r.default=u}),(function(n,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])};return function(c,h){u(c,h);function d(){this.constructor=c}c.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1),l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(h){var d=a.query(c.blotName).tagName;if(h.tagName!==d)return u.formats.call(this,h)},c.prototype.format=function(h,d){a.query(h,a.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!d?this.replaceWith(c.blotName):u.prototype.format.call(this,h,d))},c.prototype.formatAt=function(h,d,p,T){a.query(p,a.Scope.BLOCK)!=null?this.format(p,T):u.prototype.formatAt.call(this,h,d,p,T)},c.prototype.insertAt=function(h,d,p){if(p==null||a.query(d,a.Scope.INLINE)!=null)u.prototype.insertAt.call(this,h,d,p);else{var T=this.split(h),_=a.create(d,p);T.parent.insertBefore(_,T)}},c.prototype.update=function(h,d){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,h,d)},c.blotName="block",c.scope=a.Scope.BLOCK_BLOT,c.tagName="P",c})(o.default);r.default=l}),(function(n,r,i){var s=this&&this.__extends||(function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var h in c)c.hasOwnProperty(h)&&(u[h]=c[h])};return function(u,c){l(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=(function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(c){},u.prototype.format=function(c,h){l.prototype.formatAt.call(this,0,this.length(),c,h)},u.prototype.formatAt=function(c,h,d,p){c===0&&h===this.length()?this.format(d,p):l.prototype.formatAt.call(this,c,h,d,p)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u})(o.default);r.default=a}),(function(n,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])};return function(c,h){u(c,h);function d(){this.constructor=c}c.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=i(1),l=(function(u){s(c,u);function c(h){var d=u.call(this,h)||this;return d.text=d.statics.value(d.domNode),d}return c.create=function(h){return document.createTextNode(h)},c.value=function(h){var d=h.data;return d.normalize&&(d=d.normalize()),d},c.prototype.deleteAt=function(h,d){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+d)},c.prototype.index=function(h,d){return this.domNode===h?d:-1},c.prototype.insertAt=function(h,d,p){p==null?(this.text=this.text.slice(0,h)+d+this.text.slice(h),this.domNode.data=this.text):u.prototype.insertAt.call(this,h,d,p)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(h){u.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(h,d){return[this.domNode,h]},c.prototype.split=function(h,d){if(d===void 0&&(d=!1),!d){if(h===0)return this;if(h===this.length())return this.next}var p=a.create(this.domNode.splitText(h));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},c.prototype.update=function(h,d){var p=this;h.some(function(T){return T.type==="characterData"&&T.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=a.Scope.INLINE_BLOT,c})(o.default);r.default=l}),(function(n,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=a.length;var c=u.indexOf(a,l);return c!==-1&&c===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),c=u.length>>>0,h=arguments[1],d,p=0;p<c;p++)if(d=u[p],l.call(h,d,p,u))return d}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(n,r){var i=-1,s=1,o=0;function a(g,w,x){if(g==w)return g?[[o,g]]:[];(x<0||g.length<x)&&(x=null);var R=h(g,w),A=g.substring(0,R);g=g.substring(R),w=w.substring(R),R=d(g,w);var P=g.substring(g.length-R);g=g.substring(0,g.length-R),w=w.substring(0,w.length-R);var O=l(g,w);return A&&O.unshift([o,A]),P&&O.push([o,P]),T(O),x!=null&&(O=b(O,x)),O=E(O),O}function l(g,w){var x;if(!g)return[[s,w]];if(!w)return[[i,g]];var R=g.length>w.length?g:w,A=g.length>w.length?w:g,P=R.indexOf(A);if(P!=-1)return x=[[s,R.substring(0,P)],[o,A],[s,R.substring(P+A.length)]],g.length>w.length&&(x[0][0]=x[2][0]=i),x;if(A.length==1)return[[i,g],[s,w]];var O=p(g,w);if(O){var y=O[0],I=O[1],S=O[2],D=O[3],B=O[4],$=a(y,S),W=a(I,D);return $.concat([[o,B]],W)}return u(g,w)}function u(g,w){for(var x=g.length,R=w.length,A=Math.ceil((x+R)/2),P=A,O=2*A,y=new Array(O),I=new Array(O),S=0;S<O;S++)y[S]=-1,I[S]=-1;y[P+1]=0,I[P+1]=0;for(var D=x-R,B=D%2!=0,$=0,W=0,ae=0,Z=0,H=0;H<A;H++){for(var L=-H+$;L<=H-W;L+=2){var j=P+L,z;L==-H||L!=H&&y[j-1]<y[j+1]?z=y[j+1]:z=y[j-1]+1;for(var ne=z-L;z<x&&ne<R&&g.charAt(z)==w.charAt(ne);)z++,ne++;if(y[j]=z,z>x)W+=2;else if(ne>R)$+=2;else if(B){var G=P+D-L;if(G>=0&&G<O&&I[G]!=-1){var F=x-I[G];if(z>=F)return c(g,w,z,ne)}}}for(var V=-H+ae;V<=H-Z;V+=2){var G=P+V,F;V==-H||V!=H&&I[G-1]<I[G+1]?F=I[G+1]:F=I[G-1]+1;for(var Y=F-V;F<x&&Y<R&&g.charAt(x-F-1)==w.charAt(R-Y-1);)F++,Y++;if(I[G]=F,F>x)Z+=2;else if(Y>R)ae+=2;else if(!B){var j=P+D-V;if(j>=0&&j<O&&y[j]!=-1){var z=y[j],ne=P+z-j;if(F=x-F,z>=F)return c(g,w,z,ne)}}}}return[[i,g],[s,w]]}function c(g,w,x,R){var A=g.substring(0,x),P=w.substring(0,R),O=g.substring(x),y=w.substring(R),I=a(A,P),S=a(O,y);return I.concat(S)}function h(g,w){if(!g||!w||g.charAt(0)!=w.charAt(0))return 0;for(var x=0,R=Math.min(g.length,w.length),A=R,P=0;x<A;)g.substring(P,A)==w.substring(P,A)?(x=A,P=x):R=A,A=Math.floor((R-x)/2+x);return A}function d(g,w){if(!g||!w||g.charAt(g.length-1)!=w.charAt(w.length-1))return 0;for(var x=0,R=Math.min(g.length,w.length),A=R,P=0;x<A;)g.substring(g.length-A,g.length-P)==w.substring(w.length-A,w.length-P)?(x=A,P=x):R=A,A=Math.floor((R-x)/2+x);return A}function p(g,w){var x=g.length>w.length?g:w,R=g.length>w.length?w:g;if(x.length<4||R.length*2<x.length)return null;function A(W,ae,Z){for(var H=W.substring(Z,Z+Math.floor(W.length/4)),L=-1,j="",z,ne,G,F;(L=ae.indexOf(H,L+1))!=-1;){var V=h(W.substring(Z),ae.substring(L)),Y=d(W.substring(0,Z),ae.substring(0,L));j.length<Y+V&&(j=ae.substring(L-Y,L)+ae.substring(L,L+V),z=W.substring(0,Z-Y),ne=W.substring(Z+V),G=ae.substring(0,L-Y),F=ae.substring(L+V))}return j.length*2>=W.length?[z,ne,G,F,j]:null}var P=A(x,R,Math.ceil(x.length/4)),O=A(x,R,Math.ceil(x.length/2)),y;if(!P&&!O)return null;O?P?y=P[4].length>O[4].length?P:O:y=O:y=P;var I,S,D,B;g.length>w.length?(I=y[0],S=y[1],D=y[2],B=y[3]):(D=y[0],B=y[1],I=y[2],S=y[3]);var $=y[4];return[I,S,D,B,$]}function T(g){g.push([o,""]);for(var w=0,x=0,R=0,A="",P="",O;w<g.length;)switch(g[w][0]){case s:R++,P+=g[w][1],w++;break;case i:x++,A+=g[w][1],w++;break;case o:x+R>1?(x!==0&&R!==0&&(O=h(P,A),O!==0&&(w-x-R>0&&g[w-x-R-1][0]==o?g[w-x-R-1][1]+=P.substring(0,O):(g.splice(0,0,[o,P.substring(0,O)]),w++),P=P.substring(O),A=A.substring(O)),O=d(P,A),O!==0&&(g[w][1]=P.substring(P.length-O)+g[w][1],P=P.substring(0,P.length-O),A=A.substring(0,A.length-O))),x===0?g.splice(w-R,x+R,[s,P]):R===0?g.splice(w-x,x+R,[i,A]):g.splice(w-x-R,x+R,[i,A],[s,P]),w=w-x-R+(x?1:0)+(R?1:0)+1):w!==0&&g[w-1][0]==o?(g[w-1][1]+=g[w][1],g.splice(w,1)):w++,R=0,x=0,A="",P="";break}g[g.length-1][1]===""&&g.pop();var y=!1;for(w=1;w<g.length-1;)g[w-1][0]==o&&g[w+1][0]==o&&(g[w][1].substring(g[w][1].length-g[w-1][1].length)==g[w-1][1]?(g[w][1]=g[w-1][1]+g[w][1].substring(0,g[w][1].length-g[w-1][1].length),g[w+1][1]=g[w-1][1]+g[w+1][1],g.splice(w-1,1),y=!0):g[w][1].substring(0,g[w+1][1].length)==g[w+1][1]&&(g[w-1][1]+=g[w+1][1],g[w][1]=g[w][1].substring(g[w+1][1].length)+g[w+1][1],g.splice(w+1,1),y=!0)),w++;y&&T(g)}var _=a;_.INSERT=s,_.DELETE=i,_.EQUAL=o,n.exports=_;function v(g,w){if(w===0)return[o,g];for(var x=0,R=0;R<g.length;R++){var A=g[R];if(A[0]===i||A[0]===o){var P=x+A[1].length;if(w===P)return[R+1,g];if(w<P){g=g.slice();var O=w-x,y=[A[0],A[1].slice(0,O)],I=[A[0],A[1].slice(O)];return g.splice(R,1,y,I),[R+1,g]}else x=P}}throw new Error("cursor_pos is out of bounds!")}function b(g,w){var x=v(g,w),R=x[1],A=x[0],P=R[A],O=R[A+1];if(P==null)return g;if(P[0]!==o)return g;if(O!=null&&P[1]+O[1]===O[1]+P[1])return R.splice(A,2,O,P),m(R,A,2);if(O!=null&&O[1].indexOf(P[1])===0){R.splice(A,2,[O[0],P[1]],[0,P[1]]);var y=O[1].slice(P[1].length);return y.length>0&&R.splice(A+2,0,[O[0],y]),m(R,A,3)}else return g}function E(g){for(var w=!1,x=function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},R=function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},A=2;A<g.length;A+=1)g[A-2][0]===o&&R(g[A-2][1])&&g[A-1][0]===i&&x(g[A-1][1])&&g[A][0]===s&&x(g[A][1])&&(w=!0,g[A-1][1]=g[A-2][1].slice(-1)+g[A-1][1],g[A][1]=g[A-2][1].slice(-1)+g[A][1],g[A-2][1]=g[A-2][1].slice(0,-1));if(!w)return g;for(var P=[],A=0;A<g.length;A+=1)g[A][1].length>0&&P.push(g[A]);return P}function m(g,w,x){for(var R=w+x-1;R>=0&&R>=w-1;R--)if(R+1<g.length){var A=g[R],P=g[R+1];A[0]===P[1]&&g.splice(R,2,[A[0],A[1]+P[1]])}return g}}),(function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var o=[];for(var a in s)o.push(a);return o}}),(function(n,r){var i=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";r=n.exports=i?s:o,r.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}}),(function(n,r){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)i.call(h,d)&&c.push(s?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c,h){var d=s?s+c:c,p=this._events[d];if(h)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var T=0,_=p.length,v=new Array(_);T<_;T++)v[T]=p[T].fn;return v},l.prototype.emit=function(c,h,d,p,T,_){var v=s?s+c:c;if(!this._events[v])return!1;var b=this._events[v],E=arguments.length,m,g;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,p),!0;case 5:return b.fn.call(b.context,h,d,p,T),!0;case 6:return b.fn.call(b.context,h,d,p,T,_),!0}for(g=1,m=new Array(E-1);g<E;g++)m[g-1]=arguments[g];b.fn.apply(b.context,m)}else{var w=b.length,x;for(g=0;g<w;g++)switch(b[g].once&&this.removeListener(c,b[g].fn,void 0,!0),E){case 1:b[g].fn.call(b[g].context);break;case 2:b[g].fn.call(b[g].context,h);break;case 3:b[g].fn.call(b[g].context,h,d);break;case 4:b[g].fn.call(b[g].context,h,d,p);break;default:if(!m)for(x=1,m=new Array(E-1);x<E;x++)m[x-1]=arguments[x];b[g].fn.apply(b[g].context,m)}}return!0},l.prototype.on=function(c,h,d){var p=new a(h,d||this),T=s?s+c:c;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],p]:this._events[T].push(p):(this._events[T]=p,this._eventsCount++),this},l.prototype.once=function(c,h,d){var p=new a(h,d||this,!0),T=s?s+c:c;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],p]:this._events[T].push(p):(this._events[T]=p,this._eventsCount++),this},l.prototype.removeListener=function(c,h,d,p){var T=s?s+c:c;if(!this._events[T])return this;if(!h)return--this._eventsCount===0?this._events=new o:delete this._events[T],this;var _=this._events[T];if(_.fn)_.fn===h&&(!p||_.once)&&(!d||_.context===d)&&(--this._eventsCount===0?this._events=new o:delete this._events[T]);else{for(var v=0,b=[],E=_.length;v<E;v++)(_[v].fn!==h||p&&!_[v].once||d&&_[v].context!==d)&&b.push(_[v]);b.length?this._events[T]=b.length===1?b[0]:b:--this._eventsCount===0?this._events=new o:delete this._events[T]}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=s?s+c:c,this._events[h]&&(--this._eventsCount===0?this._events=new o:delete this._events[h])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},o=(function(){function te(J,re){var ie=[],le=!0,ge=!1,_e=void 0;try{for(var be=J[Symbol.iterator](),Se;!(le=(Se=be.next()).done)&&(ie.push(Se.value),!(re&&ie.length===re));le=!0);}catch(Ne){ge=!0,_e=Ne}finally{try{!le&&be.return&&be.return()}finally{if(ge)throw _e}}return ie}return function(J,re){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return te(J,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function te(J,re){for(var ie=0;ie<re.length;ie++){var le=re[ie];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(J,le.key,le)}}return function(J,re,ie){return re&&te(J.prototype,re),ie&&te(J,ie),J}})(),l=i(3),u=I(l),c=i(2),h=I(c),d=i(0),p=I(d),T=i(5),_=I(T),v=i(10),b=I(v),E=i(9),m=I(E),g=i(36),w=i(37),x=i(13),R=I(x),A=i(26),P=i(38),O=i(39),y=i(40);function I(te){return te&&te.__esModule?te:{default:te}}function S(te,J,re){return J in te?Object.defineProperty(te,J,{value:re,enumerable:!0,configurable:!0,writable:!0}):te[J]=re,te}function D(te,J){if(!(te instanceof J))throw new TypeError("Cannot call a class as a function")}function B(te,J){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:te}function $(te,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);te.prototype=Object.create(J&&J.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(te,J):te.__proto__=J)}var W=(0,b.default)("quill:clipboard"),ae="__ql-matcher",Z=[[Node.TEXT_NODE,ce],[Node.TEXT_NODE,ee],["br",ye],[Node.ELEMENT_NODE,ee],[Node.ELEMENT_NODE,se],[Node.ELEMENT_NODE,ue],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,he],["li",K],["b",Y.bind(Y,"bold")],["i",Y.bind(Y,"italic")],["style",q]],H=[g.AlignAttribute,P.DirectionAttribute].reduce(function(te,J){return te[J.keyName]=J,te},{}),L=[g.AlignStyle,w.BackgroundStyle,A.ColorStyle,P.DirectionStyle,O.FontStyle,y.SizeStyle].reduce(function(te,J){return te[J.keyName]=J,te},{}),j=(function(te){$(J,te);function J(re,ie){D(this,J);var le=B(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,re,ie));return le.quill.root.addEventListener("paste",le.onPaste.bind(le)),le.container=le.quill.addContainer("ql-clipboard"),le.container.setAttribute("contenteditable",!0),le.container.setAttribute("tabindex",-1),le.matchers=[],Z.concat(le.options.matchers).forEach(function(ge){var _e=o(ge,2),be=_e[0],Se=_e[1];!ie.matchVisual&&Se===ue||le.addMatcher(be,Se)}),le}return a(J,[{key:"addMatcher",value:function(ie,le){this.matchers.push([ie,le])}},{key:"convert",value:function(ie){if(typeof ie=="string")return this.container.innerHTML=ie.replace(/\>\r?\n +\</g,"><"),this.convert();var le=this.quill.getFormat(this.quill.selection.savedRange.index);if(le[R.default.blotName]){var ge=this.container.innerText;return this.container.innerHTML="",new h.default().insert(ge,S({},R.default.blotName,le[R.default.blotName]))}var _e=this.prepareMatching(),be=o(_e,2),Se=be[0],Ne=be[1],we=V(this.container,Se,Ne);return G(we,`
`)&&we.ops[we.ops.length-1].attributes==null&&(we=we.compose(new h.default().retain(we.length()-1).delete(1))),W.log("convert",this.container.innerHTML,we),this.container.innerHTML="",we}},{key:"dangerouslyPasteHTML",value:function(ie,le){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.default.sources.API;if(typeof ie=="string")this.quill.setContents(this.convert(ie),le),this.quill.setSelection(0,_.default.sources.SILENT);else{var _e=this.convert(le);this.quill.updateContents(new h.default().retain(ie).concat(_e),ge),this.quill.setSelection(ie+_e.length(),_.default.sources.SILENT)}}},{key:"onPaste",value:function(ie){var le=this;if(!(ie.defaultPrevented||!this.quill.isEnabled())){var ge=this.quill.getSelection(),_e=new h.default().retain(ge.index),be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(_.default.sources.SILENT),setTimeout(function(){_e=_e.concat(le.convert()).delete(ge.length),le.quill.updateContents(_e,_.default.sources.USER),le.quill.setSelection(_e.length()-ge.length,_.default.sources.SILENT),le.quill.scrollingContainer.scrollTop=be,le.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ie=this,le=[],ge=[];return this.matchers.forEach(function(_e){var be=o(_e,2),Se=be[0],Ne=be[1];switch(Se){case Node.TEXT_NODE:ge.push(Ne);break;case Node.ELEMENT_NODE:le.push(Ne);break;default:[].forEach.call(ie.container.querySelectorAll(Se),function(we){we[ae]=we[ae]||[],we[ae].push(Ne)});break}}),[le,ge]}}]),J})(m.default);j.DEFAULTS={matchers:[],matchVisual:!0};function z(te,J,re){return(typeof J>"u"?"undefined":s(J))==="object"?Object.keys(J).reduce(function(ie,le){return z(ie,le,J[le])},te):te.reduce(function(ie,le){return le.attributes&&le.attributes[J]?ie.push(le):ie.insert(le.insert,(0,u.default)({},S({},J,re),le.attributes))},new h.default)}function ne(te){if(te.nodeType!==Node.ELEMENT_NODE)return{};var J="__ql-computed-style";return te[J]||(te[J]=window.getComputedStyle(te))}function G(te,J){for(var re="",ie=te.ops.length-1;ie>=0&&re.length<J.length;--ie){var le=te.ops[ie];if(typeof le.insert!="string")break;re=le.insert+re}return re.slice(-1*J.length)===J}function F(te){if(te.childNodes.length===0)return!1;var J=ne(te);return["block","list-item"].indexOf(J.display)>-1}function V(te,J,re){return te.nodeType===te.TEXT_NODE?re.reduce(function(ie,le){return le(te,ie)},new h.default):te.nodeType===te.ELEMENT_NODE?[].reduce.call(te.childNodes||[],function(ie,le){var ge=V(le,J,re);return le.nodeType===te.ELEMENT_NODE&&(ge=J.reduce(function(_e,be){return be(le,_e)},ge),ge=(le[ae]||[]).reduce(function(_e,be){return be(le,_e)},ge)),ie.concat(ge)},new h.default):new h.default}function Y(te,J,re){return z(re,te,!0)}function X(te,J){var re=p.default.Attributor.Attribute.keys(te),ie=p.default.Attributor.Class.keys(te),le=p.default.Attributor.Style.keys(te),ge={};return re.concat(ie).concat(le).forEach(function(_e){var be=p.default.query(_e,p.default.Scope.ATTRIBUTE);be!=null&&(ge[be.attrName]=be.value(te),ge[be.attrName])||(be=H[_e],be!=null&&(be.attrName===_e||be.keyName===_e)&&(ge[be.attrName]=be.value(te)||void 0),be=L[_e],be!=null&&(be.attrName===_e||be.keyName===_e)&&(be=L[_e],ge[be.attrName]=be.value(te)||void 0))}),Object.keys(ge).length>0&&(J=z(J,ge)),J}function se(te,J){var re=p.default.query(te);if(re==null)return J;if(re.prototype instanceof p.default.Embed){var ie={},le=re.value(te);le!=null&&(ie[re.blotName]=le,J=new h.default().insert(ie,re.formats(te)))}else typeof re.formats=="function"&&(J=z(J,re.blotName,re.formats(te)));return J}function ye(te,J){return G(J,`
`)||J.insert(`
`),J}function q(){return new h.default}function K(te,J){var re=p.default.query(te);if(re==null||re.blotName!=="list-item"||!G(J,`
`))return J;for(var ie=-1,le=te.parentNode;!le.classList.contains("ql-clipboard");)(p.default.query(le)||{}).blotName==="list"&&(ie+=1),le=le.parentNode;return ie<=0?J:J.compose(new h.default().retain(J.length()-1).retain(1,{indent:ie}))}function ee(te,J){return G(J,`
`)||(F(te)||J.length()>0&&te.nextSibling&&F(te.nextSibling))&&J.insert(`
`),J}function ue(te,J){if(F(te)&&te.nextElementSibling!=null&&!G(J,`

`)){var re=te.offsetHeight+parseFloat(ne(te).marginTop)+parseFloat(ne(te).marginBottom);te.nextElementSibling.offsetTop>te.offsetTop+re*1.5&&J.insert(`
`)}return J}function he(te,J){var re={},ie=te.style||{};return ie.fontStyle&&ne(te).fontStyle==="italic"&&(re.italic=!0),ie.fontWeight&&(ne(te).fontWeight.startsWith("bold")||parseInt(ne(te).fontWeight)>=700)&&(re.bold=!0),Object.keys(re).length>0&&(J=z(J,re)),parseFloat(ie.textIndent||0)>0&&(J=new h.default().insert("	").concat(J)),J}function ce(te,J){var re=te.data;if(te.parentNode.tagName==="O:P")return J.insert(re.trim());if(re.trim().length===0&&te.parentNode.classList.contains("ql-clipboard"))return J;if(!ne(te.parentNode).whiteSpace.startsWith("pre")){var ie=function(ge,_e){return _e=_e.replace(/[^\u00a0]/g,""),_e.length<1&&ge?" ":_e};re=re.replace(/\r\n/g," ").replace(/\n/g," "),re=re.replace(/\s\s+/g,ie.bind(ie,!0)),(te.previousSibling==null&&F(te.parentNode)||te.previousSibling!=null&&F(te.previousSibling))&&(re=re.replace(/^\s+/,ie.bind(ie,!1))),(te.nextSibling==null&&F(te.parentNode)||te.nextSibling!=null&&F(te.nextSibling))&&(re=re.replace(/\s+$/,ie.bind(ie,!1)))}return J.insert(re)}r.default=j,r.matchAttributor=X,r.matchBlot=se,r.matchNewline=ee,r.matchSpacing=ue,r.matchText=ce}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function T(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&T(_.prototype,v),b&&T(_,b),_}})(),o=function T(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var m=Object.getPrototypeOf(_);return m===null?void 0:T(m,v,b)}else{if("value"in E)return E.value;var g=E.get;return g===void 0?void 0:g.call(b)}},a=i(6),l=u(a);function u(T){return T&&T.__esModule?T:{default:T}}function c(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function h(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function d(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var p=(function(T){d(_,T);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"optimize",value:function(b){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,b),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),_})(l.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=(function(){function y(I,S){var D=[],B=!0,$=!1,W=void 0;try{for(var ae=I[Symbol.iterator](),Z;!(B=(Z=ae.next()).done)&&(D.push(Z.value),!(S&&D.length===S));B=!0);}catch(H){$=!0,W=H}finally{try{!B&&ae.return&&ae.return()}finally{if($)throw W}}return D}return function(I,S){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return y(I,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function y(I,S){for(var D=0;D<S.length;D++){var B=S[D];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(I,B.key,B)}}return function(I,S,D){return S&&y(I.prototype,S),D&&y(I,D),I}})(),a=i(2),l=b(a),u=i(0),c=b(u),h=i(5),d=b(h),p=i(10),T=b(p),_=i(9),v=b(_);function b(y){return y&&y.__esModule?y:{default:y}}function E(y,I,S){return I in y?Object.defineProperty(y,I,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[I]=S,y}function m(y,I){if(!(y instanceof I))throw new TypeError("Cannot call a class as a function")}function g(y,I){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:y}function w(y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);y.prototype=Object.create(I&&I.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(y,I):y.__proto__=I)}var x=(0,T.default)("quill:toolbar"),R=(function(y){w(I,y);function I(S,D){m(this,I);var B=g(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,S,D));if(Array.isArray(B.options.container)){var $=document.createElement("div");P($,B.options.container),S.container.parentNode.insertBefore($,S.container),B.container=$}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var W;return W=x.error("Container required for toolbar",B.options),g(B,W)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(ae){B.addHandler(ae,B.options.handlers[ae])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(ae){B.attach(ae)}),B.quill.on(d.default.events.EDITOR_CHANGE,function(ae,Z){ae===d.default.events.SELECTION_CHANGE&&B.update(Z)}),B.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){var ae=B.quill.selection.getRange(),Z=s(ae,1),H=Z[0];B.update(H)}),B}return o(I,[{key:"addHandler",value:function(D,B){this.handlers[D]=B}},{key:"attach",value:function(D){var B=this,$=[].find.call(D.classList,function(ae){return ae.indexOf("ql-")===0});if($){if($=$.slice(3),D.tagName==="BUTTON"&&D.setAttribute("type","button"),this.handlers[$]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[$]==null){x.warn("ignoring attaching to disabled format",$,D);return}if(c.default.query($)==null){x.warn("ignoring attaching to nonexistent format",$,D);return}}var W=D.tagName==="SELECT"?"change":"click";D.addEventListener(W,function(ae){var Z=void 0;if(D.tagName==="SELECT"){if(D.selectedIndex<0)return;var H=D.options[D.selectedIndex];H.hasAttribute("selected")?Z=!1:Z=H.value||!1}else D.classList.contains("ql-active")?Z=!1:Z=D.value||!D.hasAttribute("value"),ae.preventDefault();B.quill.focus();var L=B.quill.selection.getRange(),j=s(L,1),z=j[0];if(B.handlers[$]!=null)B.handlers[$].call(B,Z);else if(c.default.query($).prototype instanceof c.default.Embed){if(Z=prompt("Enter "+$),!Z)return;B.quill.updateContents(new l.default().retain(z.index).delete(z.length).insert(E({},$,Z)),d.default.sources.USER)}else B.quill.format($,Z,d.default.sources.USER);B.update(z)}),this.controls.push([$,D])}}},{key:"update",value:function(D){var B=D==null?{}:this.quill.getFormat(D);this.controls.forEach(function($){var W=s($,2),ae=W[0],Z=W[1];if(Z.tagName==="SELECT"){var H=void 0;if(D==null)H=null;else if(B[ae]==null)H=Z.querySelector("option[selected]");else if(!Array.isArray(B[ae])){var L=B[ae];typeof L=="string"&&(L=L.replace(/\"/g,'\\"')),H=Z.querySelector('option[value="'+L+'"]')}H==null?(Z.value="",Z.selectedIndex=-1):H.selected=!0}else if(D==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var j=B[ae]===Z.getAttribute("value")||B[ae]!=null&&B[ae].toString()===Z.getAttribute("value")||B[ae]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",j)}else Z.classList.toggle("ql-active",B[ae]!=null)})}}]),I})(v.default);R.DEFAULTS={};function A(y,I,S){var D=document.createElement("button");D.setAttribute("type","button"),D.classList.add("ql-"+I),S!=null&&(D.value=S),y.appendChild(D)}function P(y,I){Array.isArray(I[0])||(I=[I]),I.forEach(function(S){var D=document.createElement("span");D.classList.add("ql-formats"),S.forEach(function(B){if(typeof B=="string")A(D,B);else{var $=Object.keys(B)[0],W=B[$];Array.isArray(W)?O(D,$,W):A(D,$,W)}}),y.appendChild(D)})}function O(y,I,S){var D=document.createElement("select");D.classList.add("ql-"+I),S.forEach(function(B){var $=document.createElement("option");B!==!1?$.setAttribute("value",B):$.setAttribute("selected","selected"),D.appendChild($)}),y.appendChild(D)}R.DEFAULTS={container:null,handlers:{clean:function(){var I=this,S=this.quill.getSelection();if(S!=null)if(S.length==0){var D=this.quill.getFormat();Object.keys(D).forEach(function(B){c.default.query(B,c.default.Scope.INLINE)!=null&&I.quill.format(B,!1)})}else this.quill.removeFormat(S,d.default.sources.USER)},direction:function(I){var S=this.quill.getFormat().align;I==="rtl"&&S==null?this.quill.format("align","right",d.default.sources.USER):!I&&S==="right"&&this.quill.format("align",!1,d.default.sources.USER),this.quill.format("direction",I,d.default.sources.USER)},indent:function(I){var S=this.quill.getSelection(),D=this.quill.getFormat(S),B=parseInt(D.indent||0);if(I==="+1"||I==="-1"){var $=I==="+1"?1:-1;D.direction==="rtl"&&($*=-1),this.quill.format("indent",B+$,d.default.sources.USER)}},link:function(I){I===!0&&(I=prompt("Enter link URL:")),this.quill.format("link",I,d.default.sources.USER)},list:function(I){var S=this.quill.getSelection(),D=this.quill.getFormat(S);I==="check"?D.list==="checked"||D.list==="unchecked"?this.quill.format("list",!1,d.default.sources.USER):this.quill.format("list","unchecked",d.default.sources.USER):this.quill.format("list",I,d.default.sources.USER)}}},r.default=R,r.addControls=P}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function T(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&T(_.prototype,v),b&&T(_,b),_}})(),o=function T(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var m=Object.getPrototypeOf(_);return m===null?void 0:T(m,v,b)}else{if("value"in E)return E.value;var g=E.get;return g===void 0?void 0:g.call(b)}},a=i(28),l=u(a);function u(T){return T&&T.__esModule?T:{default:T}}function c(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function h(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function d(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var p=(function(T){d(_,T);function _(v,b){c(this,_);var E=h(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,v));return E.label.innerHTML=b,E.container.classList.add("ql-color-picker"),[].slice.call(E.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(m){m.classList.add("ql-primary")}),E}return s(_,[{key:"buildItem",value:function(b){var E=o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"buildItem",this).call(this,b);return E.style.backgroundColor=b.getAttribute("value")||"",E}},{key:"selectItem",value:function(b,E){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,b,E);var m=this.label.querySelector(".ql-color-label"),g=b&&b.getAttribute("data-value")||"";m&&(m.tagName==="line"?m.style.stroke=g:m.style.fill=g)}}]),_})(l.default);r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function T(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&T(_.prototype,v),b&&T(_,b),_}})(),o=function T(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var m=Object.getPrototypeOf(_);return m===null?void 0:T(m,v,b)}else{if("value"in E)return E.value;var g=E.get;return g===void 0?void 0:g.call(b)}},a=i(28),l=u(a);function u(T){return T&&T.__esModule?T:{default:T}}function c(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function h(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function d(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var p=(function(T){d(_,T);function _(v,b){c(this,_);var E=h(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,v));return E.container.classList.add("ql-icon-picker"),[].forEach.call(E.container.querySelectorAll(".ql-picker-item"),function(m){m.innerHTML=b[m.getAttribute("data-value")||""]}),E.defaultItem=E.container.querySelector(".ql-selected"),E.selectItem(E.defaultItem),E}return s(_,[{key:"selectItem",value:function(b,E){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,b,E),b=b||this.defaultItem,this.label.innerHTML=b.innerHTML}}]),_})(l.default);r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function l(u,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}})();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=(function(){function l(u,c){var h=this;o(this,l),this.quill=u,this.boundsContainer=c||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var h=c.left+c.width/2-this.root.offsetWidth/2,d=c.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=d+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),T=this.root.getBoundingClientRect(),_=0;if(T.right>p.right&&(_=p.right-T.right,this.root.style.left=h+_+"px"),T.left<p.left&&(_=p.left-T.left,this.root.style.left=h+_+"px"),T.bottom>p.bottom){var v=T.bottom-T.top,b=c.bottom-c.top+v;this.root.style.top=d-b+"px",this.root.classList.add("ql-flip")}return _}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l})();r.default=a}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function O(y,I){var S=[],D=!0,B=!1,$=void 0;try{for(var W=y[Symbol.iterator](),ae;!(D=(ae=W.next()).done)&&(S.push(ae.value),!(I&&S.length===I));D=!0);}catch(Z){B=!0,$=Z}finally{try{!D&&W.return&&W.return()}finally{if(B)throw $}}return S}return function(y,I){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return O(y,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function O(y,I,S){y===null&&(y=Function.prototype);var D=Object.getOwnPropertyDescriptor(y,I);if(D===void 0){var B=Object.getPrototypeOf(y);return B===null?void 0:O(B,I,S)}else{if("value"in D)return D.value;var $=D.get;return $===void 0?void 0:$.call(S)}},a=(function(){function O(y,I){for(var S=0;S<I.length;S++){var D=I[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(y,D.key,D)}}return function(y,I,S){return I&&O(y.prototype,I),S&&O(y,S),y}})(),l=i(3),u=m(l),c=i(8),h=m(c),d=i(43),p=m(d),T=i(27),_=m(T),v=i(15),b=i(41),E=m(b);function m(O){return O&&O.__esModule?O:{default:O}}function g(O,y){if(!(O instanceof y))throw new TypeError("Cannot call a class as a function")}function w(O,y){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:O}function x(O,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);O.prototype=Object.create(y&&y.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(O,y):O.__proto__=y)}var R=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],A=(function(O){x(y,O);function y(I,S){g(this,y),S.modules.toolbar!=null&&S.modules.toolbar.container==null&&(S.modules.toolbar.container=R);var D=w(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,I,S));return D.quill.container.classList.add("ql-snow"),D}return a(y,[{key:"extendToolbar",value:function(S){S.container.classList.add("ql-snow"),this.buildButtons([].slice.call(S.container.querySelectorAll("button")),E.default),this.buildPickers([].slice.call(S.container.querySelectorAll("select")),E.default),this.tooltip=new P(this.quill,this.options.bounds),S.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(D,B){S.handlers.link.call(S,!B.format.link)})}}]),y})(p.default);A.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(y){if(y){var I=this.quill.getSelection();if(I==null||I.length==0)return;var S=this.quill.getText(I);/^\S+@\S+\.\S+$/.test(S)&&S.indexOf("mailto:")!==0&&(S="mailto:"+S);var D=this.quill.theme.tooltip;D.edit("link",S)}else this.quill.format("link",!1)}}}}});var P=(function(O){x(y,O);function y(I,S){g(this,y);var D=w(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,I,S));return D.preview=D.root.querySelector("a.ql-preview"),D}return a(y,[{key:"listen",value:function(){var S=this;o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(D){S.root.classList.contains("ql-editing")?S.save():S.edit("link",S.preview.textContent),D.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(D){if(S.linkRange!=null){var B=S.linkRange;S.restoreFocus(),S.quill.formatText(B,"link",!1,h.default.sources.USER),delete S.linkRange}D.preventDefault(),S.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(D,B,$){if(D!=null){if(D.length===0&&$===h.default.sources.USER){var W=S.quill.scroll.descendant(_.default,D.index),ae=s(W,2),Z=ae[0],H=ae[1];if(Z!=null){S.linkRange=new v.Range(D.index-H,Z.length());var L=_.default.formats(Z.domNode);S.preview.textContent=L,S.preview.setAttribute("href",L),S.show(),S.position(S.quill.getBounds(S.linkRange));return}}else delete S.linkRange;S.hide()}})}},{key:"show",value:function(){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),y})(d.BaseTooltip);P.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=A}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),o=le(s),a=i(36),l=i(38),u=i(64),c=i(65),h=le(c),d=i(66),p=le(d),T=i(67),_=le(T),v=i(37),b=i(26),E=i(39),m=i(40),g=i(56),w=le(g),x=i(68),R=le(x),A=i(27),P=le(A),O=i(69),y=le(O),I=i(70),S=le(I),D=i(71),B=le(D),$=i(72),W=le($),ae=i(73),Z=le(ae),H=i(13),L=le(H),j=i(74),z=le(j),ne=i(75),G=le(ne),F=i(57),V=le(F),Y=i(41),X=le(Y),se=i(28),ye=le(se),q=i(59),K=le(q),ee=i(60),ue=le(ee),he=i(61),ce=le(he),te=i(108),J=le(te),re=i(62),ie=le(re);function le(ge){return ge&&ge.__esModule?ge:{default:ge}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":b.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":E.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":b.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":E.FontStyle,"attributors/style/size":m.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":b.ColorStyle,"formats/font":E.FontClass,"formats/size":m.SizeClass,"formats/blockquote":h.default,"formats/code-block":L.default,"formats/header":p.default,"formats/list":_.default,"formats/bold":w.default,"formats/code":H.Code,"formats/italic":R.default,"formats/link":P.default,"formats/script":y.default,"formats/strike":S.default,"formats/underline":B.default,"formats/image":W.default,"formats/video":Z.default,"formats/list/item":T.ListItem,"modules/formula":z.default,"modules/syntax":G.default,"modules/toolbar":V.default,"themes/bubble":J.default,"themes/snow":ie.default,"ui/icons":X.default,"ui/picker":ye.default,"ui/icon-picker":ue.default,"ui/color-picker":K.default,"ui/tooltip":ce.default},!0),r.default=o.default}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=(function(){function _(v,b){for(var E=0;E<b.length;E++){var m=b[E];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),o=function _(v,b,E){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,b);if(m===void 0){var g=Object.getPrototypeOf(v);return g===null?void 0:_(g,b,E)}else{if("value"in m)return m.value;var w=m.get;return w===void 0?void 0:w.call(E)}},a=i(0),l=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function c(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function d(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var p=(function(_){d(v,_);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"add",value:function(E,m){if(m==="+1"||m==="-1"){var g=this.value(E)||0;m=m==="+1"?g+1:g-1}return m===0?(this.remove(E),!0):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,E,m)}},{key:"canAdd",value:function(E,m){return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,E,m)||o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,E,parseInt(m))}},{key:"value",value:function(E){return parseInt(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,E))||void 0}}]),v})(l.default.Attributor.Class),T=new p("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=T}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function u(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function c(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var h=(function(d){c(p,d);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function p(T,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(T,b.key,b)}}return function(T,_,v){return _&&p(T.prototype,_),v&&p(T,v),T}})(),o=i(4),a=l(o);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,T){if(!(p instanceof T))throw new TypeError("Cannot call a class as a function")}function c(p,T){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:p}function h(p,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);p.prototype=Object.create(T&&T.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(p,T):p.__proto__=T)}var d=(function(p){h(T,p);function T(){return u(this,T),c(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return s(T,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),T})(a.default);d.blotName="header",d.tagName=["H1","H2","H3","H4","H5","H6"],r.default=d}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=(function(){function g(w,x){for(var R=0;R<x.length;R++){var A=x[R];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,x,R){return x&&g(w.prototype,x),R&&g(w,R),w}})(),o=function g(w,x,R){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,x);if(A===void 0){var P=Object.getPrototypeOf(w);return P===null?void 0:g(P,x,R)}else{if("value"in A)return A.value;var O=A.get;return O===void 0?void 0:O.call(R)}},a=i(0),l=p(a),u=i(4),c=p(u),h=i(25),d=p(h);function p(g){return g&&g.__esModule?g:{default:g}}function T(g,w,x){return w in g?Object.defineProperty(g,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[w]=x,g}function _(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function v(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function b(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var E=(function(g){b(w,g);function w(){return _(this,w),v(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"format",value:function(R,A){R===m.blotName&&!A?this.replaceWith(l.default.create(this.statics.scope)):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,R,A)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(R,A){return this.parent.isolate(this.offset(this.parent),this.length()),R===this.parent.statics.blotName?(this.parent.replaceWith(R,A),this):(this.parent.unwrap(),o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,R,A))}}],[{key:"formats",value:function(R){return R.tagName===this.tagName?void 0:o(w.__proto__||Object.getPrototypeOf(w),"formats",this).call(this,R)}}]),w})(c.default);E.blotName="list-item",E.tagName="LI";var m=(function(g){b(w,g),s(w,null,[{key:"create",value:function(R){var A=R==="ordered"?"OL":"UL",P=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,A);return(R==="checked"||R==="unchecked")&&P.setAttribute("data-checked",R==="checked"),P}},{key:"formats",value:function(R){if(R.tagName==="OL")return"ordered";if(R.tagName==="UL")return R.hasAttribute("data-checked")?R.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function w(x){_(this,w);var R=v(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,x)),A=function(O){if(O.target.parentNode===x){var y=R.statics.formats(x),I=l.default.find(O.target);y==="checked"?I.format("list","unchecked"):y==="unchecked"&&I.format("list","checked")}};return x.addEventListener("touchstart",A),x.addEventListener("mousedown",A),R}return s(w,[{key:"format",value:function(R,A){this.children.length>0&&this.children.tail.format(R,A)}},{key:"formats",value:function(){return T({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(R,A){if(R instanceof E)o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,R,A);else{var P=A==null?this.length():A.offset(this),O=this.split(P);O.parent.insertBefore(R,O)}}},{key:"optimize",value:function(R){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,R);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&A.domNode.tagName===this.domNode.tagName&&A.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(A.moveChildren(this),A.remove())}},{key:"replace",value:function(R){if(R.statics.blotName!==this.statics.blotName){var A=l.default.create(this.statics.defaultChild);R.moveChildren(A),this.appendChild(A)}o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replace",this).call(this,R)}}]),w})(d.default);m.blotName="list",m.scope=l.default.Scope.BLOCK_BLOT,m.tagName=["OL","UL"],m.defaultChild="list-item",m.allowedChildren=[E],r.ListItem=E,r.default=m}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function u(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function c(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var h=(function(d){c(p,d);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function T(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&T(_.prototype,v),b&&T(_,b),_}})(),o=function T(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var m=Object.getPrototypeOf(_);return m===null?void 0:T(m,v,b)}else{if("value"in E)return E.value;var g=E.get;return g===void 0?void 0:g.call(b)}},a=i(6),l=u(a);function u(T){return T&&T.__esModule?T:{default:T}}function c(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function h(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function d(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var p=(function(T){d(_,T);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,null,[{key:"create",value:function(b){return b==="super"?document.createElement("sup"):b==="sub"?document.createElement("sub"):o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,b)}},{key:"formats",value:function(b){if(b.tagName==="SUB")return"sub";if(b.tagName==="SUP")return"super"}}]),_})(l.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function u(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function c(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var h=(function(d){c(p,d);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="strike",h.tagName="S",r.default=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function u(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function c(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var h=(function(d){c(p,d);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="underline",h.tagName="U",r.default=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function v(b,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}return function(b,E,m){return E&&v(b.prototype,E),m&&v(b,m),b}})(),o=function v(b,E,m){b===null&&(b=Function.prototype);var g=Object.getOwnPropertyDescriptor(b,E);if(g===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:v(w,E,m)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(m)}},a=i(0),l=c(a),u=i(27);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function p(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var T=["alt","height","width"],_=(function(v){p(b,v);function b(){return h(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"format",value:function(m,g){T.indexOf(m)>-1?g?this.domNode.setAttribute(m,g):this.domNode.removeAttribute(m):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,m,g)}}],[{key:"create",value:function(m){var g=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,m);return typeof m=="string"&&g.setAttribute("src",this.sanitize(m)),g}},{key:"formats",value:function(m){return T.reduce(function(g,w){return m.hasAttribute(w)&&(g[w]=m.getAttribute(w)),g},{})}},{key:"match",value:function(m){return/\.(jpe?g|gif|png)$/.test(m)||/^data:image\/.+;base64/.test(m)}},{key:"sanitize",value:function(m){return(0,u.sanitize)(m,["http","https","data"])?m:"//:0"}},{key:"value",value:function(m){return m.getAttribute("src")}}]),b})(l.default.Embed);_.blotName="image",_.tagName="IMG",r.default=_}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function v(b,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}return function(b,E,m){return E&&v(b.prototype,E),m&&v(b,m),b}})(),o=function v(b,E,m){b===null&&(b=Function.prototype);var g=Object.getOwnPropertyDescriptor(b,E);if(g===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:v(w,E,m)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(m)}},a=i(4),l=i(27),u=c(l);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function p(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var T=["height","width"],_=(function(v){p(b,v);function b(){return h(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"format",value:function(m,g){T.indexOf(m)>-1?g?this.domNode.setAttribute(m,g):this.domNode.removeAttribute(m):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,m,g)}}],[{key:"create",value:function(m){var g=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,m);return g.setAttribute("frameborder","0"),g.setAttribute("allowfullscreen",!0),g.setAttribute("src",this.sanitize(m)),g}},{key:"formats",value:function(m){return T.reduce(function(g,w){return m.hasAttribute(w)&&(g[w]=m.getAttribute(w)),g},{})}},{key:"sanitize",value:function(m){return u.default.sanitize(m)}},{key:"value",value:function(m){return m.getAttribute("src")}}]),b})(a.BlockEmbed);_.blotName="video",_.className="ql-video",_.tagName="IFRAME",r.default=_}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=(function(){function m(g,w){for(var x=0;x<w.length;x++){var R=w[x];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(g,R.key,R)}}return function(g,w,x){return w&&m(g.prototype,w),x&&m(g,x),g}})(),o=function m(g,w,x){g===null&&(g=Function.prototype);var R=Object.getOwnPropertyDescriptor(g,w);if(R===void 0){var A=Object.getPrototypeOf(g);return A===null?void 0:m(A,w,x)}else{if("value"in R)return R.value;var P=R.get;return P===void 0?void 0:P.call(x)}},a=i(35),l=p(a),u=i(5),c=p(u),h=i(9),d=p(h);function p(m){return m&&m.__esModule?m:{default:m}}function T(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function _(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function v(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var b=(function(m){v(g,m);function g(){return T(this,g),_(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,null,[{key:"create",value:function(x){var R=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,x);return typeof x=="string"&&(window.katex.render(x,R,{throwOnError:!1,errorColor:"#f00"}),R.setAttribute("data-value",x)),R}},{key:"value",value:function(x){return x.getAttribute("data-value")}}]),g})(l.default);b.blotName="formula",b.className="ql-formula",b.tagName="SPAN";var E=(function(m){v(g,m),s(g,null,[{key:"register",value:function(){c.default.register(b,!0)}}]);function g(){T(this,g);var w=_(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return w}return g})(d.default);r.FormulaBlot=b,r.default=E}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=(function(){function x(R,A){for(var P=0;P<A.length;P++){var O=A[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}return function(R,A,P){return A&&x(R.prototype,A),P&&x(R,P),R}})(),o=function x(R,A,P){R===null&&(R=Function.prototype);var O=Object.getOwnPropertyDescriptor(R,A);if(O===void 0){var y=Object.getPrototypeOf(R);return y===null?void 0:x(y,A,P)}else{if("value"in O)return O.value;var I=O.get;return I===void 0?void 0:I.call(P)}},a=i(0),l=_(a),u=i(5),c=_(u),h=i(9),d=_(h),p=i(13),T=_(p);function _(x){return x&&x.__esModule?x:{default:x}}function v(x,R){if(!(x instanceof R))throw new TypeError("Cannot call a class as a function")}function b(x,R){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:x}function E(x,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);x.prototype=Object.create(R&&R.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(x,R):x.__proto__=R)}var m=(function(x){E(R,x);function R(){return v(this,R),b(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return s(R,[{key:"replaceWith",value:function(P){this.domNode.textContent=this.domNode.textContent,this.attach(),o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replaceWith",this).call(this,P)}},{key:"highlight",value:function(P){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=P(O),this.domNode.normalize(),this.attach()),this.cachedText=O)}}]),R})(T.default);m.className="ql-syntax";var g=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),w=(function(x){E(R,x),s(R,null,[{key:"register",value:function(){c.default.register(g,!0),c.default.register(m,!0)}}]);function R(A,P){v(this,R);var O=b(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,A,P));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var y=null;return O.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(y),y=setTimeout(function(){O.highlight(),y=null},O.options.interval)}),O.highlight(),O}return s(R,[{key:"highlight",value:function(){var P=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(m).forEach(function(y){y.highlight(P.options.highlight)}),this.quill.update(c.default.sources.SILENT),O!=null&&this.quill.setSelection(O,c.default.sources.SILENT)}}}]),R})(d.default);w.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(x){var R=window.hljs.highlightAuto(x);return R.value}})(),interval:1e3},r.CodeBlock=m,r.CodeToken=g,r.default=w}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function R(A,P,O){A===null&&(A=Function.prototype);var y=Object.getOwnPropertyDescriptor(A,P);if(y===void 0){var I=Object.getPrototypeOf(A);return I===null?void 0:R(I,P,O)}else{if("value"in y)return y.value;var S=y.get;return S===void 0?void 0:S.call(O)}},o=(function(){function R(A,P){for(var O=0;O<P.length;O++){var y=P[O];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(A,y.key,y)}}return function(A,P,O){return P&&R(A.prototype,P),O&&R(A,O),A}})(),a=i(3),l=v(a),u=i(8),c=v(u),h=i(43),d=v(h),p=i(15),T=i(41),_=v(T);function v(R){return R&&R.__esModule?R:{default:R}}function b(R,A){if(!(R instanceof A))throw new TypeError("Cannot call a class as a function")}function E(R,A){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:R}function m(R,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);R.prototype=Object.create(A&&A.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(R,A):R.__proto__=A)}var g=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],w=(function(R){m(A,R);function A(P,O){b(this,A),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=g);var y=E(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,P,O));return y.quill.container.classList.add("ql-bubble"),y}return o(A,[{key:"extendToolbar",value:function(O){this.tooltip=new x(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),_.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),_.default)}}]),A})(d.default);w.DEFAULTS=(0,l.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var x=(function(R){m(A,R);function A(P,O){b(this,A);var y=E(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,P,O));return y.quill.on(c.default.events.EDITOR_CHANGE,function(I,S,D,B){if(I===c.default.events.SELECTION_CHANGE)if(S!=null&&S.length>0&&B===c.default.sources.USER){y.show(),y.root.style.left="0px",y.root.style.width="",y.root.style.width=y.root.offsetWidth+"px";var $=y.quill.getLines(S.index,S.length);if($.length===1)y.position(y.quill.getBounds(S));else{var W=$[$.length-1],ae=y.quill.getIndex(W),Z=Math.min(W.length()-1,S.index+S.length-ae),H=y.quill.getBounds(new p.Range(ae,Z));y.position(H)}}else document.activeElement!==y.textbox&&y.quill.hasFocus()&&y.hide()}),y}return o(A,[{key:"listen",value:function(){var O=this;s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var y=O.quill.getSelection();y!=null&&O.position(O.quill.getBounds(y))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(O){var y=s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"position",this).call(this,O),I=this.root.querySelector(".ql-tooltip-arrow");if(I.style.marginLeft="",y===0)return y;I.style.marginLeft=-1*y-I.offsetWidth/2+"px"}}]),A})(h.BaseTooltip);x.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=x,r.default=w}),(function(n,r,i){n.exports=i(63)})]).default})})(Ol)),Ol.exports}var LP=DP();const Ea=k_(LP);var Ic,wg;function MP(){if(wg)return Ic;wg=1;var t=-1,e=1,n=0;function r(m,g,w,x){if(m===g)return m?[[n,m]]:[];if(w!=null){var R=b(m,g,w);if(R)return R}var A=a(m,g),P=m.substring(0,A);m=m.substring(A),g=g.substring(A),A=l(m,g);var O=m.substring(m.length-A);m=m.substring(0,m.length-A),g=g.substring(0,g.length-A);var y=i(m,g);return P&&y.unshift([n,P]),O&&y.push([n,O]),c(y,x),y}function i(m,g){var w;if(!m)return[[e,g]];if(!g)return[[t,m]];var x=m.length>g.length?m:g,R=m.length>g.length?g:m,A=x.indexOf(R);if(A!==-1)return w=[[e,x.substring(0,A)],[n,R],[e,x.substring(A+R.length)]],m.length>g.length&&(w[0][0]=w[2][0]=t),w;if(R.length===1)return[[t,m],[e,g]];var P=u(m,g);if(P){var O=P[0],y=P[1],I=P[2],S=P[3],D=P[4],B=r(O,I),$=r(y,S);return B.concat([[n,D]],$)}return s(m,g)}function s(m,g){for(var w=m.length,x=g.length,R=Math.ceil((w+x)/2),A=R,P=2*R,O=new Array(P),y=new Array(P),I=0;I<P;I++)O[I]=-1,y[I]=-1;O[A+1]=0,y[A+1]=0;for(var S=w-x,D=S%2!==0,B=0,$=0,W=0,ae=0,Z=0;Z<R;Z++){for(var H=-Z+B;H<=Z-$;H+=2){var L=A+H,j;H===-Z||H!==Z&&O[L-1]<O[L+1]?j=O[L+1]:j=O[L-1]+1;for(var z=j-H;j<w&&z<x&&m.charAt(j)===g.charAt(z);)j++,z++;if(O[L]=j,j>w)$+=2;else if(z>x)B+=2;else if(D){var ne=A+S-H;if(ne>=0&&ne<P&&y[ne]!==-1){var G=w-y[ne];if(j>=G)return o(m,g,j,z)}}}for(var F=-Z+W;F<=Z-ae;F+=2){var ne=A+F,G;F===-Z||F!==Z&&y[ne-1]<y[ne+1]?G=y[ne+1]:G=y[ne-1]+1;for(var V=G-F;G<w&&V<x&&m.charAt(w-G-1)===g.charAt(x-V-1);)G++,V++;if(y[ne]=G,G>w)ae+=2;else if(V>x)W+=2;else if(!D){var L=A+S-F;if(L>=0&&L<P&&O[L]!==-1){var j=O[L],z=A+j-L;if(G=w-G,j>=G)return o(m,g,j,z)}}}}return[[t,m],[e,g]]}function o(m,g,w,x){var R=m.substring(0,w),A=g.substring(0,x),P=m.substring(w),O=g.substring(x),y=r(R,A),I=r(P,O);return y.concat(I)}function a(m,g){if(!m||!g||m.charAt(0)!==g.charAt(0))return 0;for(var w=0,x=Math.min(m.length,g.length),R=x,A=0;w<R;)m.substring(A,R)==g.substring(A,R)?(w=R,A=w):x=R,R=Math.floor((x-w)/2+w);return h(m.charCodeAt(R-1))&&R--,R}function l(m,g){if(!m||!g||m.slice(-1)!==g.slice(-1))return 0;for(var w=0,x=Math.min(m.length,g.length),R=x,A=0;w<R;)m.substring(m.length-R,m.length-A)==g.substring(g.length-R,g.length-A)?(w=R,A=w):x=R,R=Math.floor((x-w)/2+w);return d(m.charCodeAt(m.length-R))&&R--,R}function u(m,g){var w=m.length>g.length?m:g,x=m.length>g.length?g:m;if(w.length<4||x.length*2<w.length)return null;function R($,W,ae){for(var Z=$.substring(ae,ae+Math.floor($.length/4)),H=-1,L="",j,z,ne,G;(H=W.indexOf(Z,H+1))!==-1;){var F=a($.substring(ae),W.substring(H)),V=l($.substring(0,ae),W.substring(0,H));L.length<V+F&&(L=W.substring(H-V,H)+W.substring(H,H+F),j=$.substring(0,ae-V),z=$.substring(ae+F),ne=W.substring(0,H-V),G=W.substring(H+F))}return L.length*2>=$.length?[j,z,ne,G,L]:null}var A=R(w,x,Math.ceil(w.length/4)),P=R(w,x,Math.ceil(w.length/2)),O;if(!A&&!P)return null;P?A?O=A[4].length>P[4].length?A:P:O=P:O=A;var y,I,S,D;m.length>g.length?(y=O[0],I=O[1],S=O[2],D=O[3]):(S=O[0],D=O[1],y=O[2],I=O[3]);var B=O[4];return[y,I,S,D,B]}function c(m,g){m.push([n,""]);for(var w=0,x=0,R=0,A="",P="",O;w<m.length;){if(w<m.length-1&&!m[w][1]){m.splice(w,1);continue}switch(m[w][0]){case e:R++,P+=m[w][1],w++;break;case t:x++,A+=m[w][1],w++;break;case n:var y=w-R-x-1;if(g){if(y>=0&&T(m[y][1])){var I=m[y][1].slice(-1);if(m[y][1]=m[y][1].slice(0,-1),A=I+A,P=I+P,!m[y][1]){m.splice(y,1),w--;var S=y-1;m[S]&&m[S][0]===e&&(R++,P=m[S][1]+P,S--),m[S]&&m[S][0]===t&&(x++,A=m[S][1]+A,S--),y=S}}if(p(m[w][1])){var I=m[w][1].charAt(0);m[w][1]=m[w][1].slice(1),A+=I,P+=I}}if(w<m.length-1&&!m[w][1]){m.splice(w,1);break}if(A.length>0||P.length>0){A.length>0&&P.length>0&&(O=a(P,A),O!==0&&(y>=0?m[y][1]+=P.substring(0,O):(m.splice(0,0,[n,P.substring(0,O)]),w++),P=P.substring(O),A=A.substring(O)),O=l(P,A),O!==0&&(m[w][1]=P.substring(P.length-O)+m[w][1],P=P.substring(0,P.length-O),A=A.substring(0,A.length-O)));var D=R+x;A.length===0&&P.length===0?(m.splice(w-D,D),w=w-D):A.length===0?(m.splice(w-D,D,[e,P]),w=w-D+1):P.length===0?(m.splice(w-D,D,[t,A]),w=w-D+1):(m.splice(w-D,D,[t,A],[e,P]),w=w-D+2)}w!==0&&m[w-1][0]===n?(m[w-1][1]+=m[w][1],m.splice(w,1)):w++,R=0,x=0,A="",P="";break}}m[m.length-1][1]===""&&m.pop();var B=!1;for(w=1;w<m.length-1;)m[w-1][0]===n&&m[w+1][0]===n&&(m[w][1].substring(m[w][1].length-m[w-1][1].length)===m[w-1][1]?(m[w][1]=m[w-1][1]+m[w][1].substring(0,m[w][1].length-m[w-1][1].length),m[w+1][1]=m[w-1][1]+m[w+1][1],m.splice(w-1,1),B=!0):m[w][1].substring(0,m[w+1][1].length)==m[w+1][1]&&(m[w-1][1]+=m[w+1][1],m[w][1]=m[w][1].substring(m[w+1][1].length)+m[w+1][1],m.splice(w+1,1),B=!0)),w++;B&&c(m,g)}function h(m){return m>=55296&&m<=56319}function d(m){return m>=56320&&m<=57343}function p(m){return d(m.charCodeAt(0))}function T(m){return h(m.charCodeAt(m.length-1))}function _(m){for(var g=[],w=0;w<m.length;w++)m[w][1].length>0&&g.push(m[w]);return g}function v(m,g,w,x){return T(m)||p(x)?null:_([[n,m],[t,g],[e,w],[n,x]])}function b(m,g,w){var x=typeof w=="number"?{index:w,length:0}:w.oldRange,R=typeof w=="number"?null:w.newRange,A=m.length,P=g.length;if(x.length===0&&(R===null||R.length===0)){var O=x.index,y=m.slice(0,O),I=m.slice(O),S=R?R.index:null;e:{var D=O+P-A;if(S!==null&&S!==D||D<0||D>P)break e;var B=g.slice(0,D),$=g.slice(D);if($!==I)break e;var W=Math.min(O,D),ae=y.slice(0,W),Z=B.slice(0,W);if(ae!==Z)break e;var H=y.slice(W),L=B.slice(W);return v(ae,H,L,I)}e:{if(S!==null&&S!==O)break e;var j=O,B=g.slice(0,j),$=g.slice(j);if(B!==y)break e;var z=Math.min(A-j,P-j),ne=I.slice(I.length-z),G=$.slice($.length-z);if(ne!==G)break e;var H=I.slice(0,I.length-z),L=$.slice(0,$.length-z);return v(y,H,L,ne)}}if(x.length>0&&R&&R.length===0)e:{var ae=m.slice(0,x.index),ne=m.slice(x.index+x.length),W=ae.length,z=ne.length;if(P<W+z)break e;var Z=g.slice(0,W),G=g.slice(P-z);if(ae!==Z||ne!==G)break e;var H=m.slice(W,A-z),L=g.slice(W,P-z);return v(ae,H,L,ne)}return null}function E(m,g,w){return r(m,g,w,!0)}return E.INSERT=e,E.DELETE=t,E.EQUAL=n,Ic=E,Ic}var sa={exports:{}};sa.exports;var Ag;function N_(){return Ag||(Ag=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",h="[object GeneratorFunction]",d="[object Map]",p="[object Number]",T="[object Object]",_="[object Promise]",v="[object RegExp]",b="[object Set]",E="[object String]",m="[object Symbol]",g="[object WeakMap]",w="[object ArrayBuffer]",x="[object DataView]",R="[object Float32Array]",A="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",y="[object Int32Array]",I="[object Uint8Array]",S="[object Uint8ClampedArray]",D="[object Uint16Array]",B="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,W=/\w*$/,ae=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,H={};H[s]=H[o]=H[w]=H[x]=H[a]=H[l]=H[R]=H[A]=H[P]=H[O]=H[y]=H[d]=H[p]=H[T]=H[v]=H[b]=H[E]=H[m]=H[I]=H[S]=H[D]=H[B]=!0,H[u]=H[c]=H[g]=!1;var L=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi,j=typeof self=="object"&&self&&self.Object===Object&&self,z=L||j||Function("return this")(),ne=e&&!e.nodeType&&e,G=ne&&!0&&t&&!t.nodeType&&t,F=G&&G.exports===ne;function V(k,M){return k.set(M[0],M[1]),k}function Y(k,M){return k.add(M),k}function X(k,M){for(var Q=-1,de=k?k.length:0;++Q<de&&M(k[Q],Q,k)!==!1;);return k}function se(k,M){for(var Q=-1,de=M.length,xe=k.length;++Q<de;)k[xe+Q]=M[Q];return k}function ye(k,M,Q,de){for(var xe=-1,Ae=k?k.length:0;++xe<Ae;)Q=M(Q,k[xe],xe,k);return Q}function q(k,M){for(var Q=-1,de=Array(k);++Q<k;)de[Q]=M(Q);return de}function K(k,M){return k?.[M]}function ee(k){var M=!1;if(k!=null&&typeof k.toString!="function")try{M=!!(k+"")}catch{}return M}function ue(k){var M=-1,Q=Array(k.size);return k.forEach(function(de,xe){Q[++M]=[xe,de]}),Q}function he(k,M){return function(Q){return k(M(Q))}}function ce(k){var M=-1,Q=Array(k.size);return k.forEach(function(de){Q[++M]=de}),Q}var te=Array.prototype,J=Function.prototype,re=Object.prototype,ie=z["__core-js_shared__"],le=(function(){var k=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""})(),ge=J.toString,_e=re.hasOwnProperty,be=re.toString,Se=RegExp("^"+ge.call(_e).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=F?z.Buffer:void 0,we=z.Symbol,ut=z.Uint8Array,Oe=he(Object.getPrototypeOf,Object),tt=Object.create,Nt=re.propertyIsEnumerable,Zt=te.splice,In=Object.getOwnPropertySymbols,ct=Ne?Ne.isBuffer:void 0,ft=he(Object.keys,Object),Sn=Ut(z,"DataView"),en=Ut(z,"Map"),ln=Ut(z,"Promise"),Rn=Ut(z,"Set"),oi=Ut(z,"WeakMap"),ht=Ut(Object,"create"),ai=jt(Sn),pn=jt(en),Fn=jt(ln),$i=jt(Rn),Gi=jt(oi),tn=we?we.prototype:void 0,xs=tn?tn.valueOf:void 0;function jn(k){var M=-1,Q=k?k.length:0;for(this.clear();++M<Q;){var de=k[M];this.set(de[0],de[1])}}function li(){this.__data__=ht?ht(null):{}}function Ds(k){return this.has(k)&&delete this.__data__[k]}function Ls(k){var M=this.__data__;if(ht){var Q=M[k];return Q===r?void 0:Q}return _e.call(M,k)?M[k]:void 0}function ui(k){var M=this.__data__;return ht?M[k]!==void 0:_e.call(M,k)}function Bn(k,M){var Q=this.__data__;return Q[k]=ht&&M===void 0?r:M,this}jn.prototype.clear=li,jn.prototype.delete=Ds,jn.prototype.get=Ls,jn.prototype.has=ui,jn.prototype.set=Bn;function St(k){var M=-1,Q=k?k.length:0;for(this.clear();++M<Q;){var de=k[M];this.set(de[0],de[1])}}function On(){this.__data__=[]}function Ms(k){var M=this.__data__,Q=nr(M,k);if(Q<0)return!1;var de=M.length-1;return Q==de?M.pop():Zt.call(M,Q,1),!0}function Vs(k){var M=this.__data__,Q=nr(M,k);return Q<0?void 0:M[Q][1]}function Wi(k){return nr(this.__data__,k)>-1}function Qi(k,M){var Q=this.__data__,de=nr(Q,k);return de<0?Q.push([k,M]):Q[de][1]=M,this}St.prototype.clear=On,St.prototype.delete=Ms,St.prototype.get=Vs,St.prototype.has=Wi,St.prototype.set=Qi;function Rt(k){var M=-1,Q=k?k.length:0;for(this.clear();++M<Q;){var de=k[M];this.set(de[0],de[1])}}function Uo(){this.__data__={hash:new jn,map:new(en||St),string:new jn}}function Us(k){return xr(this,k).delete(k)}function Fo(k){return xr(this,k).get(k)}function ci(k){return xr(this,k).has(k)}function Fs(k,M){return xr(this,k).set(k,M),this}Rt.prototype.clear=Uo,Rt.prototype.delete=Us,Rt.prototype.get=Fo,Rt.prototype.has=ci,Rt.prototype.set=Fs;function xt(k){this.__data__=new St(k)}function Or(){this.__data__=new St}function qn(k){return this.__data__.delete(k)}function Yi(k){return this.__data__.get(k)}function jo(k){return this.__data__.has(k)}function js(k,M){var Q=this.__data__;if(Q instanceof St){var de=Q.__data__;if(!en||de.length<n-1)return de.push([k,M]),this;Q=this.__data__=new Rt(de)}return Q.set(k,M),this}xt.prototype.clear=Or,xt.prototype.delete=qn,xt.prototype.get=Yi,xt.prototype.has=jo,xt.prototype.set=js;function Pr(k,M){var Q=sr(k)||ir(k)?q(k.length,String):[],de=Q.length,xe=!!de;for(var Ae in k)_e.call(k,Ae)&&!(xe&&(Ae=="length"||$s(Ae,de)))&&Q.push(Ae);return Q}function Xi(k,M,Q){var de=k[M];(!(_e.call(k,M)&&Ws(de,Q))||Q===void 0&&!(M in k))&&(k[M]=Q)}function nr(k,M){for(var Q=k.length;Q--;)if(Ws(k[Q][0],M))return Q;return-1}function un(k,M){return k&&Ji(M,Zi(M),k)}function fi(k,M,Q,de,xe,Ae,Ke){var je;if(de&&(je=Ae?de(k,xe,Ae,Ke):de(k)),je!==void 0)return je;if(!Ge(k))return k;var ot=sr(k);if(ot){if(je=zs(k),!M)return Hs(k,je)}else{var We=kn(k),yt=We==c||We==h;if(or(k))return Cn(k,M);if(We==T||We==s||yt&&!Ae){if(ee(k))return Ae?k:{};if(je=gn(yt?{}:k),!M)return Ho(k,un(je,k))}else{if(!H[We])return Ae?k:{};je=Ks(k,We,fi,M)}}Ke||(Ke=new xt);var zt=Ke.get(k);if(zt)return zt;if(Ke.set(k,je),!ot)var pt=Q?zo(k):Zi(k);return X(pt||k,function(gt,Et){pt&&(Et=gt,gt=k[Et]),Xi(je,Et,fi(gt,M,Q,de,Et,k,Ke))}),je}function Bs(k){return Ge(k)?tt(k):{}}function qs(k,M,Q){var de=M(k);return sr(k)?de:se(de,Q(k))}function Bo(k){return be.call(k)}function Pn(k){if(!Ge(k)||Ko(k))return!1;var M=hi(k)||ee(k)?Se:ae;return M.test(jt(k))}function cn(k){if(!Gs(k))return ft(k);var M=[];for(var Q in Object(k))_e.call(k,Q)&&Q!="constructor"&&M.push(Q);return M}function Cn(k,M){if(M)return k.slice();var Q=new k.constructor(k.length);return k.copy(Q),Q}function Hn(k){var M=new k.constructor(k.byteLength);return new ut(M).set(new ut(k)),M}function zn(k,M){var Q=M?Hn(k.buffer):k.buffer;return new k.constructor(Q,k.byteOffset,k.byteLength)}function Ye(k,M,Q){var de=M?Q(ue(k),!0):ue(k);return ye(de,V,new k.constructor)}function Cr(k){var M=new k.constructor(k.source,W.exec(k));return M.lastIndex=k.lastIndex,M}function kr(k,M,Q){var de=M?Q(ce(k),!0):ce(k);return ye(de,Y,new k.constructor)}function Nr(k){return xs?Object(xs.call(k)):{}}function qo(k,M){var Q=M?Hn(k.buffer):k.buffer;return new k.constructor(Q,k.byteOffset,k.length)}function Hs(k,M){var Q=-1,de=k.length;for(M||(M=Array(de));++Q<de;)M[Q]=k[Q];return M}function Ji(k,M,Q,de){Q||(Q={});for(var xe=-1,Ae=M.length;++xe<Ae;){var Ke=M[xe],je=void 0;Xi(Q,Ke,je===void 0?k[Ke]:je)}return Q}function Ho(k,M){return Ji(k,Ft(k),M)}function zo(k){return qs(k,Zi,Ft)}function xr(k,M){var Q=k.__data__;return rr(M)?Q[typeof M=="string"?"string":"hash"]:Q.map}function Ut(k,M){var Q=K(k,M);return Pn(Q)?Q:void 0}var Ft=In?he(In,Object):Ys,kn=Bo;(Sn&&kn(new Sn(new ArrayBuffer(1)))!=x||en&&kn(new en)!=d||ln&&kn(ln.resolve())!=_||Rn&&kn(new Rn)!=b||oi&&kn(new oi)!=g)&&(kn=function(k){var M=be.call(k),Q=M==T?k.constructor:void 0,de=Q?jt(Q):void 0;if(de)switch(de){case ai:return x;case pn:return d;case Fn:return _;case $i:return b;case Gi:return g}return M});function zs(k){var M=k.length,Q=k.constructor(M);return M&&typeof k[0]=="string"&&_e.call(k,"index")&&(Q.index=k.index,Q.input=k.input),Q}function gn(k){return typeof k.constructor=="function"&&!Gs(k)?Bs(Oe(k)):{}}function Ks(k,M,Q,de){var xe=k.constructor;switch(M){case w:return Hn(k);case a:case l:return new xe(+k);case x:return zn(k,de);case R:case A:case P:case O:case y:case I:case S:case D:case B:return qo(k,de);case d:return Ye(k,de,Q);case p:case E:return new xe(k);case v:return Cr(k);case b:return kr(k,de,Q);case m:return Nr(k)}}function $s(k,M){return M=M??i,!!M&&(typeof k=="number"||Z.test(k))&&k>-1&&k%1==0&&k<M}function rr(k){var M=typeof k;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?k!=="__proto__":k===null}function Ko(k){return!!le&&le in k}function Gs(k){var M=k&&k.constructor,Q=typeof M=="function"&&M.prototype||re;return k===Q}function jt(k){if(k!=null){try{return ge.call(k)}catch{}try{return k+""}catch{}}return""}function mn(k){return fi(k,!0,!0)}function Ws(k,M){return k===M||k!==k&&M!==M}function ir(k){return Lr(k)&&_e.call(k,"callee")&&(!Nt.call(k,"callee")||be.call(k)==s)}var sr=Array.isArray;function Dr(k){return k!=null&&di(k.length)&&!hi(k)}function Lr(k){return Qs(k)&&Dr(k)}var or=ct||Xs;function hi(k){var M=Ge(k)?be.call(k):"";return M==c||M==h}function di(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=i}function Ge(k){var M=typeof k;return!!k&&(M=="object"||M=="function")}function Qs(k){return!!k&&typeof k=="object"}function Zi(k){return Dr(k)?Pr(k):cn(k)}function Ys(){return[]}function Xs(){return!1}t.exports=mn})(sa,sa.exports)),sa.exports}var oa={exports:{}};oa.exports;var Ig;function x_(){return Ig||(Ig=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",T="[object GeneratorFunction]",_="[object Map]",v="[object Number]",b="[object Null]",E="[object Object]",m="[object Promise]",g="[object Proxy]",w="[object RegExp]",x="[object Set]",R="[object String]",A="[object Symbol]",P="[object Undefined]",O="[object WeakMap]",y="[object ArrayBuffer]",I="[object DataView]",S="[object Float32Array]",D="[object Float64Array]",B="[object Int8Array]",$="[object Int16Array]",W="[object Int32Array]",ae="[object Uint8Array]",Z="[object Uint8ClampedArray]",H="[object Uint16Array]",L="[object Uint32Array]",j=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,G={};G[S]=G[D]=G[B]=G[$]=G[W]=G[ae]=G[Z]=G[H]=G[L]=!0,G[a]=G[l]=G[y]=G[c]=G[I]=G[h]=G[d]=G[p]=G[_]=G[v]=G[E]=G[w]=G[x]=G[R]=G[O]=!1;var F=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi,V=typeof self=="object"&&self&&self.Object===Object&&self,Y=F||V||Function("return this")(),X=e&&!e.nodeType&&e,se=X&&!0&&t&&!t.nodeType&&t,ye=se&&se.exports===X,q=ye&&F.process,K=(function(){try{return q&&q.binding&&q.binding("util")}catch{}})(),ee=K&&K.isTypedArray;function ue(k,M){for(var Q=-1,de=k==null?0:k.length,xe=0,Ae=[];++Q<de;){var Ke=k[Q];M(Ke,Q,k)&&(Ae[xe++]=Ke)}return Ae}function he(k,M){for(var Q=-1,de=M.length,xe=k.length;++Q<de;)k[xe+Q]=M[Q];return k}function ce(k,M){for(var Q=-1,de=k==null?0:k.length;++Q<de;)if(M(k[Q],Q,k))return!0;return!1}function te(k,M){for(var Q=-1,de=Array(k);++Q<k;)de[Q]=M(Q);return de}function J(k){return function(M){return k(M)}}function re(k,M){return k.has(M)}function ie(k,M){return k?.[M]}function le(k){var M=-1,Q=Array(k.size);return k.forEach(function(de,xe){Q[++M]=[xe,de]}),Q}function ge(k,M){return function(Q){return k(M(Q))}}function _e(k){var M=-1,Q=Array(k.size);return k.forEach(function(de){Q[++M]=de}),Q}var be=Array.prototype,Se=Function.prototype,Ne=Object.prototype,we=Y["__core-js_shared__"],ut=Se.toString,Oe=Ne.hasOwnProperty,tt=(function(){var k=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""})(),Nt=Ne.toString,Zt=RegExp("^"+ut.call(Oe).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),In=ye?Y.Buffer:void 0,ct=Y.Symbol,ft=Y.Uint8Array,Sn=Ne.propertyIsEnumerable,en=be.splice,ln=ct?ct.toStringTag:void 0,Rn=Object.getOwnPropertySymbols,oi=In?In.isBuffer:void 0,ht=ge(Object.keys,Object),ai=Ft(Y,"DataView"),pn=Ft(Y,"Map"),Fn=Ft(Y,"Promise"),$i=Ft(Y,"Set"),Gi=Ft(Y,"WeakMap"),tn=Ft(Object,"create"),xs=jt(ai),jn=jt(pn),li=jt(Fn),Ds=jt($i),Ls=jt(Gi),ui=ct?ct.prototype:void 0,Bn=ui?ui.valueOf:void 0;function St(k){var M=-1,Q=k==null?0:k.length;for(this.clear();++M<Q;){var de=k[M];this.set(de[0],de[1])}}function On(){this.__data__=tn?tn(null):{},this.size=0}function Ms(k){var M=this.has(k)&&delete this.__data__[k];return this.size-=M?1:0,M}function Vs(k){var M=this.__data__;if(tn){var Q=M[k];return Q===r?void 0:Q}return Oe.call(M,k)?M[k]:void 0}function Wi(k){var M=this.__data__;return tn?M[k]!==void 0:Oe.call(M,k)}function Qi(k,M){var Q=this.__data__;return this.size+=this.has(k)?0:1,Q[k]=tn&&M===void 0?r:M,this}St.prototype.clear=On,St.prototype.delete=Ms,St.prototype.get=Vs,St.prototype.has=Wi,St.prototype.set=Qi;function Rt(k){var M=-1,Q=k==null?0:k.length;for(this.clear();++M<Q;){var de=k[M];this.set(de[0],de[1])}}function Uo(){this.__data__=[],this.size=0}function Us(k){var M=this.__data__,Q=Cn(M,k);if(Q<0)return!1;var de=M.length-1;return Q==de?M.pop():en.call(M,Q,1),--this.size,!0}function Fo(k){var M=this.__data__,Q=Cn(M,k);return Q<0?void 0:M[Q][1]}function ci(k){return Cn(this.__data__,k)>-1}function Fs(k,M){var Q=this.__data__,de=Cn(Q,k);return de<0?(++this.size,Q.push([k,M])):Q[de][1]=M,this}Rt.prototype.clear=Uo,Rt.prototype.delete=Us,Rt.prototype.get=Fo,Rt.prototype.has=ci,Rt.prototype.set=Fs;function xt(k){var M=-1,Q=k==null?0:k.length;for(this.clear();++M<Q;){var de=k[M];this.set(de[0],de[1])}}function Or(){this.size=0,this.__data__={hash:new St,map:new(pn||Rt),string:new St}}function qn(k){var M=Ut(this,k).delete(k);return this.size-=M?1:0,M}function Yi(k){return Ut(this,k).get(k)}function jo(k){return Ut(this,k).has(k)}function js(k,M){var Q=Ut(this,k),de=Q.size;return Q.set(k,M),this.size+=Q.size==de?0:1,this}xt.prototype.clear=Or,xt.prototype.delete=qn,xt.prototype.get=Yi,xt.prototype.has=jo,xt.prototype.set=js;function Pr(k){var M=-1,Q=k==null?0:k.length;for(this.__data__=new xt;++M<Q;)this.add(k[M])}function Xi(k){return this.__data__.set(k,r),this}function nr(k){return this.__data__.has(k)}Pr.prototype.add=Pr.prototype.push=Xi,Pr.prototype.has=nr;function un(k){var M=this.__data__=new Rt(k);this.size=M.size}function fi(){this.__data__=new Rt,this.size=0}function Bs(k){var M=this.__data__,Q=M.delete(k);return this.size=M.size,Q}function qs(k){return this.__data__.get(k)}function Bo(k){return this.__data__.has(k)}function Pn(k,M){var Q=this.__data__;if(Q instanceof Rt){var de=Q.__data__;if(!pn||de.length<n-1)return de.push([k,M]),this.size=++Q.size,this;Q=this.__data__=new xt(de)}return Q.set(k,M),this.size=Q.size,this}un.prototype.clear=fi,un.prototype.delete=Bs,un.prototype.get=qs,un.prototype.has=Bo,un.prototype.set=Pn;function cn(k,M){var Q=ir(k),de=!Q&&Ws(k),xe=!Q&&!de&&Dr(k),Ae=!Q&&!de&&!xe&&Qs(k),Ke=Q||de||xe||Ae,je=Ke?te(k.length,String):[],ot=je.length;for(var We in k)Oe.call(k,We)&&!(Ke&&(We=="length"||xe&&(We=="offset"||We=="parent")||Ae&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Ks(We,ot)))&&je.push(We);return je}function Cn(k,M){for(var Q=k.length;Q--;)if(mn(k[Q][0],M))return Q;return-1}function Hn(k,M,Q){var de=M(k);return ir(k)?de:he(de,Q(k))}function zn(k){return k==null?k===void 0?P:b:ln&&ln in Object(k)?kn(k):Gs(k)}function Ye(k){return Ge(k)&&zn(k)==a}function Cr(k,M,Q,de,xe){return k===M?!0:k==null||M==null||!Ge(k)&&!Ge(M)?k!==k&&M!==M:kr(k,M,Q,de,Cr,xe)}function kr(k,M,Q,de,xe,Ae){var Ke=ir(k),je=ir(M),ot=Ke?l:gn(k),We=je?l:gn(M);ot=ot==a?E:ot,We=We==a?E:We;var yt=ot==E,zt=We==E,pt=ot==We;if(pt&&Dr(k)){if(!Dr(M))return!1;Ke=!0,yt=!1}if(pt&&!yt)return Ae||(Ae=new un),Ke||Qs(k)?Ji(k,M,Q,de,xe,Ae):Ho(k,M,ot,Q,de,xe,Ae);if(!(Q&i)){var gt=yt&&Oe.call(k,"__wrapped__"),Et=zt&&Oe.call(M,"__wrapped__");if(gt||Et){var Kn=gt?k.value():k,yn=Et?M.value():M;return Ae||(Ae=new un),xe(Kn,yn,Q,de,Ae)}}return pt?(Ae||(Ae=new un),zo(k,M,Q,de,xe,Ae)):!1}function Nr(k){if(!di(k)||rr(k))return!1;var M=or(k)?Zt:z;return M.test(jt(k))}function qo(k){return Ge(k)&&hi(k.length)&&!!G[zn(k)]}function Hs(k){if(!Ko(k))return ht(k);var M=[];for(var Q in Object(k))Oe.call(k,Q)&&Q!="constructor"&&M.push(Q);return M}function Ji(k,M,Q,de,xe,Ae){var Ke=Q&i,je=k.length,ot=M.length;if(je!=ot&&!(Ke&&ot>je))return!1;var We=Ae.get(k);if(We&&Ae.get(M))return We==M;var yt=-1,zt=!0,pt=Q&s?new Pr:void 0;for(Ae.set(k,M),Ae.set(M,k);++yt<je;){var gt=k[yt],Et=M[yt];if(de)var Kn=Ke?de(Et,gt,yt,M,k,Ae):de(gt,Et,yt,k,M,Ae);if(Kn!==void 0){if(Kn)continue;zt=!1;break}if(pt){if(!ce(M,function(yn,$n){if(!re(pt,$n)&&(gt===yn||xe(gt,yn,Q,de,Ae)))return pt.push($n)})){zt=!1;break}}else if(!(gt===Et||xe(gt,Et,Q,de,Ae))){zt=!1;break}}return Ae.delete(k),Ae.delete(M),zt}function Ho(k,M,Q,de,xe,Ae,Ke){switch(Q){case I:if(k.byteLength!=M.byteLength||k.byteOffset!=M.byteOffset)return!1;k=k.buffer,M=M.buffer;case y:return!(k.byteLength!=M.byteLength||!Ae(new ft(k),new ft(M)));case c:case h:case v:return mn(+k,+M);case d:return k.name==M.name&&k.message==M.message;case w:case R:return k==M+"";case _:var je=le;case x:var ot=de&i;if(je||(je=_e),k.size!=M.size&&!ot)return!1;var We=Ke.get(k);if(We)return We==M;de|=s,Ke.set(k,M);var yt=Ji(je(k),je(M),de,xe,Ae,Ke);return Ke.delete(k),yt;case A:if(Bn)return Bn.call(k)==Bn.call(M)}return!1}function zo(k,M,Q,de,xe,Ae){var Ke=Q&i,je=xr(k),ot=je.length,We=xr(M),yt=We.length;if(ot!=yt&&!Ke)return!1;for(var zt=ot;zt--;){var pt=je[zt];if(!(Ke?pt in M:Oe.call(M,pt)))return!1}var gt=Ae.get(k);if(gt&&Ae.get(M))return gt==M;var Et=!0;Ae.set(k,M),Ae.set(M,k);for(var Kn=Ke;++zt<ot;){pt=je[zt];var yn=k[pt],$n=M[pt];if(de)var $o=Ke?de($n,yn,pt,M,k,Ae):de(yn,$n,pt,k,M,Ae);if(!($o===void 0?yn===$n||xe(yn,$n,Q,de,Ae):$o)){Et=!1;break}Kn||(Kn=pt=="constructor")}if(Et&&!Kn){var Mr=k.constructor,es=M.constructor;Mr!=es&&"constructor"in k&&"constructor"in M&&!(typeof Mr=="function"&&Mr instanceof Mr&&typeof es=="function"&&es instanceof es)&&(Et=!1)}return Ae.delete(k),Ae.delete(M),Et}function xr(k){return Hn(k,Zi,zs)}function Ut(k,M){var Q=k.__data__;return $s(M)?Q[typeof M=="string"?"string":"hash"]:Q.map}function Ft(k,M){var Q=ie(k,M);return Nr(Q)?Q:void 0}function kn(k){var M=Oe.call(k,ln),Q=k[ln];try{k[ln]=void 0;var de=!0}catch{}var xe=Nt.call(k);return de&&(M?k[ln]=Q:delete k[ln]),xe}var zs=Rn?function(k){return k==null?[]:(k=Object(k),ue(Rn(k),function(M){return Sn.call(k,M)}))}:Ys,gn=zn;(ai&&gn(new ai(new ArrayBuffer(1)))!=I||pn&&gn(new pn)!=_||Fn&&gn(Fn.resolve())!=m||$i&&gn(new $i)!=x||Gi&&gn(new Gi)!=O)&&(gn=function(k){var M=zn(k),Q=M==E?k.constructor:void 0,de=Q?jt(Q):"";if(de)switch(de){case xs:return I;case jn:return _;case li:return m;case Ds:return x;case Ls:return O}return M});function Ks(k,M){return M=M??o,!!M&&(typeof k=="number"||ne.test(k))&&k>-1&&k%1==0&&k<M}function $s(k){var M=typeof k;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?k!=="__proto__":k===null}function rr(k){return!!tt&&tt in k}function Ko(k){var M=k&&k.constructor,Q=typeof M=="function"&&M.prototype||Ne;return k===Q}function Gs(k){return Nt.call(k)}function jt(k){if(k!=null){try{return ut.call(k)}catch{}try{return k+""}catch{}}return""}function mn(k,M){return k===M||k!==k&&M!==M}var Ws=Ye((function(){return arguments})())?Ye:function(k){return Ge(k)&&Oe.call(k,"callee")&&!Sn.call(k,"callee")},ir=Array.isArray;function sr(k){return k!=null&&hi(k.length)&&!or(k)}var Dr=oi||Xs;function Lr(k,M){return Cr(k,M)}function or(k){if(!di(k))return!1;var M=zn(k);return M==p||M==T||M==u||M==g}function hi(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=o}function di(k){var M=typeof k;return k!=null&&(M=="object"||M=="function")}function Ge(k){return k!=null&&typeof k=="object"}var Qs=ee?J(ee):qo;function Zi(k){return sr(k)?cn(k):Hs(k)}function Ys(){return[]}function Xs(){return!1}t.exports=Lr})(oa,oa.exports)),oa.exports}var eo={},Sg;function VP(){if(Sg)return eo;Sg=1;var t=eo&&eo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(eo,"__esModule",{value:!0});var e=t(N_()),n=t(x_()),r;return(function(i){function s(u,c,h){u===void 0&&(u={}),c===void 0&&(c={}),typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var d=e.default(c);h||(d=Object.keys(d).reduce(function(T,_){return d[_]!=null&&(T[_]=d[_]),T},{}));for(var p in u)u[p]!==void 0&&c[p]===void 0&&(d[p]=u[p]);return Object.keys(d).length>0?d:void 0}i.compose=s;function o(u,c){u===void 0&&(u={}),c===void 0&&(c={}),typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var h=Object.keys(u).concat(Object.keys(c)).reduce(function(d,p){return n.default(u[p],c[p])||(d[p]=c[p]===void 0?null:c[p]),d},{});return Object.keys(h).length>0?h:void 0}i.diff=o;function a(u,c){u===void 0&&(u={}),c===void 0&&(c={}),u=u||{};var h=Object.keys(c).reduce(function(d,p){return c[p]!==u[p]&&u[p]!==void 0&&(d[p]=c[p]),d},{});return Object.keys(u).reduce(function(d,p){return u[p]!==c[p]&&c[p]===void 0&&(d[p]=null),d},h)}i.invert=a;function l(u,c,h){if(h===void 0&&(h=!1),typeof u!="object")return c;if(typeof c=="object"){if(!h)return c;var d=Object.keys(c).reduce(function(p,T){return u[T]===void 0&&(p[T]=c[T]),p},{});return Object.keys(d).length>0?d:void 0}}i.transform=l})(r||(r={})),eo.default=r,eo}var to={},no={},Rg;function UP(){if(Rg)return no;Rg=1;var t=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});var e=t(D_()),n=(function(){function r(i){this.ops=i,this.index=0,this.offset=0}return r.prototype.hasNext=function(){return this.peekLength()<1/0},r.prototype.next=function(i){i||(i=1/0);var s=this.ops[this.index];if(s){var o=this.offset,a=e.default.length(s);if(i>=a-o?(i=a-o,this.index+=1,this.offset=0):this.offset+=i,typeof s.delete=="number")return{delete:i};var l={};return s.attributes&&(l.attributes=s.attributes),typeof s.retain=="number"?l.retain=i:typeof s.insert=="string"?l.insert=s.insert.substr(o,i):l.insert=s.insert,l}else return{retain:1/0}},r.prototype.peek=function(){return this.ops[this.index]},r.prototype.peekLength=function(){return this.ops[this.index]?e.default.length(this.ops[this.index])-this.offset:1/0},r.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},r.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var i=this.offset,s=this.index,o=this.next(),a=this.ops.slice(this.index);return this.offset=i,this.index=s,[o].concat(a)}else return[]},r})();return no.default=n,no}var Og;function D_(){if(Og)return to;Og=1;var t=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});var e=t(UP()),n;return(function(r){function i(o){return new e.default(o)}r.iterator=i;function s(o){return typeof o.delete=="number"?o.delete:typeof o.retain=="number"?o.retain:typeof o.insert=="string"?o.insert.length:1}r.length=s})(n||(n={})),to.default=n,to}var Xo,Pg;function FP(){if(Pg)return Xo;Pg=1;var t=Xo&&Xo.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},e=t(MP()),n=t(N_()),r=t(x_()),i=t(VP()),s=t(D_()),o="\0",a=(function(){function l(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]}return l.prototype.insert=function(u,c){var h={};return typeof u=="string"&&u.length===0?this:(h.insert=u,c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(h.attributes=c),this.push(h))},l.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},l.prototype.retain=function(u,c){if(u<=0)return this;var h={retain:u};return c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(h.attributes=c),this.push(h)},l.prototype.push=function(u){var c=this.ops.length,h=this.ops[c-1];if(u=n.default(u),typeof h=="object"){if(typeof u.delete=="number"&&typeof h.delete=="number")return this.ops[c-1]={delete:h.delete+u.delete},this;if(typeof h.delete=="number"&&u.insert!=null&&(c-=1,h=this.ops[c-1],typeof h!="object"))return this.ops.unshift(u),this;if(r.default(u.attributes,h.attributes)){if(typeof u.insert=="string"&&typeof h.insert=="string")return this.ops[c-1]={insert:h.insert+u.insert},typeof u.attributes=="object"&&(this.ops[c-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof h.retain=="number")return this.ops[c-1]={retain:h.retain+u.retain},typeof u.attributes=="object"&&(this.ops[c-1].attributes=u.attributes),this}}return c===this.ops.length?this.ops.push(u):this.ops.splice(c,0,u),this},l.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},l.prototype.filter=function(u){return this.ops.filter(u)},l.prototype.forEach=function(u){this.ops.forEach(u)},l.prototype.map=function(u){return this.ops.map(u)},l.prototype.partition=function(u){var c=[],h=[];return this.forEach(function(d){var p=u(d)?c:h;p.push(d)}),[c,h]},l.prototype.reduce=function(u,c){return this.ops.reduce(u,c)},l.prototype.changeLength=function(){return this.reduce(function(u,c){return c.insert?u+s.default.length(c):c.delete?u-c.delete:u},0)},l.prototype.length=function(){return this.reduce(function(u,c){return u+s.default.length(c)},0)},l.prototype.slice=function(u,c){u===void 0&&(u=0),c===void 0&&(c=1/0);for(var h=[],d=s.default.iterator(this.ops),p=0;p<c&&d.hasNext();){var T=void 0;p<u?T=d.next(u-p):(T=d.next(c-p),h.push(T)),p+=s.default.length(T)}return new l(h)},l.prototype.compose=function(u){var c=s.default.iterator(this.ops),h=s.default.iterator(u.ops),d=[],p=h.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){for(var T=p.retain;c.peekType()==="insert"&&c.peekLength()<=T;)T-=c.peekLength(),d.push(c.next());p.retain-T>0&&h.next(p.retain-T)}for(var _=new l(d);c.hasNext()||h.hasNext();)if(h.peekType()==="insert")_.push(h.next());else if(c.peekType()==="delete")_.push(c.next());else{var v=Math.min(c.peekLength(),h.peekLength()),b=c.next(v),E=h.next(v);if(typeof E.retain=="number"){var m={};typeof b.retain=="number"?m.retain=v:m.insert=b.insert;var g=i.default.compose(b.attributes,E.attributes,typeof b.retain=="number");if(g&&(m.attributes=g),_.push(m),!h.hasNext()&&r.default(_.ops[_.ops.length-1],m)){var w=new l(c.rest());return _.concat(w).chop()}}else typeof E.delete=="number"&&typeof b.retain=="number"&&_.push(E)}return _.chop()},l.prototype.concat=function(u){var c=new l(this.ops.slice());return u.ops.length>0&&(c.push(u.ops[0]),c.ops=c.ops.concat(u.ops.slice(1))),c},l.prototype.diff=function(u,c){if(this.ops===u.ops)return new l;var h=[this,u].map(function(v){return v.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:o;var E=v===u?"on":"with";throw new Error("diff() called "+E+" non-document")}).join("")}),d=new l,p=e.default(h[0],h[1],c),T=s.default.iterator(this.ops),_=s.default.iterator(u.ops);return p.forEach(function(v){for(var b=v[1].length;b>0;){var E=0;switch(v[0]){case e.default.INSERT:E=Math.min(_.peekLength(),b),d.push(_.next(E));break;case e.default.DELETE:E=Math.min(b,T.peekLength()),T.next(E),d.delete(E);break;case e.default.EQUAL:E=Math.min(T.peekLength(),_.peekLength(),b);var m=T.next(E),g=_.next(E);r.default(m.insert,g.insert)?d.retain(E,i.default.diff(m.attributes,g.attributes)):d.push(g).delete(E);break}b-=E}}),d.chop()},l.prototype.eachLine=function(u,c){c===void 0&&(c=`
`);for(var h=s.default.iterator(this.ops),d=new l,p=0;h.hasNext();){if(h.peekType()!=="insert")return;var T=h.peek(),_=s.default.length(T)-h.peekLength(),v=typeof T.insert=="string"?T.insert.indexOf(c,_)-_:-1;if(v<0)d.push(h.next());else if(v>0)d.push(h.next(v));else{if(u(d,h.next(1).attributes||{},p)===!1)return;p+=1,d=new l}}d.length()>0&&u(d,{},p)},l.prototype.invert=function(u){var c=new l;return this.reduce(function(h,d){if(d.insert)c.delete(s.default.length(d));else{if(d.retain&&d.attributes==null)return c.retain(d.retain),h+d.retain;if(d.delete||d.retain&&d.attributes){var p=d.delete||d.retain,T=u.slice(h,h+p);return T.forEach(function(_){d.delete?c.push(_):d.retain&&d.attributes&&c.retain(s.default.length(_),i.default.invert(d.attributes,_.attributes))}),h+p}}return h},0),c.chop()},l.prototype.transform=function(u,c){if(c===void 0&&(c=!1),c=!!c,typeof u=="number")return this.transformPosition(u,c);for(var h=u,d=s.default.iterator(this.ops),p=s.default.iterator(h.ops),T=new l;d.hasNext()||p.hasNext();)if(d.peekType()==="insert"&&(c||p.peekType()!=="insert"))T.retain(s.default.length(d.next()));else if(p.peekType()==="insert")T.push(p.next());else{var _=Math.min(d.peekLength(),p.peekLength()),v=d.next(_),b=p.next(_);if(v.delete)continue;b.delete?T.push(b):T.retain(_,i.default.transform(v.attributes,b.attributes,c))}return T.chop()},l.prototype.transformPosition=function(u,c){c===void 0&&(c=!1),c=!!c;for(var h=s.default.iterator(this.ops),d=0;h.hasNext()&&d<=u;){var p=h.peekLength(),T=h.peekType();if(h.next(),T==="delete"){u-=Math.min(p,u-d);continue}else T==="insert"&&(d<u||!c)&&(u+=p);d+=p}return u},l.Op=s.default,l.AttributeMap=i.default,l})();return Xo=a,Xo}var jP=FP();const Nh=k_(jP);const Cg={essential:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}],["blockquote","code-block","link"],[{color:[]},"clean"]],minimal:[[{header:1},{header:2}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}]],full:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","video","image"],["clean"]]},BP=Cf({name:"QuillEditor",inheritAttrs:!1,props:{content:{type:[String,Object]},contentType:{type:String,default:"delta",validator:t=>["delta","html","text"].includes(t)},enable:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},placeholder:{type:String,required:!1},theme:{type:String,default:"snow",validator:t=>["snow","bubble",""].includes(t)},toolbar:{type:[String,Array,Object],required:!1,validator:t=>typeof t=="string"&&t!==""?t.charAt(0)==="#"?!0:Object.keys(Cg).indexOf(t)!==-1:!0},modules:{type:Object,required:!1},options:{type:Object,required:!1},globalOptions:{type:Object,required:!1}},emits:["textChange","selectionChange","editorChange","update:content","focus","blur","ready"],setup:(t,e)=>{ri(()=>{s()}),kf(()=>{n=null});let n,r;const i=Ue(),s=()=>{var y;if(i.value){if(r=o(),t.modules)if(Array.isArray(t.modules))for(const I of t.modules)Ea.register(`modules/${I.name}`,I.module);else Ea.register(`modules/${t.modules.name}`,t.modules.module);n=new Ea(i.value,r),m(t.content),n.on("text-change",h),n.on("selection-change",p),n.on("editor-change",T),t.theme!=="bubble"&&i.value.classList.remove("ql-bubble"),t.theme!=="snow"&&i.value.classList.remove("ql-snow"),(y=n.getModule("toolbar"))===null||y===void 0||y.container.addEventListener("mousedown",I=>{I.preventDefault()}),e.emit("ready",n)}},o=()=>{const y={};if(t.theme!==""&&(y.theme=t.theme),t.readOnly&&(y.readOnly=t.readOnly),t.placeholder&&(y.placeholder=t.placeholder),t.toolbar&&t.toolbar!==""&&(y.modules={toolbar:(()=>{if(typeof t.toolbar=="object")return t.toolbar;if(typeof t.toolbar=="string")return t.toolbar.charAt(0)==="#"?t.toolbar:Cg[t.toolbar]})()}),t.modules){const I=(()=>{var S,D;const B={};if(Array.isArray(t.modules))for(const $ of t.modules)B[$.name]=(S=$.options)!==null&&S!==void 0?S:{};else B[t.modules.name]=(D=t.modules.options)!==null&&D!==void 0?D:{};return B})();y.modules=Object.assign({},y.modules,I)}return Object.assign({},t.globalOptions,t.options,y)},a=y=>typeof y=="object"&&y?y.slice():y,l=y=>Object.values(y.ops).some(I=>!I.retain||Object.keys(I).length!==1);let u;const c=y=>{if(typeof u==typeof y){if(y===u)return!0;if(typeof y=="object"&&y&&typeof u=="object"&&u)return!l(u.diff(y))}return!1},h=(y,I,S)=>{u=a(E()),c(t.content)||e.emit("update:content",u),e.emit("textChange",{delta:y,oldContents:I,source:S})},d=Ue(),p=(y,I,S)=>{d.value=!!n?.hasFocus(),e.emit("selectionChange",{range:y,oldRange:I,source:S})};ms(d,y=>{y?e.emit("focus",i):e.emit("blur",i)});const T=(...y)=>{y[0]==="text-change"&&e.emit("editorChange",{name:y[0],delta:y[1],oldContents:y[2],source:y[3]}),y[0]==="selection-change"&&e.emit("editorChange",{name:y[0],range:y[1],oldRange:y[2],source:y[3]})},_=()=>i.value,v=()=>{var y;return(y=n?.getModule("toolbar"))===null||y===void 0?void 0:y.container},b=()=>{if(n)return n;throw`The quill editor hasn't been instantiated yet,
                  make sure to call this method when the editor ready
                  or use v-on:ready="onReady(quill)" event instead.`},E=(y,I)=>t.contentType==="html"?x():t.contentType==="text"?g(y,I):n?.getContents(y,I),m=(y,I="api")=>{const S=y||(t.contentType==="delta"?new Nh:"");t.contentType==="html"?R(S):t.contentType==="text"?w(S,I):n?.setContents(S,I),u=a(S)},g=(y,I)=>{var S;return(S=n?.getText(y,I))!==null&&S!==void 0?S:""},w=(y,I="api")=>{n?.setText(y,I)},x=()=>{var y;return(y=n?.root.innerHTML)!==null&&y!==void 0?y:""},R=y=>{n&&(n.root.innerHTML=y)},A=(y,I="api")=>{const S=n?.clipboard.convert(y);S&&n?.setContents(S,I)},P=()=>{n?.focus()},O=()=>{Aa(()=>{var y;!e.slots.toolbar&&n&&((y=n.getModule("toolbar"))===null||y===void 0||y.container.remove()),s()})};return ms(()=>t.content,y=>{if(!n||!y||c(y))return;const I=n.getSelection();I&&Aa(()=>n?.setSelection(I)),m(y)},{deep:!0}),ms(()=>t.enable,y=>{n&&n.enable(y)}),{editor:i,getEditor:_,getToolbar:v,getQuill:b,getContents:E,setContents:m,getHTML:x,setHTML:R,pasteHTML:A,focus:P,getText:g,setText:w,reinit:O}},render(){var t,e;return[(e=(t=this.$slots).toolbar)===null||e===void 0?void 0:e.call(t),Tu("div",{ref:"editor",...this.$attrs})]}}),qP={class:"container"},HP={class:"headerRow"},zP={class:"titleSection"},KP={key:0,class:"addForm"},$P={class:"fileInputWrapper"},GP={class:"editorWrapper"},WP={class:"fileInputWrapper"},QP=["disabled"],YP={key:0,class:"statusText"},XP={class:"gridContainer"},JP="dzj4k39q5",ZP="unique_preset",eC={__name:"ListView",setup(t){const e=[[{header:[1,2,3,!1]}],["bold","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["divider"],["clean"]],n=Ue([]),r=Ue(null),i=Ue(!1),s=Ue(!1),o=Ue(""),a=Ue("newest"),l=Ue(null),u=Ue(null),c=Ue([]),h=Is({name:"",description:"",image:""}),d=Yt(()=>[...n.value].sort((g,w)=>{if(a.value==="newest")return(w.createdAt||0)-(g.createdAt||0);if(a.value==="oldest")return(g.createdAt||0)-(w.createdAt||0);if(a.value==="az")return g.name.localeCompare(w.name);if(a.value==="za")return w.name.localeCompare(g.name)})),p=()=>{confirm("Are you sure? This will clear all text.")&&(h.description="",l.value&&l.value.setHTML(""))},T=g=>{u.value=g.target.files[0]},_=g=>{c.value=Array.from(g.target.files)},v=async g=>{const w=new FormData;w.append("file",g),w.append("upload_preset",ZP);const x=await fetch(`https://api.cloudinary.com/v1_1/${JP}/image/upload`,{method:"POST",body:w});if(!x.ok)throw new Error("Upload failed");return(await x.json()).secure_url},b=async()=>{if(!h.name)return alert("Name is required");s.value=!0,o.value="Starting upload...";try{let g="https://via.placeholder.com/400";u.value&&(o.value="Uploading Cover Image...",g=await v(u.value));let w=[];c.value.length>0&&(o.value=`Uploading ${c.value.length} gallery images...`,w=await Promise.all(c.value.map(R=>v(R)))),o.value="Saving to Database...";let x=r.value.email;try{const R=await Zl(zr(dr,"profiles",r.value.uid));if(R.exists()){const A=R.data();A.isAnonymous?x="Anonymous User":A.nickname&&(x=A.nickname)}}catch{console.log("Profile check failed, using email")}await sI(Cp(dr,"creatures"),{name:h.name,description:h.description,image:g,gallery:w,createdBy:r.value.uid,authorEmail:r.value.email,authorName:x,createdAt:Date.now()}),h.name="",h.description="",l.value&&l.value.setHTML(""),u.value=null,c.value=[],i.value=!1,o.value="",E()}catch(g){console.error(g),o.value="Error: "+g.message}finally{s.value=!1}},E=async()=>{const g=await nI(Cp(dr,"creatures"));n.value=g.docs.map(w=>({id:w.id,...w.data()}))};ri(()=>{E(),zu(qi,g=>r.value=g)});const m=g=>{g.getModule("toolbar").addHandler("divider",()=>{const x=g.getSelection(!0);g.insertEmbed(x.index,"divider",!0),g.setSelection(x.index+1)}),g.clipboard.addMatcher("IMG",(x,R)=>new Nh),g.root.addEventListener("drop",x=>{x.dataTransfer?.files?.length>0&&(x.preventDefault(),alert(` Dragging images is disabled to protect the database.

Please use the Gallery upload below!`))})};return(g,w)=>{const x=Ba("QuillEditor");return Ve(),Be("div",qP,[pe("div",HP,[pe("div",zP,[w[5]||(w[5]=pe("h2",null,"Creature Catalog",-1)),Ln(pe("select",{"onUpdate:modelValue":w[0]||(w[0]=R=>a.value=R),class:"sortSelect"},[...w[4]||(w[4]=[pe("option",{value:"newest"},"Newest to Oldest",-1),pe("option",{value:"oldest"},"Oldest to Newest",-1),pe("option",{value:"az"},"Name (A-Z)",-1),pe("option",{value:"za"},"Name (Z-A)",-1)])],512),[[n0,a.value]])]),r.value?(Ve(),Be("button",{key:0,onClick:w[1]||(w[1]=R=>i.value=!i.value),class:"btn btnPrimary"},Mt(i.value?"Cancel":"+ Add New"),1)):_t("",!0)]),i.value&&r.value?(Ve(),Be("div",KP,[w[7]||(w[7]=pe("label",{class:"label"},"Name",-1)),Ln(pe("input",{"onUpdate:modelValue":w[2]||(w[2]=R=>h.name=R),placeholder:"Creature Name",class:"formInput"},null,512),[[hr,h.name]]),w[8]||(w[8]=pe("label",{class:"label"},"Main Cover Image",-1)),pe("div",$P,[pe("input",{type:"file",onChange:T,accept:"image/*",class:"formInput"},null,32)]),w[9]||(w[9]=pe("label",{class:"label"},"Description & Details",-1)),pe("div",GP,[it(x,{ref_key:"myQuillEditor",ref:l,theme:"snow",content:h.description,"onUpdate:content":w[3]||(w[3]=R=>h.description=R),contentType:"html",toolbar:e,onReady:m},null,8,["content"]),pe("div",{class:"editorFooter"},[pe("button",{type:"button",onClick:p,class:"clearBtn"}," Clear all text ")])]),w[10]||(w[10]=pe("label",{class:"label"},"Gallery (Extra Images)",-1)),pe("div",WP,[pe("input",{type:"file",onChange:_,multiple:"",accept:"image/*",class:"formInput"},null,32),w[6]||(w[6]=pe("small",{style:{color:"#aaa"}},"Hold Ctrl/Cmd to select multiple files",-1))]),pe("button",{onClick:b,class:"btn btnPrimary blockBtn",disabled:s.value},Mt(s.value?"Uploading & Saving...":"Save Creature"),9,QP),o.value?(Ve(),Be("p",YP,Mt(o.value),1)):_t("",!0)])):_t("",!0),pe("div",XP,[(Ve(!0),Be(bn,null,Nc(d.value,R=>(Ve(),uo(NP,{key:R.id,creature:R},null,8,["creature"]))),128))])])}}},tC=si(eC,[["__scopeId","data-v-99a4dec4"]]),nC={key:0,class:"container"},rC={key:0},iC={class:"detailLayout"},sC={class:"imageCol"},oC=["src"],aC={class:"infoCol"},lC={class:"creatureTitle"},uC={class:"authorText"},cC=["innerHTML"],fC={key:0,class:"adminActions"},hC={class:"permissionText"},dC={key:0,class:"gallerySection"},pC={class:"galleryGrid"},gC=["src","onClick"],mC={key:1,class:"editOverlay"},yC={class:"editContainer"},vC={key:0,class:"currentImagePreview"},_C=["src"],bC={class:"fileInputWrapper"},EC={class:"editorWrapper"},TC={key:1,class:"galleryManager"},wC=["src"],AC=["onClick"],IC={class:"fileInputWrapper"},SC={class:"btnRow",style:{"margin-top":"20px"}},RC=["disabled"],OC={key:2,class:"statusText"},PC="uniquecreadm1225@gmail.com",CC="dzj4k39q5",kC="unique_preset",NC={__name:"DetailView",setup(t){const e=[[{header:[1,2,3,!1]}],["bold","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["divider"],["clean"]],n=iP(),r=el(),i=Ue(null),s=Ue(null),o=Ue("Loading..."),a=Ue(!1),l=Ue(!1),u=Ue(""),c=Ue(null),h=Is({name:"",description:"",image:"",gallery:[]}),d=Ue(null),p=Ue([]),T=Yt(()=>s.value&&s.value.email===PC),_=Yt(()=>!s.value||!i.value?!1:!!(T.value||i.value.createdBy===s.value.uid));ri(async()=>{await v(),zu(qi,S=>s.value=S)});const v=async()=>{const S=zr(dr,"creatures",n.params.id),D=await Zl(S);D.exists()&&(i.value={id:D.id,...D.data()},b(i.value.createdBy,i.value.authorEmail))},b=async(S,D)=>{const B=D||"Unknown Creator";if(!S){o.value=B;return}try{const $=await Zl(zr(dr,"profiles",S));if($.exists()){const W=$.data();W.isAnonymous?o.value="Anonymous User":W.nickname&&W.nickname.trim().length>0?o.value=W.nickname:o.value=B}else o.value=B}catch($){console.error("Error fetching profile:",$),o.value=B}},E=()=>{h.name=i.value.name,h.description=i.value.description,h.image=i.value.image,h.gallery=[...i.value.gallery||[]],a.value=!0},m=S=>{h.gallery.splice(S,1)},g=S=>d.value=S.target.files[0],w=S=>p.value=Array.from(S.target.files),x=async S=>{const D=new FormData;D.append("file",S),D.append("upload_preset",kC);const B=await fetch(`https://api.cloudinary.com/v1_1/${CC}/image/upload`,{method:"POST",body:D});if(!B.ok)throw new Error("Upload failed");return(await B.json()).secure_url},R=async()=>{l.value=!0,u.value="Processing...";try{if(d.value&&(u.value="Uploading new cover...",h.image=await x(d.value)),p.value.length>0){u.value="Uploading new gallery images...";const D=await Promise.all(p.value.map(B=>x(B)));h.gallery=[...h.gallery,...D]}u.value="Updating database...";const S=zr(dr,"creatures",n.params.id);await rI(S,{name:h.name,description:h.description,image:h.image,gallery:h.gallery}),await v(),a.value=!1,d.value=null,p.value=[],u.value=""}catch(S){console.error(S),u.value="Error: "+S.message}finally{l.value=!1}},A=async()=>{confirm("Are you sure? This cannot be undone.")&&(await iI(zr(dr,"creatures",n.params.id)),r.push("/list"))},P=S=>!S||!S.includes("cloudinary")?S||"https://via.placeholder.com/400":S.replace("/upload/","/upload/c_limit,w_1000/"),O=S=>!S||!S.includes("cloudinary")?S:S.replace("/upload/","/upload/c_fill,w_300,h_300/"),y=S=>window.open(S,"_blank"),I=S=>{S.getModule("toolbar").addHandler("divider",()=>{const B=S.getSelection(!0);S.insertEmbed(B.index,"divider",!0),S.setSelection(B.index+1)}),S.clipboard.addMatcher("IMG",(B,$)=>new Nh),S.root.addEventListener("drop",B=>{B.dataTransfer?.files?.length>0&&(B.preventDefault(),alert("Please use the image uploader below."))})};return(S,D)=>{const B=Ba("QuillEditor");return i.value?(Ve(),Be("div",nC,[a.value?(Ve(),Be("div",mC,[pe("div",yC,[D[5]||(D[5]=pe("h2",null,"Edit Creature",-1)),D[6]||(D[6]=pe("label",{class:"label"},"Name",-1)),Ln(pe("input",{"onUpdate:modelValue":D[0]||(D[0]=$=>h.name=$),class:"formInput"},null,512),[[hr,h.name]]),D[7]||(D[7]=pe("label",{class:"label"},"Change Cover Image (Optional)",-1)),h.image?(Ve(),Be("div",vC,[pe("img",{src:h.image,style:{height:"50px","border-radius":"4px"}},null,8,_C),D[4]||(D[4]=pe("small",null,"Current Cover",-1))])):_t("",!0),pe("div",bC,[pe("input",{type:"file",onChange:g,accept:"image/*",class:"formInput"},null,32)]),D[8]||(D[8]=pe("label",{class:"label"},"Description",-1)),pe("div",EC,[it(B,{ref_key:"editQuillEditor",ref:c,theme:"snow",content:h.description,"onUpdate:content":D[1]||(D[1]=$=>h.description=$),contentType:"html",toolbar:e,onReady:I},null,8,["content"])]),D[9]||(D[9]=pe("label",{class:"label"},"Manage Gallery",-1)),h.gallery.length>0?(Ve(),Be("div",TC,[(Ve(!0),Be(bn,null,Nc(h.gallery,($,W)=>(Ve(),Be("div",{key:W,class:"galleryThumb"},[pe("img",{src:O($)},null,8,wC),pe("button",{onClick:ae=>m(W),class:"removeImgBtn"},"X",8,AC)]))),128))])):_t("",!0),D[10]||(D[10]=pe("label",{class:"label",style:{"margin-top":"15px"}},"Add More Images",-1)),pe("div",IC,[pe("input",{type:"file",onChange:w,multiple:"",accept:"image/*",class:"formInput"},null,32)]),pe("div",SC,[pe("button",{onClick:R,class:"btn btnSuccess",disabled:l.value},Mt(l.value?"Saving...":"Save Changes"),9,RC),pe("button",{onClick:D[2]||(D[2]=$=>a.value=!1),class:"btn",style:{background:"#444",color:"white"}},"Cancel")]),u.value?(Ve(),Be("p",OC,Mt(u.value),1)):_t("",!0)])])):(Ve(),Be("div",rC,[pe("div",iC,[pe("div",sC,[pe("img",{src:P(i.value.image),class:"detailImage"},null,8,oC)]),pe("div",aC,[pe("h1",lC,Mt(i.value.name),1),pe("p",uC," Added by: "+Mt(o.value),1),pe("div",{class:"ql-editor descriptionContent",innerHTML:i.value.description},null,8,cC),_.value?(Ve(),Be("div",fC,[pe("p",hC," Actions available because you are "+Mt(T.value?"an Admin":"the Creator")+". ",1),pe("div",{class:"btnRow"},[pe("button",{onClick:E,class:"btn btnEdit"},"Edit Creature"),pe("button",{onClick:A,class:"btn btnDelete"},"Delete")])])):_t("",!0)])]),i.value.gallery&&i.value.gallery.length>0?(Ve(),Be("div",dC,[D[3]||(D[3]=pe("h3",{class:"galleryTitle"},"Gallery",-1)),pe("div",pC,[(Ve(!0),Be(bn,null,Nc(i.value.gallery,($,W)=>(Ve(),Be("div",{key:W,class:"galleryItem"},[pe("img",{src:O($),onClick:ae=>y($)},null,8,gC)]))),128))])])):_t("",!0)]))])):_t("",!0)}}},xC=si(NC,[["__scopeId","data-v-fa6dd6a0"]]),DC={class:"container loginContainer"},LC={key:0,class:"errorText"},MC={__name:"LoginView",setup(t){const e=Ue(""),n=Ue(""),r=Ue(""),i=el(),s=async()=>{r.value="";try{await oS(qi,e.value,n.value),i.push("/list")}catch{r.value="Invalid email or password."}};return(o,a)=>(Ve(),Be("div",DC,[a[3]||(a[3]=pe("h2",null,"Login",-1)),pe("form",{onSubmit:Bm(s,["prevent"])},[Ln(pe("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>e.value=l),type:"email",placeholder:"Email",class:"formInput",required:""},null,512),[[hr,e.value]]),Ln(pe("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>n.value=l),type:"password",placeholder:"Password",class:"formInput",required:""},null,512),[[hr,n.value]]),a[2]||(a[2]=pe("button",{type:"submit",class:"btn btnPrimary blockBtn"},"Login",-1)),r.value?(Ve(),Be("p",LC,Mt(r.value),1)):_t("",!0)],32)]))}},VC=si(MC,[["__scopeId","data-v-28a25a4d"]]),UC={class:"container createContainer"},FC=["disabled"],jC={key:0,class:"successText"},BC={key:1,class:"errorText"},qC="uniquecreadm1225@gmail.com",HC={__name:"CreateUserView",setup(t){const e=Ue(""),n=Ue(""),r=Ue(""),i=Ue(""),s=Ue(!1),o=el();ri(()=>{const l=qi.currentUser;(!l||l.email!==qC)&&(alert("Access Denied: Admins Only"),o.push("/"))});const a=async()=>{r.value="",i.value="",s.value=!0;const u=jf(v_,"secondaryApp"),c=p_(u);try{await sS(c,e.value,n.value),await r_(c),i.value=`Success! Account created for ${e.value}`,e.value="",n.value=""}catch(h){h.code==="auth/email-already-in-use"?r.value="That email is already registered.":h.code==="auth/weak-password"?r.value="Password must be at least 6 chars.":r.value=h.message}finally{D1(u),s.value=!1}};return(l,u)=>(Ve(),Be("div",UC,[u[4]||(u[4]=pe("h2",null,"Create New Creator",-1)),u[5]||(u[5]=pe("p",{class:"subtitle"},"Only you (Admin) can see this.",-1)),pe("form",{onSubmit:Bm(a,["prevent"])},[u[2]||(u[2]=pe("label",{class:"label"},"New Creator Email",-1)),Ln(pe("input",{"onUpdate:modelValue":u[0]||(u[0]=c=>e.value=c),type:"email",placeholder:"friend@example.com",class:"formInput",required:""},null,512),[[hr,e.value]]),u[3]||(u[3]=pe("label",{class:"label"},"Assign Password",-1)),Ln(pe("input",{"onUpdate:modelValue":u[1]||(u[1]=c=>n.value=c),type:"password",placeholder:"Min 6 characters",class:"formInput",required:""},null,512),[[hr,n.value]]),pe("button",{type:"submit",class:"btn btnPrimary blockBtn",disabled:s.value},Mt(s.value?"Creating...":"Create Account"),9,FC),i.value?(Ve(),Be("p",jC,Mt(i.value),1)):_t("",!0),r.value?(Ve(),Be("p",BC,Mt(r.value),1)):_t("",!0)],32)]))}},zC=si(HC,[["__scopeId","data-v-83e63cc3"]]),KC={class:"container settingsContainer"},$C={class:"settingsCard"},GC={class:"inputGroup"},WC=["disabled"],QC=["disabled"],YC={class:"charCount"},XC={class:"switchRow"},JC={class:"settingsCard securityCard"},ZC=["disabled"],ek={__name:"SettingsView",setup(t){const e=Ue(""),n=Ue(!1),r=Ue(!1),i=Ue(""),s=Ue(!1),o=Ue(null),a=Is({old:"",new:"",confirm:""}),l=Ue(!1),u=Ue(""),c=Ue(!1),h=async _=>{o.value=_;const v=zr(dr,"profiles",_),b=await Zl(v);if(b.exists()){const E=b.data();e.value=E.nickname||"",n.value=E.isAnonymous||!1}};ri(()=>{zu(qi,_=>{_&&h(_.uid)})});const d=async()=>{if(o.value){r.value=!0,s.value=!1;try{const _=zr(dr,"profiles",o.value);await Dp(_,{nickname:e.value,isAnonymous:n.value},{merge:!0}),i.value="Nickname updated successfully!",setTimeout(()=>i.value="",3e3)}catch{s.value=!0,i.value="Error saving profile."}finally{r.value=!1}}},p=async()=>{if(o.value){n.value=!n.value;try{const _=zr(dr,"profiles",o.value);await Dp(_,{isAnonymous:n.value},{merge:!0}),i.value=n.value?"You are now anonymous":"Identity revealed",setTimeout(()=>i.value="",3e3)}catch(_){console.error(_)}}},T=async()=>{if(u.value="",c.value=!1,!a.old||!a.new||!a.confirm){c.value=!0,u.value="Please fill in all fields.";return}if(a.new!==a.confirm){c.value=!0,u.value="New passwords do not match.";return}if(a.new.length<6){c.value=!0,u.value="Password must be at least 6 characters.";return}if(!confirm("Are you sure you want to change your password?"))return;l.value=!0;const _=qi.currentUser;try{const v=Ns.credential(_.email,a.old);await iS(_,v),await aS(_,a.new),u.value="Password updated successfully!",a.old="",a.new="",a.confirm=""}catch(v){c.value=!0,v.code==="auth/wrong-password"||v.code==="auth/invalid-credential"?u.value="Incorrect current password.":v.code==="auth/weak-password"?u.value="New password is too weak.":u.value="Error: "+v.message}finally{l.value=!1}};return(_,v)=>(Ve(),Be("div",KC,[v[13]||(v[13]=pe("h2",null,"User Settings",-1)),v[14]||(v[14]=pe("p",{class:"subtitle"},"Manage your profile and security.",-1)),pe("div",$C,[v[6]||(v[6]=pe("h3",null,"Public Profile",-1)),v[7]||(v[7]=pe("label",{class:"label"},"Display Nickname",-1)),pe("div",GC,[Ln(pe("input",{"onUpdate:modelValue":v[0]||(v[0]=b=>e.value=b),type:"text",placeholder:"Enter nickname",class:"formInput",maxlength:"16",disabled:n.value},null,8,WC),[[hr,e.value]]),pe("button",{onClick:d,class:"btn btnPrimary saveBtn",disabled:n.value||r.value}," Save ",8,QC)]),pe("small",YC,Mt(e.value.length)+"/16 characters",1),pe("div",XC,[v[5]||(v[5]=pe("label",{class:"switchLabel"},"Appear as anonymous",-1)),pe("div",{class:po(["toggleSwitch",{active:n.value}]),onClick:p},[...v[4]||(v[4]=[pe("div",{class:"toggleThumb"},null,-1)])],2)]),i.value?(Ve(),Be("p",{key:0,class:po(["statusText",{errorText:s.value}])},Mt(i.value),3)):_t("",!0)]),pe("div",JC,[v[8]||(v[8]=pe("h3",null,"Change Password",-1)),v[9]||(v[9]=pe("p",{class:"warningText"}," Warning: You will need to use the new password next time you login.",-1)),v[10]||(v[10]=pe("label",{class:"label"},"Current Password",-1)),Ln(pe("input",{"onUpdate:modelValue":v[1]||(v[1]=b=>a.old=b),type:"password",placeholder:"Required",class:"formInput"},null,512),[[hr,a.old]]),v[11]||(v[11]=pe("label",{class:"label"},"New Password",-1)),Ln(pe("input",{"onUpdate:modelValue":v[2]||(v[2]=b=>a.new=b),type:"password",placeholder:"Min 6 characters",class:"formInput"},null,512),[[hr,a.new]]),v[12]||(v[12]=pe("label",{class:"label"},"Confirm New Password",-1)),Ln(pe("input",{"onUpdate:modelValue":v[3]||(v[3]=b=>a.confirm=b),type:"password",placeholder:"Repeat new password",class:"formInput"},null,512),[[hr,a.confirm]]),pe("button",{onClick:T,class:"btn btnPrimary blockBtn",disabled:l.value},Mt(l.value?"Updating...":"Update Password"),9,ZC),u.value?(Ve(),Be("p",{key:0,class:po(["statusText",{errorText:c.value}])},Mt(u.value),3)):_t("",!0)])]))}},tk=si(ek,[["__scopeId","data-v-716f8af6"]]),nk=rP({history:LO(),routes:[{path:"/",name:"home",component:SP},{path:"/list",name:"list",component:tC},{path:"/creature/:id",name:"detail",component:xC},{path:"/login",name:"login",component:VC},{path:"/create-user",name:"create-user",component:zC},{path:"/settings",name:"settings",component:tk}],scrollBehavior(t,e,n){return n||{top:0}}}),rk=Ea.import("blots/block/embed");class xh extends rk{static create(){let e=super.create();return e.setAttribute("contenteditable","false"),e}}xh.blotName="divider";xh.tagName="hr";Ea.register(xh);const Dh=a0(TP);Dh.component("QuillEditor",BP);Dh.use(nk);Dh.mount("#app");
